{"version":3,"sources":["store/actions.ts","components/reports/error.tsx","components/Loading.tsx","components/reports/areaBump.tsx","components/reports/bar.tsx","components/reports/bump.tsx","components/reports/chord.tsx","components/reports/funnel.tsx","components/reports/line.tsx","components/reports/metric.tsx","components/reports/radar.tsx","components/reports/bubble.tsx","components/reports/table/index.tsx","components/reports/calendar.tsx","components/reports/heatMap.tsx","components/reports/network.tsx","components/reports/sankey.tsx","webpack:///./src/constants.ts?85ee","components/reports/scatterplot.tsx","components/reports/stream.tsx","utils.ts","components/Graph.tsx","components/querybuilder/InitialNodeSelector.tsx","components/tab.tsx","components/querybuilder/Toolbar.tsx","components/querybuilder/Header.tsx","components/querybuilder/index.tsx","views/QueryEditor.tsx","components/forms/button.tsx","components/modal.tsx","components/grid/Column.tsx","components/card.tsx","components/reports/ReportForm.tsx","components/reports/Report.tsx","components/ColdStart.tsx","components/header.tsx","components/feedback/FeedbackForm.tsx","views/DashboardView.tsx","views/DashboardList.tsx","views/QueryList.tsx","desktop/client.ts","desktop/files.ts","store/reducers/currentQuery.ts","store/reducers/dashboards.ts","persistence.ts","store/index.ts","store/reducers/queries.ts","views/Help.tsx","components/export/ExportToNeo4j.tsx","components/export/ImportFromNeo4j.tsx","components/export/ExportForm.tsx","components/Footer.tsx","App.tsx","serviceWorker.ts","logo.svg","index.tsx"],"names":["APP_INIT","ADD_DASHBOARD","UPDATE_DASHBOARD","DELETE_DASHBOARD","ADD_REPORT","UPDATE_REPORT","DELETE_REPORT","REORDER_REPORTS","ADD_QUERY","UPDATE_QUERY","DELETE_QUERY","init","dashboards","reports","queries","type","payload","deleteDashboard","id","deleteQuery","LOAD_QUERY","ADD_NODE","SELECT_NODE","REMOVE_NODE","ADD_RELATIONSHIP","SELECT_RELATIONSHIP","REMOVE_RELATIONSHIP","ADD_PREDICATE","REMOVE_PREDICATE","ADD_RETURN","REMOVE_RETURN","SET_NAME","selectNode","ReportError","error","className","message","Loading","AreaBumpReport","props","records","first","checkResultKeys","data","map","row","recordToNative","get","x","y","reduce","acc","index","findIndex","item","concat","push","sort","a","b","margin","top","right","bottom","left","BarReport","keys","idx","key","value","includes","forEach","hasOwnProperty","layout","groupMode","stacked","indexBy","padding","valueScale","colors","scheme","axisTop","axisRight","axisBottom","tickSize","tickPadding","tickRotation","axisLeft","labelSkipWidth","labelSkipHeight","labelTextColor","from","modifiers","legends","dataFrom","anchor","direction","justify","translateX","translateY","itemsSpacing","itemWidth","itemHeight","itemDirection","itemOpacity","symbolSize","effects","on","style","animate","motionStiffness","motionDamping","config","BumpReport","pointSize","activePointSize","inactivePointSize","pointColor","theme","pointBorderWidth","activePointBorderWidth","pointBorderColor","legend","legendPosition","legendOffset","ChordReport","to","fromIndex","toIndex","amounts","matrix","find","layers","valueFormat","padAngle","innerRadiusRatio","innerRadiusOffset","arcOpacity","arcBorderWidth","arcBorderColor","ribbonOpacity","ribbonBorderWidth","enableLabel","label","labelOffset","labelRotation","isInteractive","arcHoverOpacity","arcHoverOthersOpacity","ribbonHoverOpacity","ribbonHoverOthersOpacity","FunnelReport","borderWidth","labelColor","beforeSeparatorLength","beforeSeparatorOffset","afterSeparatorLength","afterSeparatorOffset","currentPartSizeExtension","currentBorderWidth","LineReport","slice","length","xScale","yScale","min","max","reverse","curve","yFormat","enableGridX","enableGridY","orient","pointLabelYOffset","useMesh","symbolShape","symbolBorderColor","itemBackground","MetricReport","number","toNumber","count","fontSize","RadarReport","has","maxValue","borderColor","gridLevels","gridShape","gridLabelOffset","enableDots","dotSize","dotColor","dotBorderWidth","dotBorderColor","enableDotLabel","dotLabel","dotLabelYOffset","fillOpacity","blendMode","itemTextColor","BubbleReport","hierarchy","color","parent","children","root","buildTree","node","name","child","identity","fill","match","depth","TableReport","toString","CalendarReport","day","monthBorderColor","dayBorderWidth","dayBorderColor","HeatMap","NetworkReport","nodes","radius","links","source","target","repulsivity","iterations","nodeColor","e","nodeBorderWidth","nodeBorderColor","distanceMin","distanceMax","SankeyReport","filter","align","nodeOpacity","nodeThickness","nodeInnerPadding","nodeSpacing","linkOpacity","linkHoverOthersOpacity","enableLinkGradient","labelPosition","labelOrientation","labelPadding","operators","Operator","EQUALS","CONTAINS","STARTS_WITH","ENDS_WITH","GREATER_THAN","GREATER_THAN_OR_EQUAL","LESS_THAN","LESS_THAN_OR_EQUAL","conditions","Object","directions","in","Direction","INCOMING","out","OUTGOING","both","BOTH","reportSources","text","TYPE_METRIC","TYPE_TABLE","TYPE_BAR","TYPE_STACKED_BAR","TYPE_HORIZONTAL_BAR","TYPE_HORIZONTAL_STACKED_BAR","TYPE_LINE","TYPE_RADAR","TYPE_FUNNEL","TYPE_HORIZONTAL_FUNNEL","TYPE_BUMP","TYPE_AREA_BUMP","TYPE_CHORD","TYPE_BUBBLE","TYPE_CALENDAR","TYPE_HEAT_MAP","TYPE_NETWORK","TYPE_SANKEY","TYPE_VERTICAL_SANKEY","TYPE_SCATTER_PLOT","TYPE_STREAM","barExampleQuery","barPreviewQuery","reportTypes","hint","exampleQuery","previewQuery","component","MetricTable","fromEntries","getHint","aggregateFunctions","queryToCypher","query","cypher","params","builder","Builder","relationships","predicates","output","endNodes","rel","lastEnd","relationship","operator","condition","negative","whereNotContains","alias","whereNotStartsWith","whereNotEndsWith","whereLessThan","whereLessThanOrEqual","whereGreaterThan","whereGreaterThanOrEqual","whereNot","whereContains","whereStartsWith","whereEndsWith","where","field","aggregate","as","return","build","input","Array","isArray","converted","entries","missing","Error","join","TreeRelationship","dispatch","useDispatch","onClick","TreeNode","useSelector","state","currentQuery","theseRels","relationshipList","thesePredicates","p","theseOutputs","Query","paramStatements","Graph","InitialNodeSelector","labels","handleButtonClick","addNode","maxWidth","Tab","classes","active","ToolbarHeader","ToolbarRelationship","ExistingPredicate","removePredicate","Predicates","AddPredicateForm","properties","useState","setName","setValue","setNegative","setCondition","onChange","checked","htmlFor","thisProperty","ReturnFields","handleRemoveClick","removeReturn","theseFields","AddReturnForm","setAggregate","setAs","placeholder","undefined","ToolbarTabs","tabs","tab","NodeToolbar","selected","thisNode","setTab","thisLabel","activeTab","addRelationshipOptions","next","width","ToolbarFooter","removeText","RelationshipToolbar","thisRelationship","r","thisType","types","startNode","endNode","Toolbar","startsWith","QueryHeader","setUpdatedName","savedAt","confirm","QueryEditorForm","graph","QueryEditor","useSchema","loading","useEffect","Button","px","py","bg","colour","size","preventDefault","disabled","Modal","onClose","minWidth","maxHeight","title","Column","columns","Card","titleClasses","titleActive","cardClasses","containerClasses","expanded","onTitleClick","actions","action","ReportForm","dashboard","report","submitText","onSubmit","setColumns","rows","setType","setSource","setQuery","database","setDatabase","parseInt","q","console","log","ExpandIcon","height","viewBox","stroke","strokeWidth","fillRule","strokeLinecap","strokeLinejoin","x1","y1","x2","y2","points","ContractIcon","Report","setExpanded","handleDelete","useReadCypher","useReportResults","run","content","JSON","stringify","order","updateReport","componentProps","ColdStart","buttonText","onButtonClick","Header","sectionText","sectionLink","pageTitle","buttons","button","postFeedback","body","formData","URLSearchParams","append","helpful","page","reason","moreInformation","fetch","method","mode","then","response","catch","reasons","inaccurate","other","FeedbackForm","setHelpful","setReason","setMoreInformation","setPage","view","role","d","cx","cy","currentTarget","OrderEditFormItem","handleUpClick","handleDownClick","OrderEditForm","setReports","newOrder","extracted","splice","newReports","reorderReports","Dashboard","showEditOrder","setShowEditOrder","description","setDescription","showAddReport","setShowAddReport","handleShowAddReportClick","addReport","updateDashboard","path","Dashboards","history","n","showAddForm","setShowAddForm","handleShowAddClick","addDashboard","Queries","handleShowAddFormClick","addQuery","url","window","location","href","searchParams","URL","relateUrl","relateApiToken","relateProjectId","neo4jDesktopGraphAppId","apolloCache","InMemoryCache","typePolicies","RelateFile","keyFields","Project","fields","files","merge","uploadLink","createUploadLink","uri","credentials","headers","client","ApolloClient","cache","link","GET_PROJECT_FILES","gql","ADD_PROJECT_FILE","DELETE_PROJECT_FILE","saveFile","filePath","contents","mutate","mutation","variables","projectId","fileUpload","File","res","getFileContentsAsJson","file","token","getFileContents","parse","initialState","updated","loaded","removeRelationshipFromTree","toRemove","removeNodeFromTree","ready","saveState","DASHBOARD_FILE","localStorage","setItem","DASHBOARD_LOCAL_STORAGE_KEY","saveDashboards","rootReducer","combineReducers","saveQueries","v4","Date","found","createStore","QUERIES_LOCAL_STORAGE_KEY","QUERIES_FILE","getDashboardDataFromDesktop","dashboardsFile","downloadToken","raw","getItem","Promise","resolve","getDashboardDataFromLocalStorage","getQueryDataFromDesktop","queriesFile","getStateFromDesktop","filterValue","getProject","all","dashboardData","getStateFromLocalStorage","ExampleReport","example","Help","ExportToNeo4j","confirmation","setConfirmation","started","setStarted","useLazyWriteCypher","save","isSaving","setIsSaving","getState","useStore","json","ImportFromNeo4j","object","ExportForm","showMenu","setShowMenu","showLoadFromNeo4jForm","setShowLoadFromNeo4jForm","showExportToNeo4jForm","setShowExportToNeo4jForm","hideMenu","marginBottom","position","borderLeft","borderRight","borderTop","version","xmlns","Footer","context","useContext","Neo4jContext","host","driver","address","auth","_host","_port","principal","App","store","exact","DashboardList","QueryList","DashboardView","Boolean","hostname","process","REACT_APP_NEO4J_SCHEME","createDriver","REACT_APP_NEO4J_HOST","REACT_APP_NEO4J_PORT","REACT_APP_NEO4J_USERNAME","REACT_APP_NEO4J_PASSWORD","ReactDOM","render","StrictMode","logo","src","appLogo","alt","footer","document","getElementById","navigator","serviceWorker","registration","unregister"],"mappings":"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","file":"static/js/main.2fffb51c.chunk.js","sourcesContent":["import { AggregationFunction } from \"@neode/querybuilder\"\nimport { ApocDirection, Condition } from \"../constants\"\nimport { Dashboard, Report } from \"./reducers/dashboards\"\n\nexport type QueriesState = Query[]\n\nexport interface Query {\n    loaded: boolean;\n    updated: boolean;\n    id?: string;\n    name?: string;\n    savedAt?: Date;\n\n    selected?: string;\n    nodes: TreeNode[];\n    relationships: TreeRelationship[];\n    predicates: TreePredicate[];\n    output: TreeReturn[];\n}\n\n\nexport interface TreeNode {\n    id: string;\n    label: string;\n}\n\nexport interface TreeRelationship {\n    id: string;\n    from: string;\n    to: string;\n    type: string;\n    direction: ApocDirection;\n}\n\nexport interface TreePredicatePayload {\n    alias: string;\n    name: string;\n    type: any;\n    condition: Condition;\n    negative?: boolean;\n    value: any;\n}\n\nexport interface TreePredicate extends TreePredicatePayload {\n    id: string;\n}\n\nexport interface TreeReturnPayload {\n    alias: string;\n    name: string;\n    aggregate?: AggregationFunction;\n    as?: string;\n}\n\nexport interface TreeReturn extends TreeReturnPayload {\n    id: string;\n}\n\n\nexport const APP_INIT = 'APP_INIT'\nexport const ADD_DASHBOARD = 'ADD_DASHBOARD'\nexport const UPDATE_DASHBOARD = 'UPDATE_DASHBOARD'\nexport const DELETE_DASHBOARD = 'DELETE_DASHBOARD'\nexport const ADD_REPORT = 'ADD_REPORT'\nexport const UPDATE_REPORT = 'UPDATE_REPORT'\nexport const DELETE_REPORT = 'DELETE_REPORT'\nexport const REORDER_REPORTS = 'REORDER_REPORTS'\n\nexport const ADD_QUERY = 'ADD_QUERY'\nexport const UPDATE_QUERY = 'UPDATE_QUERY'\nexport const DELETE_QUERY = 'DELETE_QUERY'\n\n/**\n * Init app\n */\nexport function init(dashboards: Dashboard[], reports: Report[], queries: Query[]) {\n    return {\n        type: APP_INIT,\n        payload: { dashboards, reports, queries },\n    }\n}\n\n/**\n * Dashboards\n */\nexport function addDashboard(name: string, description: string) {\n    return {\n        type: ADD_DASHBOARD,\n        payload: { name, description },\n    }\n}\n\nexport function updateDashboard(id: string, name: string, description: string) {\n    return {\n        type: UPDATE_DASHBOARD,\n        payload: { id, name, description },\n    }\n}\n\nexport function deleteDashboard(id: string) {\n    return {\n        type: DELETE_DASHBOARD,\n        payload: { id },\n    }\n}\n\nexport function addReport(dashboard: string, name: string, database: string | undefined, type: string, source: string, query: string, columns: number) {\n    return {\n        type: ADD_REPORT,\n        payload: {\n            dashboard,\n            name,\n            database,\n            type,\n            source,\n            query,\n            columns\n        },\n    }\n}\n\nexport function updateReport(id: string, dashboard: string, name: string, database: string | undefined,  type: string, source: string, query: string, columns: number, rows: number, order: number) {\n    return {\n        type: UPDATE_REPORT,\n        payload: {\n            id,\n            dashboard,\n            name,\n            database,\n            type,\n            source,\n            query,\n            columns,\n            rows,\n            order,\n        },\n    }\n}\n\nexport function reorderReports(reports: Report[]) {\n    return {\n        type: REORDER_REPORTS,\n        payload: {\n            reports,\n        }\n    }\n}\n\nexport function deleteReport(id: string) {\n    return {\n        type: DELETE_REPORT,\n        payload: { id },\n    }\n}\n\n/**\n * Queries\n */\nexport function addQuery(name: string) {\n    return {\n        type: ADD_QUERY,\n        payload: { name },\n    }\n}\n\nexport function deleteQuery(id: string) {\n    return {\n        type: DELETE_QUERY,\n        payload: { id },\n    }\n}\n\nexport function updateQuery(payload: Query) {\n    return {\n        type: UPDATE_QUERY,\n        payload,\n    }\n}\n\n\n/**\n * Query Builder\n */\nexport const LOAD_QUERY = 'LOAD_QUERY'\nexport const ADD_NODE = 'ADD_NODE'\nexport const SELECT_NODE = 'SELECT_NODE'\nexport const REMOVE_NODE = 'REMOVE_NODE'\nexport const ADD_RELATIONSHIP = 'ADD_RELATIONSHIP'\nexport const SELECT_RELATIONSHIP = 'SELECT_RELATIONSHIP'\nexport const REMOVE_RELATIONSHIP = 'REMOVE_RELATIONSHIP'\nexport const ADD_PREDICATE = 'ADD_PREDICATE'\nexport const REMOVE_PREDICATE = 'REMOVE_PREDICATE'\nexport const ADD_RETURN = 'ADD_RETURN'\nexport const REMOVE_RETURN = 'REMOVE_RETURN'\n\nexport const SET_NAME = 'SET_NAME'\n\nexport function setName(name: string | undefined) {\n    return {\n        type: SET_NAME,\n        payload: { name },\n    }\n}\n\nexport function loadQuery(payload) {\n    return {\n        type: LOAD_QUERY,\n        payload,\n    }\n}\n\nexport function addNode(label: string) {\n    return {\n        type: ADD_NODE,\n        payload: { label },\n    }\n}\n\nexport function selectNode(payload: string) {\n    return {\n        type: SELECT_NODE,\n        payload,\n    }\n}\n\nexport function removeNode(id: string) {\n    return {\n        type: REMOVE_NODE,\n        payload: { id },\n    }\n}\n\nexport function addRelationship(payload: TreeRelationship) {\n    return {\n        type: ADD_RELATIONSHIP,\n        payload,\n    }\n}\n\nexport function selectRelationship(payload: string) {\n    return {\n        type: SELECT_RELATIONSHIP,\n        payload,\n    }\n}\n\nexport function removeRelationship(id: string) {\n    return {\n        type: REMOVE_RELATIONSHIP,\n        payload: { id },\n    }\n}\n\nexport function addPredicate(payload: TreePredicatePayload) {\n    return {\n        type: ADD_PREDICATE,\n        payload\n    }\n}\n\nexport function removePredicate(id: string) {\n    return {\n        type: REMOVE_PREDICATE,\n        payload: { id }\n    }\n}\n\nexport function addReturn(payload: TreeReturnPayload) {\n    return {\n        type: ADD_RETURN,\n        payload\n    }\n}\n\nexport function removeReturn(id: string) {\n    return {\n        type: REMOVE_RETURN,\n        payload: { id }\n    }\n}\n","import React from 'react'\n\nexport default function ReportError({ error }) {\n    return  (\n        <div className=\"font-bold rounded-md border border-red-600 p-2 text-red-600\">\n            {error.message}\n        </div>\n    )\n}","import React from 'react'\n\nexport default function Loading() {\n    return (\n        <div className=\"bg-blue-100 text-blue-800 p-2 h-full w-full\">\n            Loading...\n        </div>\n    )\n}","import React from 'react'\nimport { AreaBumpInputSerie, ResponsiveAreaBump } from '@nivo/bump'\nimport { ChartReportProps } from './ReportProps'\nimport { checkResultKeys, recordToNative } from '../../utils'\nimport ReportError from './error'\nimport Loading from '../Loading'\n\nexport default function AreaBumpReport(props: ChartReportProps) {\n    const { records, first } = props\n\n    if ( !first ) {\n        return <Loading />\n    }\n\n    const error = checkResultKeys(first, ['id', 'x', 'y'])\n\n    if ( error !== false ) {\n        return <ReportError error={error} />\n    }\n\n    const data: AreaBumpInputSerie[] = records.map(row => ({\n        id: recordToNative(row.get('id')),\n        x:  recordToNative(row.get('x')),\n        y: recordToNative(row.get('y')),\n    }))\n        .reduce((acc: Record<string, any>[], row: Record<string, any>) => {\n            const index = acc.findIndex(item => item.id === row.id)\n\n            if ( index === -1 ) {\n                return acc.concat({\n                    id: row.id,\n                    data: [ { x: row.x, y: row.y } ]\n                }) as AreaBumpInputSerie[]\n            }\n\n            acc[ index ].data.push({ x: row.x, y: row.y })\n\n            acc[ index ].data.sort((a, b) => a.x > b.x ? -1 : 1)\n\n            return acc as AreaBumpInputSerie[]\n        }, [] as AreaBumpInputSerie[])\n\n    return (\n        <div className=\"h-full w-full overflow-hidden\">\n            <ResponsiveAreaBump\n                data={data}\n                margin={{ top: 32, right: 100, bottom: 32, left: 24 }}\n            />\n        </div>\n    )\n}","import React from 'react'\nimport { ResponsiveBar } from '@nivo/bar'\nimport { ChartReportProps } from './ReportProps'\nimport { checkResultKeys, recordToNative } from '../../utils'\nimport ReportError from './error'\nimport Loading from '../Loading'\n\nexport default function BarReport(props: ChartReportProps) {\n    const { records, first } = props\n\n    if ( !first ) {\n        return <Loading />\n    }\n\n    const error = checkResultKeys(first, ['index', 'key', 'value'])\n\n    if ( error !== false ) {\n        return <ReportError error={error} />\n    }\n\n    const keys: string[] = []\n\n    const data: Record<string, any>[] = records.reduce((data: Record<string, any>[], row: Record<string, any>) => {\n        const index = recordToNative(row.get('index'))\n        const idx = data.findIndex(item => item.index === index)\n\n        const key = recordToNative(row.get('key'))\n        const value = recordToNative(row.get('value'))\n\n        if ( !keys.includes(key) ) {\n            keys.push(key)\n        }\n\n        if ( idx > -1 ) {\n            data[ idx ][ key ] = value\n        }\n        else {\n            data.push({ index, [key]: value  })\n        }\n\n        return data\n    }, [])\n        .map(row => {\n            keys.forEach(key => {\n                if ( !row.hasOwnProperty(key) ) {\n                    row[ key ] = 0\n                }\n            })\n\n            return row\n        })\n\n    return <ResponsiveBar\n        layout={props.layout}\n        groupMode={props.stacked ? 'stacked' : 'grouped'}\n        data={data}\n        keys={keys}\n        indexBy=\"index\"\n        margin={{ top: 24, right: 128, bottom: 38, left: 36 }}\n        padding={0.3}\n        valueScale={{ type: 'linear' }}\n        colors={{ scheme: 'nivo' }}\n        axisTop={null}\n        axisRight={null}\n        axisBottom={{\n            tickSize: 5,\n            tickPadding: 5,\n            tickRotation: 0,\n        }}\n        axisLeft={{\n            tickSize: 5,\n            tickPadding: 5,\n            tickRotation: 0,\n        }}\n        labelSkipWidth={12}\n        labelSkipHeight={12}\n        labelTextColor={{ from: 'color', modifiers: [ [ 'darker', 1.6 ] ] }}\n        legends={[\n            {\n                dataFrom: 'keys',\n                anchor: 'bottom-right',\n                direction: 'column',\n                justify: true,\n                translateX: 120,\n                translateY: 0,\n                itemsSpacing: 2,\n                itemWidth: 100,\n                itemHeight: 20,\n                itemDirection: 'right-to-left',\n                itemOpacity: 0.85,\n                symbolSize: 20,\n                effects: [\n                    {\n                        on: 'hover',\n                        style: {\n                            itemOpacity: 1\n                        }\n                    }\n                ]\n            }\n        ]}\n        animate={false}\n        motionStiffness={90}\n        motionDamping={15}\n\n        {...props.config}\n    />\n\n}","import React from 'react'\nimport { BumpInputSerie, ResponsiveBump } from '@nivo/bump'\nimport { ChartReportProps } from './ReportProps'\nimport { checkResultKeys, recordToNative } from '../../utils'\nimport ReportError from './error'\nimport Loading from '../Loading'\n\nexport default function BumpReport(props: ChartReportProps) {\n    const { records, first } = props\n\n    if ( !first ) {\n        return <Loading />\n    }\n\n    const error = checkResultKeys(first, ['id', 'x', 'y'])\n\n    if ( error !== false ) {\n        return <ReportError error={error} />\n    }\n\n\n    const data: BumpInputSerie[] = records.map(row => ({\n        id: recordToNative(row.get('id')),\n        x:  recordToNative(row.get('x')),\n        y: recordToNative(row.get('y')),\n    }))\n        .reduce((acc: Record<string, any>[], row: Record<string, any>) => {\n            const index = acc.findIndex(item => item.id === row.id)\n\n            if ( index === -1 ) {\n                return acc.concat({\n                    id: row.id,\n                    data: [ { x: row.x, y: row.y } ]\n                }) as BumpInputSerie[]\n            }\n\n            acc[ index ].data.push({ x: row.x, y: row.y })\n\n            acc[ index ].data.sort((a, b) => a.x > b.x ? -1 : 1)\n\n            return acc as BumpInputSerie[]\n        }, [] as BumpInputSerie[])\n\n    return (\n        <div className=\"h-full w-full overflow-hidden\">\n            <ResponsiveBump\n                data={data}\n                margin={{ top: 32, right: 100, bottom: 32, left: 12 }}\n                colors={{ scheme: 'spectral' }}\n\n                pointSize={10}\n                activePointSize={16}\n                inactivePointSize={0}\n                pointColor={{ theme: 'background' }}\n                pointBorderWidth={3}\n                activePointBorderWidth={3}\n                pointBorderColor={{ from: 'serie.color' }}\n                axisTop={{\n                    tickSize: 5,\n                    tickPadding: 5,\n                    tickRotation: 0,\n                    legend: '',\n                    legendPosition: 'middle',\n                    legendOffset: -36\n                }}\n                axisRight={null}\n                axisBottom={{\n                    tickSize: 5,\n                    tickPadding: 5,\n                    tickRotation: 0,\n                    legend: '',\n                    legendPosition: 'middle',\n                    legendOffset: 32\n                }}\n                axisLeft={null}\n            />\n        </div>\n    )\n}","import React from 'react'\nimport { ResponsiveChord } from '@nivo/chord'\nimport { checkResultKeys, recordToNative } from '../../utils'\nimport { ChartReportProps } from './ReportProps'\nimport Loading from '../Loading'\nimport ReportError from './error'\n\nexport default function ChordReport(props: ChartReportProps) {\n    const { records, first } = props\n\n    if ( !first ) {\n        return <Loading />\n    }\n\n    const error = checkResultKeys(first, ['from', 'to', 'value'])\n\n    if ( error !== false ) {\n        return <ReportError error={error} />\n    }\n\n    const data = records.reduce((acc: Record<string, any>[], row: Record<string, any>) => {\n        const from = recordToNative(row.get('from'))\n        const to = recordToNative(row.get('to'))\n        const value = recordToNative(row.get('value'))\n\n        const fromIndex = acc.findIndex(row => (row as Record<string, any>).id === from)\n        const toIndex = acc.findIndex(row => (row as Record<string, any>).id === from)\n\n        if ( toIndex === -1 ) {\n            acc.concat({\n                id: to,\n                amounts: []\n            })\n        }\n\n        if ( fromIndex === -1 ) {\n            return acc.concat({\n                id: from,\n                amounts: [\n                    { to, value }\n                ]\n            })\n        }\n\n        acc[ fromIndex ].amounts.push({ to, value })\n\n        return acc\n\n    }, [])\n\n    const keys = data.map(data => data.id)\n\n    const matrix = data.map(from => {\n        return keys.map(key => from.amounts.find(row => row.to === key)?.value || 0)\n    })\n\n    return (\n        <div className=\"h-full w-full overflow-hidden\">\n            <ResponsiveChord\n                layers={['ribbons', 'arcs']}\n                matrix={matrix}\n                keys={keys}\n                margin={{ top: 12, right: 12, bottom: 12, left: 12 }}\n                valueFormat=\".2f\"\n                padAngle={0.02}\n                innerRadiusRatio={0.96}\n                innerRadiusOffset={0.02}\n                arcOpacity={1}\n                arcBorderWidth={1}\n                arcBorderColor={{ from: 'color', modifiers: [ [ 'darker', 0.4 ] ] }}\n                ribbonOpacity={0.5}\n                ribbonBorderWidth={1}\n                enableLabel={true}\n                label=\"id\"\n                labelOffset={12}\n                labelRotation={-90}\n                labelTextColor={{ from: 'color', modifiers: [ [ 'darker', 1 ] ] }}\n                colors={{ scheme: 'nivo' }}\n                isInteractive={true}\n                arcHoverOpacity={1}\n                arcHoverOthersOpacity={0.25}\n                ribbonHoverOpacity={0.75}\n                ribbonHoverOthersOpacity={0.25}\n                animate={false}\n                motionStiffness={90}\n                motionDamping={7}\n            />\n        </div>\n    )\n\n}","import React from 'react'\nimport { ResponsiveFunnel } from '@nivo/funnel'\nimport { ChartReportProps } from './ReportProps'\nimport { checkResultKeys, recordToNative } from '../../utils'\nimport Loading from '../Loading'\nimport ReportError from './error'\n\nexport default function FunnelReport(props: ChartReportProps) {\n    const { records, first } = props\n\n    if ( !first ) {\n        return <Loading />\n    }\n\n    const error = checkResultKeys(first, ['id', 'value', 'label'])\n\n    if ( error !== false ) {\n        return <ReportError error={error} />\n    }\n\n    const data = records.map(row => ({\n        id: recordToNative(row.get('id')),\n        value:  recordToNative(row.get('value')),\n        label: recordToNative(row.get('label')),\n    }))\n\n    return (\n        <div className=\"h-full w-full overflow-hidden\">\n            <ResponsiveFunnel\n                data={data}\n                margin={{ top: 20, right: 0, bottom: 20, left: 0 }}\n                direction={props.layout || 'vertical'}\n                colors={{ scheme: 'nivo' }}\n                borderWidth={20}\n                labelColor={{ from: 'color', modifiers: [ [ 'darker', 3 ] ] }}\n                beforeSeparatorLength={24}\n                beforeSeparatorOffset={20}\n                afterSeparatorLength={24}\n                afterSeparatorOffset={20}\n                currentPartSizeExtension={10}\n                currentBorderWidth={30}\n                {...props.config}\n            />\n        </div>\n    )\n}","import React from 'react'\nimport { ResponsiveLine } from '@nivo/line'\nimport { ChartReportProps } from './ReportProps'\nimport { recordToNative } from '../../utils'\nimport ReportError from './error'\n\ninterface LineChartData {\n    id: string;\n    data: Record<any, any>[]\n}\n\nexport default function LineReport(props: ChartReportProps) {\n    const { records, first, } = props\n\n    const label = first!.keys[0] as string\n    const keys = first!.keys.slice(1)\n\n    if ( !keys.length ) {\n        return <ReportError error={{message: 'This report was expecting three columns'}} />\n    }\n\n    const data: LineChartData[] = keys.map(key => ({\n        // TODO: colour\n        id: key as string,\n        data: []\n    }))\n\n    records.forEach((row) => {\n        keys.forEach(key => {\n            const index = data.findIndex(item => (item as Record<string, any>).id === key)\n            const x: string | number = recordToNative(row.get(label)) || 0\n            const y: any = recordToNative(row.get(key)) || 0\n\n            data[ index ].data.push({ x, y })\n        })\n    })\n\n    return (\n        <div className=\"h-full w-full overflow-hidden\">\n            <ResponsiveLine\n                data={data}\n                margin={{ top: 24, right: 24, bottom: 38, left: 24 }}\n                xScale={{ type: 'point' }}\n                yScale={{ type: 'linear', min: 'auto', max: 'auto', stacked: true, reverse: false }}\n                curve=\"cardinal\"\n                yFormat=\" >-.0r\"\n                enableGridX={false}\n                enableGridY={false}\n                axisTop={null}\n                axisRight={null}\n                axisBottom={{\n                    orient: 'bottom',\n                    tickSize: 6,\n                    tickPadding: 12,\n                    tickRotation: 0,\n                }}\n                axisLeft={null}\n                pointSize={10}\n                pointColor=\"white\"\n                pointBorderWidth={2}\n                pointBorderColor={{ from: 'serieColor' }}\n                pointLabelYOffset={-12}\n                useMesh={true}\n                legends={[\n                    {\n                        anchor: 'top-right',\n                        direction: 'row',\n                        justify: false,\n                        translateX: 0,\n                        translateY: 0,\n                        itemsSpacing: 0,\n                        itemDirection: 'right-to-left',\n                        itemWidth: 80,\n                        itemHeight: 20,\n                        itemOpacity: 0.75,\n                        symbolSize: 6,\n                        symbolShape: 'circle',\n                        symbolBorderColor: 'rgba(0, 0, 0, .5)',\n                        effects: [\n                            {\n                                on: 'hover',\n                                style: {\n                                    itemBackground: 'rgba(0, 0, 0, .03)',\n                                    itemOpacity: 1\n                                }\n                            }\n                        ]\n                    }\n                ]}\n\n                {...props.config}\n            />\n        </div>\n    )\n}","import React from 'react'\n\nimport ReportProps from './ReportProps';\n\nexport default function MetricReport(props: ReportProps) {\n    const { first } = props\n\n    const key: string = first!.keys[0] as string\n    let number = first!.get(key)\n\n    if ( typeof number.toNumber === 'function' ) number = number.toNumber()\n\n    const count = <span style={{fontSize: '6em'}}>{number}</span>\n\n    return (\n        <div className=\"text-blue-600 leading-none pt-2\">\n            {count}\n        </div>\n    )\n}","import React from 'react'\nimport { ResponsiveRadar } from '@nivo/radar'\nimport { ChartReportProps } from './ReportProps'\nimport { recordToNative } from '../../utils'\n\nexport default function RadarReport(props: ChartReportProps) {\n    const { records, } = props\n\n    const keys: string[] = []\n\n    const data: Record<string, any>[] = records.reduce((data: Record<string, any>[], row: Record<string, any>) => {\n        if ( !row.has('index') ) return data;\n        const index = recordToNative(row.get('index'))\n        const idx = data.findIndex(item => item.index === index)\n\n        const key = recordToNative(row.get('key'))\n        const value = recordToNative(row.get('value'))\n\n        if ( !keys.includes(key) ) {\n            keys.push(key)\n        }\n\n        if ( idx > -1 ) {\n            data[ idx ][ key ] = value\n        }\n        else {\n            data.push({ index, [key]: value  })\n        }\n\n        return data\n    }, [])\n        .map(row => {\n            keys.forEach(key => {\n                if ( !row.hasOwnProperty(key) ) {\n                    row[ key ] = 0\n                }\n            })\n\n            return row\n        })\n\n    return (\n        <ResponsiveRadar\n            data={data}\n            keys={keys}\n            indexBy=\"index\"\n            maxValue=\"auto\"\n            margin={{ top: 24, right: 12, bottom: 24, left: 48 }}\n            curve=\"linearClosed\"\n            borderWidth={2}\n            borderColor={{ from: 'color' }}\n            gridLevels={5}\n            gridShape=\"circular\"\n            gridLabelOffset={36}\n            enableDots={true}\n            dotSize={10}\n            dotColor={{ theme: 'background' }}\n            dotBorderWidth={2}\n            dotBorderColor={{ from: 'color' }}\n            enableDotLabel={true}\n            dotLabel=\"value\"\n            dotLabelYOffset={-12}\n            colors={{ scheme: 'nivo' }}\n            fillOpacity={0.25}\n            blendMode=\"multiply\"\n            animate={false}\n\n            isInteractive={true}\n            legends={[\n                {\n                    anchor: 'top-left',\n                    direction: 'column',\n                    translateX: -48,\n                    translateY: -12,\n                    itemWidth: 80,\n                    itemHeight: 20,\n                    itemTextColor: '#999',\n                    symbolSize: 12,\n                    symbolShape: 'circle',\n                    effects: [\n                        {\n                            on: 'hover',\n                            style: {\n                                itemTextColor: '#000'\n                            }\n                        }\n                    ]\n                }\n            ]}\n            {...props.config}\n        />\n    )\n}","import React from 'react'\nimport { ResponsiveBubble } from '@nivo/circle-packing'\nimport { checkResultKeys, recordToNative } from '../../utils'\nimport { ChartReportProps } from './ReportProps'\nimport ReportError from './error'\nimport Loading from '../Loading'\n\nexport default function BubbleReport(props: ChartReportProps) {\n    const { records, first } = props\n\n    if ( !first ) {\n        return <Loading />\n    }\n\n    const error = checkResultKeys(first, ['from', 'to', 'value'])\n\n    if ( error !== false ) {\n        return <ReportError error={error} />\n    }\n\n    const hierarchy = records.reduce((hierarchy: Record<string, any>[], row: Record<string, any>) => {\n        const from = recordToNative(row.get('from'))\n        const to = recordToNative(row.get('to'))\n        const value = recordToNative(row.get('value')) || 1\n        const color = row.keys.includes('color') || 'red'\n            ? recordToNative(row.get('value'))\n            : null\n\n        const fromIndex = hierarchy.findIndex(row => (row as Record<string, any>).id === from)\n        const toIndex = hierarchy.findIndex(row => (row as Record<string, any>).id === to)\n\n        // Append 'from' node and children to the hierarchy\n        if ( fromIndex === -1 ) {\n            return hierarchy.concat({\n                parent: null,\n                id: from,\n                value,\n                color,\n                children: [\n                    to\n                ]\n            })\n        }\n\n        // Append 'to' node to hierarchy\n        if ( toIndex === -1 ) {\n            hierarchy = hierarchy.concat({\n                id: to,\n                value,\n                color,\n                parent: from,\n                children: []\n            })\n        }\n\n        // Push the child into the hierarchy\n        hierarchy[ fromIndex ].children.push(to)\n\n        return hierarchy\n    }, [])\n\n\n    const buildTree = id => {\n        if ( !id ) return {}\n        const node = hierarchy.find(row => row.id === id)\n\n        if ( !node ) {\n            return { id }\n        }\n\n        return {\n            id: node?.id,\n            name: node?.id,\n            value: node?.value,\n            color: node?.color,\n            children: node?.children?.map(child => buildTree(child))\n        }\n}\n\n    const rootNode = hierarchy.find(node => node.parent === null)\n    const root = buildTree(rootNode!.id)\n\n    return (\n        <div className=\"h-full w-full overflow-hidden\">\n            <ResponsiveBubble\n                root={root}\n                margin={{ top: 12, right: 12, bottom: 12, left: 12 }}\n                identity=\"id\"\n                value=\"value\"\n                colors={{ scheme: 'nivo' }}\n                padding={6}\n                labelTextColor={{ from: 'color', modifiers: [ [ 'darker', 0.8 ] ] }}\n                borderWidth={1}\n                borderColor={{ from: 'color' }}\n                fill={[ { match: { depth: 1 }, id: 'lines' } ]}\n                animate={false}\n                motionStiffness={90}\n                motionDamping={12}\n            />\n        </div>\n    )\n\n}","import React from \"react\"\nimport ReportProps from \"../ReportProps\";\n\nexport default function TableReport(props: ReportProps) {\n    const { records, first } = props\n\n    return (\n        <table>\n            <thead>\n                <tr className=\"bg-gray-100\">\n                    {first && first!.keys.map(key => <th className=\"px-2 py-4 text-left\" key={key as string}>{key}</th>)}\n                </tr>\n            </thead>\n            <tbody>\n                {records!.map((row, index) => <tr key={index}>\n                    {row.keys.map(key => <td className=\"px-2 py-4 text-left\" key={(key as string)+ index}>{ row.get(key)?.toString() }</td>)}\n                </tr>)}\n            </tbody>\n        </table>\n    )\n}","import React from 'react'\nimport { ResponsiveCalendar } from '@nivo/calendar'\nimport { checkResultKeys, recordToNative } from '../../utils'\nimport { ChartReportProps } from './ReportProps'\nimport Loading from '../Loading'\nimport ReportError from './error'\n\nexport default function CalendarReport(props: ChartReportProps) {\n    const { records, first } = props\n\n    if ( !first ) {\n        return <Loading />\n    }\n\n    const error = checkResultKeys(first, ['day', 'value'])\n\n    if ( error !== false ) {\n        return <ReportError error={error} />\n    }\n\n    const data = records.map(row => ({\n        day: row.get('day').toString(),\n        value: recordToNative(row.get('value')),\n    })).sort((a, b) => a.day < b.day ? -1 : 1)\n\n    const from = data[0].day\n    const to = data[ data.length - 1].day\n\n    return (\n        <div className=\"h-full w-full overflow-hidden\">\n            <ResponsiveCalendar\n                data={data}\n                from={from}\n                to={to}\n                margin={{ top: 12, right: 24, bottom: 12, left: 24 }}\n                monthBorderColor=\"#ffffff\"\n                dayBorderWidth={2}\n                dayBorderColor=\"#ffffff\"\n            />\n        </div>\n    )\n\n}","import { ResponsiveHeatMap } from '@nivo/heatmap';\nimport React from 'react'\nimport { checkResultKeys, recordToNative } from '../../utils';\nimport Loading from '../Loading';\nimport ReportError from './error';\nimport { ChartReportProps } from './ReportProps';\n\nexport default function HeatMap(props: ChartReportProps) {\n    const { records, first } = props\n\n    if ( !first ) {\n        return <Loading />\n    }\n\n    const error = checkResultKeys(first, ['index', 'key', 'value'])\n\n    if ( error !== false ) {\n        return <ReportError error={error} />\n    }\n\n    const keys: string[] = []\n    const data: Record<string, any>[] = records.reduce((data: Record<string, any>[], row: Record<string, any>) => {\n        const index = recordToNative(row.get('index'))\n        const idx = data.findIndex(item => item.index === index)\n\n        const key = recordToNative(row.get('key'))\n        const value = recordToNative(row.get('value'))\n\n        if ( !keys.includes(key) ) {\n            keys.push(key)\n        }\n\n        if ( idx > -1 ) {\n            data[ idx ][ key ] = value\n        }\n        else {\n            data.push({ index, [key]: value  })\n        }\n\n        return data\n    }, [])\n        .map(row => {\n            keys.forEach(key => {\n                if ( !row.hasOwnProperty(key) ) {\n                    row[ key ] = 0\n                }\n            })\n\n            return row\n        })\n\n\n\n    return (\n        <ResponsiveHeatMap\n            data={data}\n            keys={keys}\n            indexBy=\"index\"\n            margin={{ top: 100, right: 60, bottom: 60, left: 60 }}\n            axisTop={{ orient: 'top', tickSize: 5, tickPadding: 5, tickRotation: -90, legend: '', legendOffset: 36 }}\n        />\n    )\n}","import React from 'react'\nimport { ResponsiveNetwork } from '@nivo/network'\nimport { checkResultKeys, recordToNative } from '../../utils'\nimport { ChartReportProps } from './ReportProps'\nimport ReportError from './error'\nimport Loading from '../Loading'\n\nexport default function NetworkReport(props: ChartReportProps) {\n    const { records, first } = props\n\n    if ( !first ) {\n        return <Loading />\n    }\n\n    const error = checkResultKeys(first, ['from', 'to'])\n\n    if ( error !== false ) {\n        return <ReportError error={error} />\n    }\n\n    const nodes = records.reduce((acc: Record<string, any>[], row) => {\n        const from = recordToNative(row.get('from'))\n        const to = recordToNative(row.get('to'))\n\n        if ( acc.findIndex(row => row.id === from) === -1 ) {\n            acc = acc.concat({\n                id: from,\n                radius: 10,\n                depth: 1,\n                color: \"rgb(97, 205, 187)\"\n            })\n        }\n\n        if ( acc.findIndex(row => row.id === to) === -1 ) {\n            acc = acc.concat({\n                id: to,\n                radius: 10,\n                depth: 1,\n                color: \"rgb(97, 205, 187)\"\n            })\n        }\n\n        return acc\n    }, [])\n\n\n    const links = records.map((row) => ({\n        source: recordToNative(row.get('from')),\n        target: recordToNative(row.get('to')),\n        // distance: recordToNative(row.get('distance'))\n    }), [])\n\n\n    return (\n        <div className=\"h-full w-full overflow-hidden\">\n            <ResponsiveNetwork\n                // @ts-ignore\n                nodes={nodes}\n                links={links}\n                // margin={{ top: 0, right: 0, bottom: 0, left: 0 }}\n                repulsivity={6}\n                iterations={60}\n                nodeColor={function(e){return e.color || 'rgba(215, 100, 69, 1)'}}\n                nodeBorderWidth={1}\n                nodeBorderColor={{ from: 'color', modifiers: [ [ 'darker', 0.4 ] ] }}\n                // // linkThickness={function(e){return Math.max(2*(2-e.source.depth), 1)}}\n                // linkThickness={2}\n                motionStiffness={160}\n                motionDamping={12}\n                distanceMin={10}\n                distanceMax={50}\n            />\n        </div>\n    )\n\n}","import React from 'react'\nimport { ResponsiveSankey, SankeyDataNode } from '@nivo/sankey'\nimport { checkResultKeys, recordToNative } from '../../utils'\nimport { ChartReportProps } from './ReportProps'\nimport ReportError from './error'\nimport Loading from '../Loading'\n\nexport default function SankeyReport(props: ChartReportProps) {\n    const { records, first } = props\n\n    if ( !first ) {\n        return <Loading />\n    }\n\n    const error = checkResultKeys(first, ['from', 'to', 'value'])\n\n    if ( error !== false ) {\n        return <ReportError error={error} />\n    }\n\n    const nodes: SankeyDataNode[] = records.reduce((acc: SankeyDataNode[], row) => {\n        const from = recordToNative(row.get('from'))\n        const to = recordToNative(row.get('to'))\n\n        if ( acc.findIndex(row => row.id === from) === -1 ) {\n            acc = acc.concat({\n                id: from,\n            })\n        }\n\n        if ( acc.findIndex(row => row.id === to) === -1 ) {\n            acc = acc.concat({\n                id: to,\n            })\n        }\n\n        return acc\n    }, [])\n\n\n    const links = records.map((row) => ({\n        source: recordToNative(row.get('from')),\n        target: recordToNative(row.get('to')),\n        value: recordToNative(row.get('value'))\n    }), [])\n        .filter(row => row.source !== row.target)\n\n    return (\n        <div className=\"h-full w-full overflow-hidden\">\n            <ResponsiveSankey\n                data={{ nodes, links }}\n                margin={{ top: 12, right: 0, bottom: 0, left: 0 }}\n                animate={false}\n                align=\"justify\"\n                // @ts-ignore\n                layout={props.layout || 'horizontal'}\n\n                nodeOpacity={1}\n                nodeThickness={8}\n                nodeInnerPadding={0}\n                nodeSpacing={4}\n                nodeBorderWidth={0}\n                nodeBorderColor={{ from: 'color', modifiers: [ [ 'darker', 0.8 ] ] }}\n                linkOpacity={0.5}\n                linkHoverOthersOpacity={0.1}\n                enableLinkGradient={true}\n                labelPosition=\"inside\"\n                labelOrientation=\"vertical\"\n                labelPadding={8}\n                labelTextColor={{ from: 'color', modifiers: [ [ 'darker', 1 ] ] }}\n            />\n        </div>\n    )\n\n}","import { Direction, Operator, AggregationFunction } from \"@neode/querybuilder\"\nimport AreaBumpReport from \"./components/reports/areaBump\"\nimport BarReport from \"./components/reports/bar\"\nimport BumpReport from \"./components/reports/bump\"\nimport ChordReport from \"./components/reports/chord\"\nimport FunnelReport from \"./components/reports/funnel\"\nimport LineReport from \"./components/reports/line\"\nimport MetricReport from \"./components/reports/metric\"\nimport RadarReport from \"./components/reports/radar\"\nimport BubbleReport from \"./components/reports/bubble\"\nimport MetricTable from \"./components/reports/table\"\nimport CalendarReport from \"./components/reports/calendar\"\nimport HeatMap from \"./components/reports/heatMap\"\nimport NetworkReport from \"./components/reports/network\"\nimport SankeyReport from \"./components/reports/sankey\"\nimport ScatterPlotReport from \"./components/reports/scatterplot\"\nimport StreamReport from \"./components/reports/stream\"\n\nexport type ApocDirection = 'in' | 'out' | 'both'\nexport type Condition = 'equals' | 'contains' | 'starts with' | 'ends with' | 'greater than' | 'less than' | 'greater than or equal' | 'less than or equal'\n\nexport const operators = {\n    'equals': Operator.EQUALS,\n    'contains': Operator.CONTAINS,\n    'starts with': Operator.STARTS_WITH,\n    'ends with': Operator.ENDS_WITH,\n    'greater than': Operator.GREATER_THAN,\n    'greater than or equal': Operator.GREATER_THAN_OR_EQUAL,\n    'less than': Operator.LESS_THAN,\n    'less than or equal': Operator.LESS_THAN_OR_EQUAL,\n}\n\nexport const conditions: Condition[] = Object.keys(operators) as Condition[]\n\nexport const directions = {\n    in: Direction.INCOMING,\n    out: Direction.OUTGOING,\n    both: Direction.BOTH,\n}\n\n\nexport const reportSources = [\n    { key: 'cypher', value: 'cypher', text: 'Raw Cypher Query', },\n    { key: 'query', value: 'query', text: 'Query from Query Builder', },\n]\n\nexport const TYPE_METRIC = 'metric'\nexport const TYPE_TABLE = 'table'\nexport const TYPE_BAR = 'bar'\nexport const TYPE_STACKED_BAR = 'stackedbar'\nexport const TYPE_HORIZONTAL_BAR = 'horizontalbar'\nexport const TYPE_HORIZONTAL_STACKED_BAR = 'horizontalstackedbar'\nexport const TYPE_LINE = 'line'\nexport const TYPE_RADAR = 'radar'\nexport const TYPE_FUNNEL = 'funnel'\nexport const TYPE_HORIZONTAL_FUNNEL = 'horizontalfunnel'\nexport const TYPE_BUMP = 'bump'\nexport const TYPE_AREA_BUMP = 'areabump'\nexport const TYPE_CHORD = 'chord'\nexport const TYPE_BUBBLE = 'bubble'\nexport const TYPE_CALENDAR = 'calendar'\nexport const TYPE_HEAT_MAP = 'heatmap'\nexport const TYPE_NETWORK = 'network'\nexport const TYPE_SANKEY = 'sankey'\nexport const TYPE_VERTICAL_SANKEY = 'verticalsankey'\nexport const TYPE_SCATTER_PLOT = 'scatterplot'\nexport const TYPE_STREAM = 'stream'\n\nconst barExampleQuery = `MATCH (m:Movie)-[:IN_GENRE]->(g)\\nWHERE\\n    m.release_date.year > 2010\\nRETURN m.release_date.year AS index,\\n    g.name AS key,\\n    count(*) AS value\\nORDER BY index DESC LIMIT 20`\nconst barPreviewQuery = `UNWIND [[2012, \"(no genres listed)\", 1], [2012, \"Action\", 51], [2012, \"Adventure\", 24], [2012, \"Animation\", 20], [2012, \"Children\", 7], [2012, \"Comedy\", 77], [2012, \"Crime\", 27], [2012, \"Documentary\", 27], [2012, \"Drama\", 86], [2012, \"Fantasy\", 17], [2012, \"Film-Noir\", 1], [2012, \"Horror\", 21], [2012, \"IMAX\", 22], [2012, \"Musical\", 10], [2012, \"Mystery\", 5], [2012, \"Romance\", 25], [2012, \"Sci-Fi\", 25], [2012, \"Thriller\", 48], [2012, \"War\", 2], [2012, \"Western\", 1], [2013, \"(no genres listed)\", 1], [2013, \"Action\", 49], [2013, \"Adventure\", 32], [2013, \"Animation\", 13], [2013, \"Children\", 7], [2013, \"Comedy\", 70], [2013, \"Crime\", 30], [2013, \"Documentary\", 21], [2013, \"Drama\", 99], [2013, \"Fantasy\", 22], [2013, \"Film-Noir\", 1], [2013, \"Horror\", 12], [2013, \"IMAX\", 26], [2013, \"Musical\", 2], [2013, \"Mystery\", 10], [2013, \"Romance\", 23], [2013, \"Sci-Fi\", 18], [2013, \"Thriller\", 37], [2013, \"War\", 2], [2013, \"Western\", 1], [2014, \"Action\", 52], [2014, \"Adventure\", 27], [2014, \"Animation\", 14], [2014, \"Children\", 10], [2014, \"Comedy\", 89], [2014, \"Crime\", 28], [2014, \"Documentary\", 18], [2014, \"Drama\", 109], [2014, \"Fantasy\", 14], [2014, \"Horror\", 18], [2014, \"IMAX\", 15], [2014, \"Musical\", 2], [2014, \"Mystery\", 11], [2014, \"Romance\", 33], [2014, \"Sci-Fi\", 25], [2014, \"Thriller\", 42], [2014, \"War\", 8], [2014, \"Western\", 1], [2015, \"(no genres listed)\", 6], [2015, \"Action\", 45], [2015, \"Adventure\", 31], [2015, \"Animation\", 7], [2015, \"Children\", 11], [2015, \"Comedy\", 71], [2015, \"Crime\", 23], [2015, \"Documentary\", 17], [2015, \"Drama\", 83], [2015, \"Fantasy\", 12], [2015, \"Horror\", 22], [2015, \"IMAX\", 1], [2015, \"Mystery\", 11], [2015, \"Romance\", 15], [2015, \"Sci-Fi\", 25], [2015, \"Thriller\", 51], [2015, \"War\", 3], [2015, \"Western\", 3], [2016, \"(no genres listed)\", 3], [2016, \"Action\", 22], [2016, \"Adventure\", 18], [2016, \"Animation\", 7], [2016, \"Children\", 2], [2016, \"Comedy\", 20], [2016, \"Crime\", 3], [2016, \"Documentary\", 5], [2016, \"Drama\", 17], [2016, \"Fantasy\", 8], [2016, \"Horror\", 10], [2016, \"Musical\", 1], [2016, \"Mystery\", 3], [2016, \"Romance\", 7], [2016, \"Sci-Fi\", 13], [2016, \"Thriller\", 14], [2016, \"Western\", 1]] AS row RETURN row[0] as index, row[1] as key, row[2] as value`\n\nexport const reportTypes = [\n    {\n        key: TYPE_METRIC,\n        value: TYPE_METRIC, text: 'Metric',\n        hint: 'A Metric Report looks for a `count` key on the first row',\n        exampleQuery: 'MATCH (n) RETURN count(n) AS count',\n        previewQuery: 'RETURN 1234',\n        component: MetricReport,\n    },\n    {\n        key: TYPE_TABLE,\n        value: TYPE_TABLE,\n        text: 'Table',\n        hint: 'You can return any type of data in a Table report',\n        component: MetricTable,\n        exampleQuery: `MATCH (m:Movie)\\nRETURN\\n  m.title AS title,\\n  m.budget AS budget`,\n        previewQuery: 'UNWIND [[\"Toy Story\", 30000000],[\"Jumanji\", 65000000],[\"Waiting to Exhale\", 16000000],[\"Heat\", 60000000]] AS row RETURN row[0] AS title, row[1] AS budget',\n    },\n    {\n        key: TYPE_BAR,\n        value: TYPE_BAR,\n        text: 'Bar Chart',\n        hint: 'A Bar chart expects three keys: the `index` which represents the data series, the `key` which represents the X axis and a numerical `value` which is plotted on the Y axis.',\n        component: BarReport,\n        exampleQuery: barExampleQuery,\n        previewQuery: barPreviewQuery,\n    },\n    {\n        key: TYPE_STACKED_BAR,\n        value: TYPE_STACKED_BAR,\n        text: 'Stacked Bar Chart',\n        hint: 'A Stacked Bar chart expects three keys: the `index` which represents the data series, the `key` which represents the X axis and a numerical `value` which is plotted on the Y axis.  These items are stacked on top of each other.',\n        component: BarReport,\n        props: { stacked: true, },\n        exampleQuery: barExampleQuery,\n        previewQuery: barPreviewQuery,\n    },\n    {\n        key: TYPE_HORIZONTAL_BAR,\n        value: TYPE_HORIZONTAL_BAR,\n        text: 'Horizontal Bar Chart',\n        hint: 'A Horizontal Bar chart expects three keys: the `index` which represents the data series, the `key` which represents the X axis and a numerical `value` which is plotted on the Y axis.',\n        component: BarReport,\n        props: { layout: 'horizontal' },\n        exampleQuery: barExampleQuery,\n        previewQuery: barPreviewQuery,\n    },\n    {\n        key: TYPE_HORIZONTAL_STACKED_BAR,\n        value: TYPE_HORIZONTAL_STACKED_BAR,\n        text: 'Horizontal Stacked Bar Chart',\n        hint: 'A Stacked Horizontal Bar chart expects three keys: the `index` which represents the data series, the `key` which represents the X axis and a numerical `value` which is plotted on the Y axis.  These items are stacked next to each other.',\n        component: BarReport,\n        props: { stacked: true, layout: 'horizontal' },\n        exampleQuery: barExampleQuery,\n        previewQuery: barPreviewQuery,\n    },\n    {\n        key: TYPE_LINE,\n        value: TYPE_LINE,\n        text: 'Line Chart',\n        hint: 'A Line chart takes the first item returned as the key and plots all other data points on the chart.  Remember to order your results by date.',\n        component: LineReport,\n        // exampleQuery: barExampleQuery,\n        previewQuery: `UNWIND [[2012,\t100,\t24,\t20],[2013,\t49,\t32,\t13],[2014,\t52,\t27,\t14],[2015,\t45,\t31,\t7],[2016,\t22,\t18,\t7]] AS row RETURN row[0] AS index,  row[1] as Action, row[2] as Adventure, row[3] as Animation`,\n    },\n    {\n        key: TYPE_RADAR,\n        value: TYPE_RADAR,\n        text: 'Radar Chart',\n        hint: 'A Radar chart takes the first item returned as the key and plots all other data points on the chart.',\n        component: RadarReport,\n        previewQuery: 'UNWIND [{taste: \"fruity\",chardonay: 79,carmenere: 80,syrah: 61},{taste: \"bitter\",chardonay: 70,carmenere: 60,syrah: 89},{taste: \"heavy\",chardonay: 66,carmenere: 53,syrah: 108},{taste: \"strong\",chardonay: 22,carmenere: 34,syrah: 28},{taste: \"sunny\",chardonay: 20,carmenere: 52,syrah: 108}] AS row UNWIND keys(row) AS key WITH * WHERE key <> \"taste\" RETURN row.taste AS index, key, row[key] AS value',\n    },\n    {\n        key: TYPE_FUNNEL,\n        value: TYPE_FUNNEL,\n        text: 'Funnel Chart',\n        hint: 'A Funnel chart expects rows with three keys: `id`, `value` and `label`',\n        component: FunnelReport,\n        previewQuery: 'UNWIND [{id: \"step_sent\",value: 60491,label: \"Sent\"},{id: \"step_viewed\",value: 46510,label: \"Viewed\"},{id: \"step_clicked\",value: 41687,label: \"Clicked\"},{id: \"step_add_to_card\",value: 34541,label: \"Add To Card\"},{id: \"step_purchased\",value: 26351,label: \"Purchased\"}] AS row RETURN row.id AS id, row.value AS value, row.label AS label',\n    },\n    {\n        key: TYPE_HORIZONTAL_FUNNEL,\n        value: TYPE_HORIZONTAL_FUNNEL,\n        text: 'Horizontal Funnel Chart', hint: 'A Funnel chart expects rows with three keys: `id`, `value` and `label`',\n        component: FunnelReport,\n        props: {\n            layout: 'horizontal'\n        },\n        previewQuery: 'UNWIND [{id: \"step_sent\",value: 60491,label: \"Sent\"},{id: \"step_viewed\",value: 46510,label: \"Viewed\"},{id: \"step_clicked\",value: 41687,label: \"Clicked\"},{id: \"step_add_to_card\",value: 34541,label: \"Add To Card\"},{id: \"step_purchased\",value: 26351,label: \"Purchased\"}] AS row RETURN row.id AS id, row.value AS value, row.label AS label',\n    },\n    {\n        key: TYPE_BUMP,\n        value: TYPE_BUMP,\n        text: 'Bump Chart',\n        hint: 'A Bump chart expects rows with three keys: `id`, `x` and `y`',\n        component: BumpReport,\n        previewQuery: 'UNWIND[{id:\"Serie1\",data:[{x:2000,y:12},{x:2001,y:3},{x:2002,y:1},{x:2003,y:12},{x:2004,y:12}]},{id:\"Serie2\",data:[{x:2000,y:8},{x:2001,y:9},{x:2002,y:8},{x:2003,y:5},{x:2004,y:1}]},{id:\"Serie3\",data:[{x:2000,y:9},{x:2001,y:10},{x:2002,y:9},{x:2003,y:8},{x:2004,y:7}]},{id:\"Serie4\",data:[{x:2000,y:5},{x:2001,y:12},{x:2002,y:11},{x:2003,y:11},{x:2004,y:3}]},{id:\"Serie5\",data:[{x:2000,y:11},{x:2001,y:8},{x:2002,y:3},{x:2003,y:4},{x:2004,y:11}]},{id:\"Serie6\",data:[{x:2000,y:2},{x:2001,y:11},{x:2002,y:12},{x:2003,y:6},{x:2004,y:4}]},{id:\"Serie7\",data:[{x:2000,y:10},{x:2001,y:7},{x:2002,y:7},{x:2003,y:10},{x:2004,y:8}]},{id:\"Serie8\",data:[{x:2000,y:7},{x:2001,y:5},{x:2002,y:2},{x:2003,y:7},{x:2004,y:6}]},{id:\"Serie9\",data:[{x:2000,y:1},{x:2001,y:1},{x:2002,y:4},{x:2003,y:9},{x:2004,y:5}]},{id:\"Serie10\",data:[{x:2000,y:3},{x:2001,y:4},{x:2002,y:5},{x:2003,y:1},{x:2004,y:9}]},{id:\"Serie11\",data:[{x:2000,y:6},{x:2001,y:6},{x:2002,y:10},{x:2003,y:2},{x:2004,y:10}]},{id:\"Serie12\",data:[{x:2000,y:4},{x:2001,y:2},{x:2002,y:6},{x:2003,y:3},{x:2004,y:2}]}] AS row UNWIND row.data as d RETURN row.id AS id,d.x AS x,d.y AS y'\n    },\n    {\n        key: TYPE_AREA_BUMP,\n        value: TYPE_AREA_BUMP,\n        text: 'Area Bump Chart',\n        hint: 'An Area Bump chart expects rows with three keys: `id`, `x` and `y`',\n        component: AreaBumpReport,\n        previewQuery: 'UNWIND[{id:\"Serie1\",data:[{x:2000,y:12},{x:2001,y:3},{x:2002,y:1},{x:2003,y:12},{x:2004,y:12}]},{id:\"Serie2\",data:[{x:2000,y:8},{x:2001,y:9},{x:2002,y:8},{x:2003,y:5},{x:2004,y:1}]},{id:\"Serie3\",data:[{x:2000,y:9},{x:2001,y:10},{x:2002,y:9},{x:2003,y:8},{x:2004,y:7}]},{id:\"Serie4\",data:[{x:2000,y:5},{x:2001,y:12},{x:2002,y:11},{x:2003,y:11},{x:2004,y:3}]},{id:\"Serie5\",data:[{x:2000,y:11},{x:2001,y:8},{x:2002,y:3},{x:2003,y:4},{x:2004,y:11}]},{id:\"Serie6\",data:[{x:2000,y:2},{x:2001,y:11},{x:2002,y:12},{x:2003,y:6},{x:2004,y:4}]},{id:\"Serie7\",data:[{x:2000,y:10},{x:2001,y:7},{x:2002,y:7},{x:2003,y:10},{x:2004,y:8}]},{id:\"Serie8\",data:[{x:2000,y:7},{x:2001,y:5},{x:2002,y:2},{x:2003,y:7},{x:2004,y:6}]},{id:\"Serie9\",data:[{x:2000,y:1},{x:2001,y:1},{x:2002,y:4},{x:2003,y:9},{x:2004,y:5}]},{id:\"Serie10\",data:[{x:2000,y:3},{x:2001,y:4},{x:2002,y:5},{x:2003,y:1},{x:2004,y:9}]},{id:\"Serie11\",data:[{x:2000,y:6},{x:2001,y:6},{x:2002,y:10},{x:2003,y:2},{x:2004,y:10}]},{id:\"Serie12\",data:[{x:2000,y:4},{x:2001,y:2},{x:2002,y:6},{x:2003,y:3},{x:2004,y:2}]}] AS row UNWIND row.data as d RETURN row.id AS id,d.x AS x,d.y AS y'\n    },\n    {\n        key: TYPE_CHORD,\n        value: TYPE_CHORD,\n        text: 'Chord Chart',\n        hint: 'A Chord chart expects rows with three keys: `from`, `to` and `value`',\n        component: ChordReport,\n        previewQuery: 'WITH [[338,1453,340,681,358],[283,92,1803,297,436],[170,132,1461,227,257],[500,217,186,84,435],[708,227,183,461,20]] AS rows UNWIND range(0,size(rows)-1) AS from WITH from,rows[from] AS row UNWIND range(0,size(row)-1) AS to RETURN from,to,row[to] AS value'\n    },\n    {\n        key: TYPE_BUBBLE,\n        value: TYPE_BUBBLE,\n        text: 'Bubble Chart',\n        hint: 'A Bubble chart expects rows with three keys: `from`, `to` and `value`',\n        component: BubbleReport,\n        previewQuery: `UNWIND [\n            { from: 'Adam', to: 'Kane', value: 1 },\n            { from: 'Adam', to: 'Abel' },\n            { from: 'Kane', to: 'Enoch' },\n            { from: 'Enoch', to: 'Lemech' },\n            { from: 'Enoch', to: 'Ada' },\n            { from: 'Enoch', to: 'Tzila' },\n            { from: 'Adam', to: 'Seth' },\n            { from: 'Seth', to: 'Enosh' },\n            { from: 'Enosh', to: 'All Humanity' }\n\n           ] AS row\n           RETURN row.from AS from, row.to AS to, row.value AS value`,\n    },\n    {\n        key: TYPE_CALENDAR,\n        value: TYPE_CALENDAR,\n        text: 'Calendar Chart',\n        hint: 'A Calendar chart expects rows with two columns: `date` (which should be a string representing a date, date, datetime or localdatetime) and `value` (a number)',\n        component: CalendarReport,\n        previewQuery: `\n            UNWIND [{day:date(\"2017-01-27\"),value:256},{day:date(\"2018-08-10\"),value:90},{day:date(\"2017-11-24\"),value:259},{day:date(\"2016-01-04\"),value:281},{day:date(\"2017-03-06\"),value:156},{day:date(\"2017-07-26\"),value:341},{day:date(\"2016-06-13\"),value:101},{day:date(\"2017-07-20\"),value:58},{day:date(\"2017-06-24\"),value:216},{day:date(\"2015-07-08\"),value:63},{day:date(\"2016-07-13\"),value:21},{day:date(\"2017-09-27\"),value:41},{day:date(\"2015-06-19\"),value:356},{day:date(\"2017-11-02\"),value:47},{day:date(\"2015-04-22\"),value:101},{day:date(\"2017-10-29\"),value:390},{day:date(\"2018-03-03\"),value:139},{day:date(\"2018-06-14\"),value:352},{day:date(\"2017-12-18\"),value:87},{day:date(\"2018-03-11\"),value:72},{day:date(\"2018-03-29\"),value:359},{day:date(\"2015-06-03\"),value:144},{day:date(\"2016-01-20\"),value:145},{day:date(\"2015-12-28\"),value:222},{day:date(\"2015-09-07\"),value:277},{day:date(\"2015-12-29\"),value:321},{day:date(\"2017-01-15\"),value:20},{day:date(\"2018-04-27\"),value:382},{day:date(\"2017-08-28\"),value:254},{day:date(\"2018-03-12\"),value:337},{day:date(\"2015-05-03\"),value:338},{day:date(\"2015-07-04\"),value:95},{day:date(\"2015-12-13\"),value:388},{day:date(\"2016-04-08\"),value:289},{day:date(\"2016-11-06\"),value:310},{day:date(\"2017-06-12\"),value:124},{day:date(\"2017-11-03\"),value:220},{day:date(\"2015-05-19\"),value:52},{day:date(\"2015-09-29\"),value:206},{day:date(\"2018-01-26\"),value:315},{day:date(\"2018-06-23\"),value:213},{day:date(\"2015-11-03\"),value:19},{day:date(\"2017-01-03\"),value:187},{day:date(\"2018-07-18\"),value:35},{day:date(\"2015-06-11\"),value:149},{day:date(\"2016-12-14\"),value:398},{day:date(\"2017-03-20\"),value:48},{day:date(\"2016-11-25\"),value:317},{day:date(\"2015-07-23\"),value:331},{day:date(\"2016-04-12\"),value:196},{day:date(\"2018-05-05\"),value:40},{day:date(\"2017-05-17\"),value:224},{day:date(\"2018-02-05\"),value:286},{day:date(\"2015-06-12\"),value:79},{day:date(\"2017-01-06\"),value:7},{day:date(\"2016-11-10\"),value:96},{day:date(\"2017-10-06\"),value:374},{day:date(\"2015-06-02\"),value:60},{day:date(\"2015-04-02\"),value:98},{day:date(\"2018-03-27\"),value:9},{day:date(\"2018-01-06\"),value:187},{day:date(\"2016-01-17\"),value:328},{day:date(\"2017-05-27\"),value:233},{day:date(\"2017-11-13\"),value:15},{day:date(\"2015-11-12\"),value:29},{day:date(\"2016-07-11\"),value:57},{day:date(\"2017-02-27\"),value:162},{day:date(\"2016-04-07\"),value:312},{day:date(\"2015-08-07\"),value:397},{day:date(\"2015-10-23\"),value:267},{day:date(\"2018-05-03\"),value:166},{day:date(\"2016-03-28\"),value:280},{day:date(\"2018-02-19\"),value:282},{day:date(\"2015-07-31\"),value:142},{day:date(\"2015-07-06\"),value:234},{day:date(\"2018-07-06\"),value:115},{day:date(\"2018-05-27\"),value:60},{day:date(\"2016-11-27\"),value:125},{day:date(\"2018-02-06\"),value:72},{day:date(\"2017-04-08\"),value:392},{day:date(\"2017-07-27\"),value:372},{day:date(\"2017-05-21\"),value:147},{day:date(\"2017-08-19\"),value:356},{day:date(\"2017-09-05\"),value:130},{day:date(\"2016-10-22\"),value:66},{day:date(\"2018-05-19\"),value:121},{day:date(\"2016-12-05\"),value:385},{day:date(\"2017-04-23\"),value:332},{day:date(\"2016-08-25\"),value:266},{day:date(\"2018-04-07\"),value:198},{day:date(\"2016-02-26\"),value:388},{day:date(\"2018-01-12\"),value:66},{day:date(\"2015-12-26\"),value:363},{day:date(\"2015-04-13\"),value:72},{day:date(\"2016-08-23\"),value:279},{day:date(\"2016-02-28\"),value:276},{day:date(\"2015-08-12\"),value:275},{day:date(\"2016-04-18\"),value:115},{day:date(\"2017-02-12\"),value:337},{day:date(\"2017-07-03\"),value:6},{day:date(\"2015-08-29\"),value:100},{day:date(\"2017-11-20\"),value:44},{day:date(\"2017-10-28\"),value:279},{day:date(\"2016-01-24\"),value:103},{day:date(\"2018-08-11\"),value:71},{day:date(\"2015-12-31\"),value:329},{day:date(\"2016-08-27\"),value:345},{day:date(\"2018-07-14\"),value:381},{day:date(\"2016-03-02\"),value:382},{day:date(\"2018-02-18\"),value:258},{day:date(\"2017-06-29\"),value:302},{day:date(\"2015-06-21\"),value:192},{day:date(\"2015-07-12\"),value:141},{day:date(\"2018-04-25\"),value:2},{day:date(\"2016-02-03\"),value:8},{day:date(\"2015-06-30\"),value:297},{day:date(\"2015-07-29\"),value:383},{day:date(\"2015-04-11\"),value:26},{day:date(\"2017-10-15\"),value:187},{day:date(\"2017-11-04\"),value:176},{day:date(\"2015-09-25\"),value:351},{day:date(\"2016-07-21\"),value:126},{day:date(\"2015-12-01\"),value:147},{day:date(\"2015-05-16\"),value:142},{day:date(\"2016-10-07\"),value:325},{day:date(\"2017-03-02\"),value:323},{day:date(\"2017-03-01\"),value:334},{day:date(\"2017-07-29\"),value:53},{day:date(\"2018-07-17\"),value:231},{day:date(\"2015-04-19\"),value:343},{day:date(\"2017-04-27\"),value:9},{day:date(\"2017-06-22\"),value:323},{day:date(\"2016-05-12\"),value:316},{day:date(\"2015-08-03\"),value:296},{day:date(\"2017-08-01\"),value:365},{day:date(\"2015-10-10\"),value:152},{day:date(\"2016-07-30\"),value:399},{day:date(\"2017-08-05\"),value:130},{day:date(\"2015-10-14\"),value:294},{day:date(\"2016-08-08\"),value:362},{day:date(\"2018-03-30\"),value:296},{day:date(\"2015-08-06\"),value:96},{day:date(\"2015-11-05\"),value:38},{day:date(\"2015-07-27\"),value:80},{day:date(\"2016-06-03\"),value:250},{day:date(\"2016-04-20\"),value:299},{day:date(\"2018-04-12\"),value:185},{day:date(\"2016-08-15\"),value:268},{day:date(\"2016-10-18\"),value:45},{day:date(\"2016-12-27\"),value:242},{day:date(\"2017-09-22\"),value:315},{day:date(\"2017-12-04\"),value:220},{day:date(\"2016-03-01\"),value:331},{day:date(\"2018-03-20\"),value:2},{day:date(\"2016-08-05\"),value:258},{day:date(\"2016-04-28\"),value:213},{day:date(\"2017-10-30\"),value:18},{day:date(\"2017-07-31\"),value:393},{day:date(\"2017-03-23\"),value:71},{day:date(\"2017-01-04\"),value:161},{day:date(\"2018-05-23\"),value:39},{day:date(\"2015-08-16\"),value:394},{day:date(\"2016-01-19\"),value:200},{day:date(\"2018-03-01\"),value:115},{day:date(\"2016-12-29\"),value:191},{day:date(\"2015-07-22\"),value:228},{day:date(\"2015-11-18\"),value:310},{day:date(\"2017-02-23\"),value:0},{day:date(\"2015-10-29\"),value:157},{day:date(\"2018-04-20\"),value:295},{day:date(\"2018-06-26\"),value:343},{day:date(\"2017-05-23\"),value:35},{day:date(\"2015-09-20\"),value:120},{day:date(\"2016-08-19\"),value:91},{day:date(\"2017-10-05\"),value:303},{day:date(\"2018-06-08\"),value:178},{day:date(\"2016-12-07\"),value:232},{day:date(\"2018-01-28\"),value:275},{day:date(\"2015-05-24\"),value:355},{day:date(\"2017-11-10\"),value:373},{day:date(\"2016-10-02\"),value:291},{day:date(\"2015-09-03\"),value:244},{day:date(\"2016-03-08\"),value:11},{day:date(\"2016-04-29\"),value:32},{day:date(\"2016-08-18\"),value:292},{day:date(\"2016-07-15\"),value:42},{day:date(\"2017-10-03\"),value:138},{day:date(\"2015-10-07\"),value:232},{day:date(\"2017-05-15\"),value:301},{day:date(\"2015-05-20\"),value:126},{day:date(\"2015-10-02\"),value:178},{day:date(\"2017-12-27\"),value:367},{day:date(\"2016-02-27\"),value:159},{day:date(\"2016-09-22\"),value:58},{day:date(\"2017-10-11\"),value:302},{day:date(\"2016-06-01\"),value:248},{day:date(\"2017-11-23\"),value:160},{day:date(\"2016-06-25\"),value:50},{day:date(\"2016-10-15\"),value:48},{day:date(\"2015-07-28\"),value:40},{day:date(\"2016-09-11\"),value:237},{day:date(\"2016-02-25\"),value:342},{day:date(\"2017-11-29\"),value:149},{day:date(\"2018-03-16\"),value:335},{day:date(\"2018-01-24\"),value:125},{day:date(\"2017-02-16\"),value:259},{day:date(\"2018-06-04\"),value:92},{day:date(\"2015-12-27\"),value:293},{day:date(\"2017-05-28\"),value:271},{day:date(\"2018-03-18\"),value:126},{day:date(\"2016-05-08\"),value:79},{day:date(\"2016-11-28\"),value:263},{day:date(\"2018-07-28\"),value:190},{day:date(\"2017-06-02\"),value:340},{day:date(\"2015-06-23\"),value:86},{day:date(\"2016-10-29\"),value:65},{day:date(\"2016-01-03\"),value:327},{day:date(\"2016-03-29\"),value:13},{day:date(\"2015-04-27\"),value:156},{day:date(\"2018-05-08\"),value:105},{day:date(\"2018-07-05\"),value:381},{day:date(\"2015-07-01\"),value:318},{day:date(\"2015-06-06\"),value:339},{day:date(\"2017-05-12\"),value:128},{day:date(\"2017-04-21\"),value:12},{day:date(\"2015-12-20\"),value:383},{day:date(\"2016-01-14\"),value:284},{day:date(\"2017-01-01\"),value:68},{day:date(\"2017-07-24\"),value:207},{day:date(\"2016-06-15\"),value:19},{day:date(\"2018-05-21\"),value:323},{day:date(\"2017-12-26\"),value:352},{day:date(\"2018-05-24\"),value:89},{day:date(\"2016-07-14\"),value:244},{day:date(\"2018-08-06\"),value:304},{day:date(\"2015-06-10\"),value:8},{day:date(\"2016-06-10\"),value:194},{day:date(\"2016-05-19\"),value:126},{day:date(\"2018-01-07\"),value:322},{day:date(\"2017-02-11\"),value:366},{day:date(\"2018-05-18\"),value:263},{day:date(\"2018-07-27\"),value:194},{day:date(\"2015-11-04\"),value:352},{day:date(\"2018-03-25\"),value:239},{day:date(\"2015-04-18\"),value:96},{day:date(\"2015-11-13\"),value:372},{day:date(\"2015-09-26\"),value:77},{day:date(\"2016-07-10\"),value:97},{day:date(\"2015-12-03\"),value:208},{day:date(\"2017-02-22\"),value:322},{day:date(\"2017-07-02\"),value:295},{day:date(\"2017-11-01\"),value:217},{day:date(\"2017-11-25\"),value:396},{day:date(\"2017-05-09\"),value:255},{day:date(\"2016-02-04\"),value:111},{day:date(\"2017-04-26\"),value:255},{day:date(\"2015-08-08\"),value:38},{day:date(\"2018-06-03\"),value:226},{day:date(\"2016-08-07\"),value:165},{day:date(\"2016-08-22\"),value:21},{day:date(\"2017-12-02\"),value:130},{day:date(\"2016-07-06\"),value:39},{day:date(\"2016-02-13\"),value:354},{day:date(\"2017-09-23\"),value:65},{day:date(\"2018-06-07\"),value:331},{day:date(\"2015-12-10\"),value:33},{day:date(\"2017-05-20\"),value:171},{day:date(\"2018-01-20\"),value:250},{day:date(\"2018-01-01\"),value:337},{day:date(\"2017-11-09\"),value:38},{day:date(\"2017-03-14\"),value:298},{day:date(\"2017-06-26\"),value:319},{day:date(\"2016-01-01\"),value:259},{day:date(\"2016-04-06\"),value:16},{day:date(\"2016-05-29\"),value:105},{day:date(\"2016-12-06\"),value:239},{day:date(\"2016-05-05\"),value:131},{day:date(\"2016-12-26\"),value:139},{day:date(\"2016-04-05\"),value:278},{day:date(\"2018-06-12\"),value:196},{day:date(\"2016-03-11\"),value:386},{day:date(\"2017-01-28\"),value:343},{day:date(\"2015-07-03\"),value:278},{day:date(\"2017-02-26\"),value:180},{day:date(\"2016-02-24\"),value:58},{day:date(\"2016-09-24\"),value:312},{day:date(\"2017-05-03\"),value:22},{day:date(\"2017-07-21\"),value:40},{day:date(\"2016-11-08\"),value:116},{day:date(\"2017-11-22\"),value:1},{day:date(\"2016-02-09\"),value:208},{day:date(\"2015-08-23\"),value:109},{day:date(\"2018-06-17\"),value:162},{day:date(\"2017-01-17\"),value:312},{day:date(\"2015-10-22\"),value:51},{day:date(\"2016-12-04\"),value:74},{day:date(\"2015-11-21\"),value:25},{day:date(\"2017-07-30\"),value:192},{day:date(\"2016-05-17\"),value:141},{day:date(\"2016-10-12\"),value:324},{day:date(\"2017-05-06\"),value:342},{day:date(\"2017-08-27\"),value:266},{day:date(\"2015-12-18\"),value:354},{day:date(\"2016-10-16\"),value:98},{day:date(\"2017-08-09\"),value:229},{day:date(\"2016-10-14\"),value:2},{day:date(\"2015-07-13\"),value:199},{day:date(\"2015-04-03\"),value:362},{day:date(\"2017-02-24\"),value:394},{day:date(\"2015-07-05\"),value:335},{day:date(\"2016-01-05\"),value:131},{day:date(\"2017-11-27\"),value:331},{day:date(\"2018-05-30\"),value:137},{day:date(\"2018-04-04\"),value:58},{day:date(\"2016-02-22\"),value:362},{day:date(\"2017-06-08\"),value:262},{day:date(\"2015-04-07\"),value:235},{day:date(\"2017-05-13\"),value:252},{day:date(\"2015-11-09\"),value:263},{day:date(\"2018-02-09\"),value:145},{day:date(\"2016-05-01\"),value:112},{day:date(\"2015-08-20\"),value:59},{day:date(\"2017-10-12\"),value:115},{day:date(\"2017-01-13\"),value:129},{day:date(\"2018-03-23\"),value:297},{day:date(\"2015-12-23\"),value:77},{day:date(\"2018-07-07\"),value:39},{day:date(\"2015-08-10\"),value:368},{day:date(\"2016-05-26\"),value:272},{day:date(\"2016-04-02\"),value:8},{day:date(\"2015-08-13\"),value:163},{day:date(\"2015-06-04\"),value:265},{day:date(\"2016-11-17\"),value:332},{day:date(\"2018-08-05\"),value:255},{day:date(\"2017-02-03\"),value:269},{day:date(\"2016-09-15\"),value:107},{day:date(\"2018-02-16\"),value:385},{day:date(\"2018-05-20\"),value:113},{day:date(\"2015-10-17\"),value:44},{day:date(\"2016-07-18\"),value:335},{day:date(\"2018-04-15\"),value:153},{day:date(\"2016-06-06\"),value:1},{day:date(\"2015-05-30\"),value:213},{day:date(\"2016-08-01\"),value:128},{day:date(\"2016-04-09\"),value:112},{day:date(\"2018-08-07\"),value:95},{day:date(\"2017-02-08\"),value:368},{day:date(\"2017-07-12\"),value:216},{day:date(\"2015-05-12\"),value:113},{day:date(\"2018-04-26\"),value:321},{day:date(\"2017-02-14\"),value:5},{day:date(\"2015-04-08\"),value:82},{day:date(\"2018-06-02\"),value:219},{day:date(\"2016-08-03\"),value:288},{day:date(\"2016-03-20\"),value:374},{day:date(\"2016-02-02\"),value:79},{day:date(\"2016-06-26\"),value:91},{day:date(\"2015-09-09\"),value:155},{day:date(\"2017-02-04\"),value:55},{day:date(\"2017-04-20\"),value:256},{day:date(\"2018-03-06\"),value:22},{day:date(\"2015-09-27\"),value:161},{day:date(\"2016-03-27\"),value:123},{day:date(\"2017-11-06\"),value:30},{day:date(\"2017-02-05\"),value:49},{day:date(\"2015-06-27\"),value:111},{day:date(\"2018-05-14\"),value:250},{day:date(\"2017-05-14\"),value:181},{day:date(\"2017-07-07\"),value:25},{day:date(\"2016-09-18\"),value:178},{day:date(\"2016-02-11\"),value:237},{day:date(\"2018-02-24\"),value:269},{day:date(\"2018-04-30\"),value:11},{day:date(\"2016-07-01\"),value:194},{day:date(\"2016-08-20\"),value:151},{day:date(\"2016-06-04\"),value:210},{day:date(\"2017-08-08\"),value:105},{day:date(\"2016-04-24\"),value:359},{day:date(\"2015-06-09\"),value:203},{day:date(\"2015-04-20\"),value:12},{day:date(\"2018-03-21\"),value:41},{day:date(\"2016-10-17\"),value:375},{day:date(\"2015-04-25\"),value:361},{day:date(\"2017-04-09\"),value:366},{day:date(\"2018-02-02\"),value:243},{day:date(\"2016-07-24\"),value:302},{day:date(\"2017-12-14\"),value:109},{day:date(\"2016-02-14\"),value:196},{day:date(\"2018-07-21\"),value:270},{day:date(\"2017-12-21\"),value:109},{day:date(\"2016-01-11\"),value:369},{day:date(\"2016-06-08\"),value:360},{day:date(\"2018-04-06\"),value:202},{day:date(\"2016-01-18\"),value:182},{day:date(\"2017-04-14\"),value:231},{day:date(\"2017-09-13\"),value:387},{day:date(\"2017-01-26\"),value:301},{day:date(\"2016-11-26\"),value:297},{day:date(\"2015-05-26\"),value:95},{day:date(\"2017-09-17\"),value:54},{day:date(\"2017-04-30\"),value:46},{day:date(\"2018-07-20\"),value:43},{day:date(\"2018-05-13\"),value:356},{day:date(\"2015-12-14\"),value:27},{day:date(\"2017-04-17\"),value:68},{day:date(\"2015-09-04\"),value:295},{day:date(\"2018-01-31\"),value:209},{day:date(\"2016-01-31\"),value:48},{day:date(\"2018-04-22\"),value:232},{day:date(\"2017-09-18\"),value:44},{day:date(\"2017-06-16\"),value:92},{day:date(\"2018-05-28\"),value:17},{day:date(\"2016-04-21\"),value:250},{day:date(\"2017-11-30\"),value:267},{day:date(\"2016-01-21\"),value:49},{day:date(\"2017-01-10\"),value:3},{day:date(\"2018-07-30\"),value:49},{day:date(\"2017-08-21\"),value:336},{day:date(\"2016-12-24\"),value:37},{day:date(\"2017-12-11\"),value:287},{day:date(\"2017-07-14\"),value:332},{day:date(\"2016-10-13\"),value:138},{day:date(\"2018-04-17\"),value:83},{day:date(\"2017-03-31\"),value:344},{day:date(\"2017-09-24\"),value:112},{day:date(\"2016-06-11\"),value:100},{day:date(\"2018-07-15\"),value:151},{day:date(\"2017-07-17\"),value:89},{day:date(\"2017-08-26\"),value:351},{day:date(\"2018-04-08\"),value:2},{day:date(\"2016-06-27\"),value:228},{day:date(\"2017-04-13\"),value:53},{day:date(\"2017-01-11\"),value:8},{day:date(\"2016-08-17\"),value:366},{day:date(\"2015-12-19\"),value:209},{day:date(\"2018-04-28\"),value:323},{day:date(\"2018-01-10\"),value:42},{day:date(\"2016-04-27\"),value:317},{day:date(\"2016-07-25\"),value:366},{day:date(\"2016-12-15\"),value:36},{day:date(\"2018-06-15\"),value:214},{day:date(\"2016-02-08\"),value:389},{day:date(\"2015-11-16\"),value:373},{day:date(\"2016-12-13\"),value:218},{day:date(\"2017-03-16\"),value:170},{day:date(\"2016-05-21\"),value:134},{day:date(\"2016-03-13\"),value:36},{day:date(\"2018-06-13\"),value:194},{day:date(\"2017-03-19\"),value:140},{day:date(\"2017-05-30\"),value:392},{day:date(\"2017-06-28\"),value:173},{day:date(\"2016-12-20\"),value:96},{day:date(\"2017-07-15\"),value:50},{day:date(\"2016-12-11\"),value:395},{day:date(\"2017-08-20\"),value:252},{day:date(\"2015-07-07\"),value:73},{day:date(\"2018-04-11\"),value:381},{day:date(\"2017-03-07\"),value:194},{day:date(\"2015-08-17\"),value:65},{day:date(\"2017-09-07\"),value:312},{day:date(\"2017-01-09\"),value:288},{day:date(\"2015-05-15\"),value:276},{day:date(\"2017-11-12\"),value:21},{day:date(\"2016-10-10\"),value:171},{day:date(\"2015-05-27\"),value:221},{day:date(\"2016-03-30\"),value:213},{day:date(\"2015-06-18\"),value:92},{day:date(\"2018-02-01\"),value:180},{day:date(\"2017-04-15\"),value:308},{day:date(\"2018-02-12\"),value:378},{day:date(\"2018-06-18\"),value:87},{day:date(\"2016-12-02\"),value:363},{day:date(\"2015-07-10\"),value:169},{day:date(\"2018-07-13\"),value:96},{day:date(\"2018-08-08\"),value:173},{day:date(\"2016-03-12\"),value:69},{day:date(\"2016-04-13\"),value:361},{day:date(\"2015-06-17\"),value:35},{day:date(\"2017-09-30\"),value:176},{day:date(\"2015-07-18\"),value:356},{day:date(\"2017-12-06\"),value:49},{day:date(\"2016-01-15\"),value:116},{day:date(\"2017-11-07\"),value:309},{day:date(\"2016-02-16\"),value:268},{day:date(\"2018-01-13\"),value:218},{day:date(\"2015-10-11\"),value:375},{day:date(\"2017-02-09\"),value:142},{day:date(\"2016-03-25\"),value:261},{day:date(\"2016-12-08\"),value:319},{day:date(\"2016-11-22\"),value:244},{day:date(\"2015-09-02\"),value:193},{day:date(\"2016-03-09\"),value:280},{day:date(\"2017-09-26\"),value:18},{day:date(\"2015-09-19\"),value:303},{day:date(\"2016-07-31\"),value:108},{day:date(\"2016-05-23\"),value:2},{day:date(\"2018-03-10\"),value:33},{day:date(\"2016-09-23\"),value:177},{day:date(\"2016-02-23\"),value:149},{day:date(\"2018-02-17\"),value:36},{day:date(\"2018-01-04\"),value:21},{day:date(\"2017-06-21\"),value:269},{day:date(\"2015-10-30\"),value:360},{day:date(\"2016-03-24\"),value:138},{day:date(\"2017-12-03\"),value:46},{day:date(\"2017-08-30\"),value:47},{day:date(\"2016-10-20\"),value:321},{day:date(\"2016-09-07\"),value:352},{day:date(\"2015-09-21\"),value:162},{day:date(\"2015-11-29\"),value:122},{day:date(\"2016-10-19\"),value:305},{day:date(\"2017-06-11\"),value:64},{day:date(\"2018-02-11\"),value:314},{day:date(\"2015-11-28\"),value:398},{day:date(\"2016-10-09\"),value:21},{day:date(\"2015-10-16\"),value:364},{day:date(\"2015-12-06\"),value:144},{day:date(\"2017-06-23\"),value:222},{day:date(\"2017-08-18\"),value:160},{day:date(\"2017-11-17\"),value:2},{day:date(\"2016-01-06\"),value:154},{day:date(\"2017-01-31\"),value:189},{day:date(\"2015-10-05\"),value:66},{day:date(\"2018-05-29\"),value:176},{day:date(\"2016-08-29\"),value:220},{day:date(\"2017-02-18\"),value:46},{day:date(\"2015-11-24\"),value:378},{day:date(\"2015-07-09\"),value:40},{day:date(\"2018-07-02\"),value:60},{day:date(\"2016-08-26\"),value:387},{day:date(\"2016-10-25\"),value:72},{day:date(\"2017-06-03\"),value:164},{day:date(\"2016-11-14\"),value:243},{day:date(\"2017-03-24\"),value:192},{day:date(\"2016-12-01\"),value:178},{day:date(\"2016-03-10\"),value:166},{day:date(\"2015-07-26\"),value:167},{day:date(\"2015-09-22\"),value:149},{day:date(\"2015-08-21\"),value:368},{day:date(\"2015-09-13\"),value:23},{day:date(\"2015-04-21\"),value:19},{day:date(\"2015-11-07\"),value:173},{day:date(\"2017-12-16\"),value:365},{day:date(\"2015-05-10\"),value:387},{day:date(\"2015-08-27\"),value:99},{day:date(\"2016-11-16\"),value:289}] AS row\n            WITH row WHERE row.day > date(\"2018-01-01\")\n            RETURN row.day AS day, row.value AS value`\n    },\n    {\n        key: TYPE_HEAT_MAP,\n        value: TYPE_HEAT_MAP,\n        text: 'Heat Map',\n        hint: 'A Heat Map expects three keys: the `index` which represents the data series, the `key` which represents the X axis and a numerical `value` which is plotted on the Y axis.',\n        component: HeatMap,\n        previewQuery: 'UNWIND [[2016, \"Crime\", 3], [2016, \"Musical\", 1], [2016, \"Adventure\", 18], [2016, \"Animation\", 7], [2016, \"Comedy\", 20], [2016, \"Romance\", 7], [2016, \"Action\", 22], [2016, \"Sci-Fi\", 13], [2016, \"Thriller\", 14], [2016, \"Horror\", 10], [2016, \"Western\", 1], [2016, \"Children\", 2], [2016, \"Mystery\", 3], [2016, \"Drama\", 17], [2016, \"(no genres listed)\", 3], [2016, \"Fantasy\", 8], [2016, \"Documentary\", 5], [2015, \"Western\", 3], [2015, \"Documentary\", 17], [2015, \"Romance\", 15]] AS row RETURN row[0] as index, row[1] as key, row[2] as value'\n    },\n    {\n        key: TYPE_NETWORK,\n        value: TYPE_NETWORK,\n        text: 'Network',\n        hint: 'A Network expects rows with two keys: `from` and `to`.  Optionally you can supply a `color` and `radius`',\n        component: NetworkReport,\n        previewQuery: `\n            UNWIND [\n            { from: 'Adam', to: 'Kane', value: 1 },\n            { from: 'Adam', to: 'Abel' },\n            { from: 'Kane', to: 'Enoch' },\n            { from: 'Enoch', to: 'Lemech' },\n            { from: 'Enoch', to: 'Ada' },\n            { from: 'Enoch', to: 'Tzila' },\n            { from: 'Adam', to: 'Seth' },\n            { from: 'Seth', to: 'Enosh' },\n            { from: 'Enoch', to: 'All Humanity' }\n           ] AS row\n           RETURN row.from AS from, row.to AS to, row.value AS value`,\n    },\n    {\n        key: TYPE_SANKEY,\n        value: TYPE_SANKEY,\n        text: 'Sankey',\n        hint: 'A Sankey report expects rows with three keys: `from` and `to` and `value`.  Please note that the Sankey chart doesn\\'t handle circular values well, so you may need to add a level prefix if your data contains circular references.',\n        component: SankeyReport,\n        previewQuery: `UNWIND [[\"Jane\", \"John\", 152], [\"Jane\", \"Ibrahim\", 115], [\"Raoul\", \"Marcel\", 56], [\"Raoul\", \"John\", 106], [\"Junko\", \"John\", 84], [\"Marcel\", \"John\", 50], [\"Marcel\", \"Junko\", 82], [\"Marcel\", \"Ibrahim\", 61], [\"Marcel\", \"Jane\", 178]] AS row RETURN row[0] AS from, row[1] AS to, row[2] AS value`\n    },\n    {\n        key: TYPE_VERTICAL_SANKEY,\n        value: TYPE_VERTICAL_SANKEY,\n        text: 'Vertical Sankey',\n        hint: 'A Sankey report expects rows with three keys: `from` and `to` and `value`.   Please note that the Sankey chart doesn\\'t handle circular values well, so you may need to add a level prefix if your data contains circular references.',\n        component: SankeyReport,\n        props: {\n            layout: 'vertical'\n        },\n        previewQuery: `UNWIND [[\"Jane\", \"John\", 152], [\"Jane\", \"Ibrahim\", 115], [\"Raoul\", \"Marcel\", 56], [\"Raoul\", \"John\", 106], [\"Junko\", \"John\", 84], [\"Marcel\", \"John\", 50], [\"Marcel\", \"Junko\", 82], [\"Marcel\", \"Ibrahim\", 61], [\"Marcel\", \"Jane\", 178]] AS row RETURN row[0] AS from, row[1] AS to, row[2] AS value`\n    },\n    {\n        key: TYPE_SCATTER_PLOT,\n        value: TYPE_SCATTER_PLOT,\n        text: 'Scatter Plot Chart',\n        hint: 'A Scatter Plot chart takes the first item returned as the key and plots all other data points on the chart.  Remember to order your results by date.',\n        component: ScatterPlotReport,\n        // exampleQuery: barExampleQuery,\n        previewQuery: `UNWIND [[\"group A\", 33, 115], [\"group A\", 96, 52], [\"group A\", 70, 30], [\"group A\", 46, 33], [\"group A\", 87, 67], [\"group A\", 55, 64], [\"group A\", 32, 11], [\"group A\", 63, 120], [\"group A\", 48, 100], [\"group A\", 47, 113], [\"group A\", 48, 23], [\"group A\", 79, 91], [\"group A\", 88, 49], [\"group A\", 41, 42], [\"group A\", 81, 6], [\"group A\", 29, 56], [\"group A\", 2, 66], [\"group A\", 9, 58], [\"group A\", 76, 96], [\"group A\", 92, 47], [\"group A\", 94, 78], [\"group A\", 36, 36], [\"group A\", 51, 47], [\"group A\", 71, 25], [\"group A\", 83, 14], [\"group A\", 72, 97], [\"group A\", 25, 115], [\"group A\", 18, 116], [\"group A\", 42, 50], [\"group A\", 37, 51], [\"group A\", 12, 102], [\"group A\", 2, 73], [\"group A\", 69, 89], [\"group A\", 55, 28], [\"group A\", 93, 62], [\"group A\", 20, 86], [\"group A\", 13, 25], [\"group A\", 89, 60], [\"group A\", 87, 46], [\"group A\", 80, 89], [\"group A\", 65, 103], [\"group A\", 79, 116], [\"group A\", 55, 39], [\"group A\", 30, 63], [\"group A\", 10, 120], [\"group A\", 43, 17], [\"group A\", 47, 19], [\"group A\", 30, 1], [\"group A\", 79, 57], [\"group A\", 8, 56], [\"group B\", 69, 119], [\"group B\", 3, 33], [\"group B\", 1, 37], [\"group B\", 18, 46], [\"group B\", 45, 32], [\"group B\", 46, 91], [\"group B\", 1, 43], [\"group B\", 12, 55], [\"group B\", 86, 77], [\"group B\", 70, 33], [\"group B\", 64, 10], [\"group B\", 66, 64], [\"group B\", 64, 120], [\"group B\", 19, 90], [\"group B\", 17, 19], [\"group B\", 95, 59], [\"group B\", 39, 114], [\"group B\", 15, 68], [\"group B\", 47, 54], [\"group B\", 81, 53], [\"group B\", 43, 67], [\"group B\", 42, 34], [\"group B\", 36, 72], [\"group B\", 31, 14], [\"group B\", 52, 69], [\"group B\", 26, 115], [\"group B\", 12, 108], [\"group B\", 19, 107], [\"group B\", 17, 114], [\"group B\", 57, 88], [\"group B\", 42, 87], [\"group B\", 7, 62], [\"group B\", 62, 88], [\"group B\", 22, 12], [\"group B\", 78, 111], [\"group B\", 13, 25], [\"group B\", 15, 90], [\"group B\", 7, 48], [\"group B\", 1, 98], [\"group B\", 62, 30], [\"group B\", 28, 39], [\"group B\", 0, 33], [\"group B\", 77, 106], [\"group B\", 52, 73], [\"group B\", 41, 113], [\"group B\", 92, 77], [\"group B\", 11, 106], [\"group B\", 1, 98], [\"group B\", 4, 104], [\"group B\", 35, 86], [\"group C\", 56, 97], [\"group C\", 21, 22], [\"group C\", 23, 30], [\"group C\", 4, 97], [\"group C\", 82, 49], [\"group C\", 51, 31], [\"group C\", 7, 47], [\"group C\", 5, 70], [\"group C\", 31, 28], [\"group C\", 48, 11], [\"group C\", 15, 59], [\"group C\", 57, 29], [\"group C\", 54, 44], [\"group C\", 44, 63], [\"group C\", 13, 115], [\"group C\", 23, 7], [\"group C\", 77, 56], [\"group C\", 41, 77], [\"group C\", 50, 104], [\"group C\", 97, 52], [\"group C\", 57, 61], [\"group C\", 55, 90], [\"group C\", 45, 40], [\"group C\", 61, 48], [\"group C\", 53, 95], [\"group C\", 11, 31], [\"group C\", 53, 109], [\"group C\", 26, 70], [\"group C\", 11, 111], [\"group C\", 82, 88], [\"group C\", 25, 84], [\"group C\", 55, 56], [\"group C\", 61, 28], [\"group C\", 82, 42], [\"group C\", 30, 79], [\"group C\", 94, 107], [\"group C\", 0, 95], [\"group C\", 27, 65], [\"group C\", 66, 104], [\"group C\", 84, 76], [\"group C\", 92, 84], [\"group C\", 44, 2], [\"group C\", 5, 112], [\"group C\", 78, 102], [\"group C\", 2, 54], [\"group C\", 5, 8], [\"group C\", 89, 63], [\"group C\", 17, 120], [\"group C\", 45, 85], [\"group C\", 98, 12], [\"group D\", 37, 72], [\"group D\", 57, 98], [\"group D\", 47, 63], [\"group D\", 0, 114], [\"group D\", 3, 63], [\"group D\", 64, 45], [\"group D\", 48, 81], [\"group D\", 92, 85], [\"group D\", 43, 36], [\"group D\", 12, 16], [\"group D\", 24, 9], [\"group D\", 84, 96], [\"group D\", 93, 52], [\"group D\", 39, 4], [\"group D\", 55, 103], [\"group D\", 42, 43], [\"group D\", 82, 70], [\"group D\", 6, 73], [\"group D\", 78, 96], [\"group D\", 94, 37], [\"group D\", 46, 104], [\"group D\", 31, 93], [\"group D\", 44, 107], [\"group D\", 11, 96], [\"group D\", 79, 116], [\"group D\", 97, 43], [\"group D\", 94, 116], [\"group D\", 82, 59], [\"group D\", 90, 8], [\"group D\", 83, 31], [\"group D\", 68, 37], [\"group D\", 92, 32], [\"group D\", 72, 105], [\"group D\", 11, 110], [\"group D\", 78, 89], [\"group D\", 69, 19], [\"group D\", 63, 24], [\"group D\", 23, 22], [\"group D\", 75, 43], [\"group D\", 66, 70], [\"group D\", 66, 118], [\"group D\", 48, 69], [\"group D\", 71, 14], [\"group D\", 1, 28], [\"group D\", 50, 24], [\"group D\", 48, 94], [\"group D\", 72, 29], [\"group D\", 7, 63], [\"group D\", 48, 120], [\"group D\", 87, 6], [\"group E\", 1, 112], [\"group E\", 81, 10], [\"group E\", 41, 21], [\"group E\", 7, 0], [\"group E\", 56, 73], [\"group E\", 93, 15], [\"group E\", 88, 15], [\"group E\", 12, 14], [\"group E\", 1, 67], [\"group E\", 46, 90], [\"group E\", 1, 61], [\"group E\", 52, 70], [\"group E\", 4, 81], [\"group E\", 36, 110], [\"group E\", 55, 61], [\"group E\", 78, 83], [\"group E\", 44, 47], [\"group E\", 9, 28], [\"group E\", 12, 94], [\"group E\", 49, 16], [\"group E\", 1, 18], [\"group E\", 50, 22], [\"group E\", 34, 62], [\"group E\", 35, 38], [\"group E\", 31, 53], [\"group E\", 34, 91], [\"group E\", 40, 7], [\"group E\", 22, 100], [\"group E\", 8, 23], [\"group E\", 56, 104], [\"group E\", 53, 71], [\"group E\", 9, 28], [\"group E\", 71, 48], [\"group E\", 100, 75], [\"group E\", 20, 55], [\"group E\", 27, 91], [\"group E\", 63, 99], [\"group E\", 72, 77], [\"group E\", 23, 107], [\"group E\", 35, 2], [\"group E\", 82, 7], [\"group E\", 51, 6], [\"group E\", 10, 20], [\"group E\", 50, 21], [\"group E\", 62, 61], [\"group E\", 82, 76], [\"group E\", 85, 81], [\"group E\", 19, 53], [\"group E\", 66, 47], [\"group E\", 73, 57]] AS row return row[0] AS id, row[1] AS x, row[2] AS y`,\n    },\n    {\n        key: TYPE_STREAM,\n        value: TYPE_STREAM,\n        text: 'Stream Chart',\n        hint: 'A Stream chart takes a series of numbers and plots them across the chart.  Each row should return a set of columns, each containing a number',\n        component: StreamReport,\n        // exampleQuery: barExampleQuery,\n        previewQuery: `UNWIND [{Raoul:31,Josiane:29,Marcel:136,René:169,Paul:20,Jacques:84},{Raoul:33,Josiane:106,Marcel:87,René:158,Paul:33,Jacques:154},{Raoul:128,Josiane:140,Marcel:134,René:60,Paul:57,Jacques:34}] AS row RETURN row.Raoul AS Raoul,row.Josiane AS Josiane,row.Marcel AS Marcel, row.René AS René,row.Paul AS Paul,row.Jacques AS Jacques`,\n    },\n]\n\n\nexport function getHint(type: string) {\n    return reportTypes.find(row => row.value === type)!.hint\n}\n\ninterface AggregationFunctionOption {\n    key: string;\n    text: string;\n    value: AggregationFunction;\n}\n\nexport const aggregateFunctions: AggregationFunctionOption[] = [\n    { key: 'avg', value: 'avg', text: 'avg', },\n    { key: 'collect', value: 'collect', text: 'collect', },\n    { key: 'count', value: 'count', text: 'count', },\n    { key: 'max', value: 'max', text: 'max', },\n    { key: 'min', value: 'min', text: 'min', },\n    { key: 'percentileCont', value: 'percentileCont', text: 'percentileCont', },\n    { key: 'percentileDisc', value: 'percentileDisc', text: 'percentileDisc', },\n    { key: 'stDev', value: 'stDev', text: 'stDev', },\n    { key: 'stDevP', value: 'stDevP', text: 'stDevP', },\n    { key: 'sum', value: 'sum', text: 'sum' },\n]\n","import React from 'react'\nimport { ResponsiveScatterPlot, Serie } from '@nivo/scatterplot'\nimport { ChartReportProps } from './ReportProps'\nimport { checkResultKeys, recordToNative } from '../../utils'\nimport Loading from '../Loading'\nimport ReportError from './error'\n\nexport default function ScatterPlotReport(props: ChartReportProps) {\n    const { records, first } = props\n\n    if ( !first ) {\n        return <Loading />\n    }\n\n    const error = checkResultKeys(first, ['id', 'x', 'y'])\n\n    if ( error !== false ) {\n        return <ReportError error={error} />\n    }\n\n    const data: Serie[] = records.map(row => ({\n        id: recordToNative(row.get('id')),\n        x:  recordToNative(row.get('x')),\n        y: recordToNative(row.get('y')),\n    }))\n        .reduce((acc: Serie[], row: Record<string, any>) => {\n            const index = acc.findIndex(item => item.id === row.id)\n\n            if ( index === -1 ) {\n                return acc.concat({\n                    id: row.id,\n                    data: [ { x: row.x, y: row.y } ]\n                }) as Serie[]\n            }\n\n            acc[ index ].data.push({ x: row.x, y: row.y })\n\n            acc[ index ].data.sort((a, b) => a.x > b.x ? -1 : 1)\n\n            return acc as Serie[]\n        }, [] as Serie[])\n\n    return (\n        <ResponsiveScatterPlot\n            data={data}\n            margin={{ top: 24, right: 24, bottom: 38, left: 32 }}\n\n            {...props.config}\n        />\n    )\n}","import React from 'react'\nimport { ResponsiveStream } from '@nivo/stream'\nimport ReportProps from './ReportProps';\nimport { recordToNative } from '../../utils';\n\nexport default function StreamReport(props: ReportProps) {\n    const { records, first } = props\n\n    const keys = first!.keys as string[]\n    const data = records.map(row => Object.fromEntries(row.keys.map(key => [ key, recordToNative(row.get(key)) ])))\n\n    return (\n        <ResponsiveStream\n            data={data}\n            keys={keys}\n            margin={{top: 24, left: 0, right: 0, bottom: 24}}\n            axisBottom={null}\n        />\n    )\n}","/* eslint-disable */\nimport Builder, { Operator } from \"@neode/querybuilder\";\nimport { QueryResult, Record as Neo4jRecord } from 'neo4j-driver'\nimport { useSelector } from \"react-redux\";\nimport { useReadCypher } from \"use-neo4j\";\n\nimport { directions, operators } from \"./constants\";\nimport { RootState } from \"./store\";\nimport { Query } from \"./store/actions\";\n\ninterface CypherOutput {\n    cypher: string;\n    params: Record<string, any>;\n}\n\nexport function queryToCypher(query: string | Query): CypherOutput {\n    if (  typeof query === 'string' ) {\n        return {\n            cypher: query,\n            params: {}\n        }\n    }\n\n    const builder = new Builder()\n\n    const { nodes, relationships, predicates, output } = query as Query\n    const endNodes = relationships.map(rel => rel.to)\n\n    const root = nodes.find(node => !endNodes.includes(node.id))\n\n    builder.match(root!.id, root?.label)\n\n    let lastEnd = root!.id\n\n    relationships.map(rel => {\n        const to = nodes.find(node => node.id === rel.to)\n\n        if ( lastEnd !== rel.from ) {\n            builder.match(rel.from)\n        }\n\n        lastEnd = rel.to\n\n        builder.relationship(rel.type, directions[ rel.direction ], rel.id)\n        builder.to(rel.to, to?.label)\n    })\n\n    predicates.map(output => {\n        const operator = operators[ output.condition ]\n\n        if ( output.negative ) {\n            switch (operator) {\n                case Operator.CONTAINS:\n                    builder.whereNotContains(`${output.alias}.${output.name}`, output.value)\n                    break;\n\n                case Operator.STARTS_WITH:\n                    builder.whereNotStartsWith(`${output.alias}.${output.name}`, output.value)\n                    break;\n\n                case Operator.ENDS_WITH:\n                    builder.whereNotEndsWith(`${output.alias}.${output.name}`, output.value)\n                    break;\n\n                case Operator.GREATER_THAN:\n                    builder.whereLessThan(`${output.alias}.${output.name}`, output.value)\n                    break;\n\n                case Operator.GREATER_THAN_OR_EQUAL:\n                    builder.whereLessThanOrEqual(`${output.alias}.${output.name}`, output.value)\n                    break;\n\n                case Operator.LESS_THAN:\n                    builder.whereGreaterThan(`${output.alias}.${output.name}`, output.value)\n                    break;\n\n                case Operator.LESS_THAN_OR_EQUAL:\n                    builder.whereGreaterThanOrEqual(`${output.alias}.${output.name}`, output.value)\n                    break;\n\n                default:\n                    builder.whereNot(`${output.alias}.${output.name}`, output.value)\n                    break;\n            }\n        }\n        else {\n            switch (operator) {\n                case Operator.CONTAINS:\n                    builder.whereContains(`${output.alias}.${output.name}`, output.value)\n                    break;\n\n                case Operator.STARTS_WITH:\n                    builder.whereStartsWith(`${output.alias}.${output.name}`, output.value)\n                    break;\n\n                case Operator.ENDS_WITH:\n                    builder.whereEndsWith(`${output.alias}.${output.name}`, output.value)\n                    break;\n\n                case Operator.GREATER_THAN:\n                    builder.whereGreaterThan(`${output.alias}.${output.name}`, output.value)\n                    break;\n\n                case Operator.GREATER_THAN_OR_EQUAL:\n                    builder.whereGreaterThanOrEqual(`${output.alias}.${output.name}`, output.value)\n                    break;\n\n                case Operator.LESS_THAN:\n                    builder.whereLessThan(`${output.alias}.${output.name}`, output.value)\n                    break;\n\n                case Operator.LESS_THAN_OR_EQUAL:\n                    builder.whereLessThanOrEqual(`${output.alias}.${output.name}`, output.value)\n                    break;\n\n                default:\n                    builder.where(`${output.alias}.${output.name}`, output.value)\n                    break;\n            }\n        }\n\n    })\n\n    output.map(output => {\n        let field = `${output.alias}.${output.name}`\n\n        if ( output.aggregate ) {\n            field = `${output.aggregate}(${field})`\n        }\n\n        if ( output.as ) {\n            field += ` AS ${output.as}`\n        }\n\n        builder.return(field)\n    })\n\n    return builder.build()\n}\n\n\nexport interface ReportProps {\n    query: string;\n    source: 'cypher' | 'query'\n    database?: string;\n    type: string;\n    [key: string]: any;\n}\n\nexport function useReportResults(props: ReportProps) {\n    const queries = useSelector((state: RootState) => state.queries)\n\n    let cypher = props.query\n    let params = {}\n\n    if ( props.source === 'query' ) {\n        const output = queryToCypher(queries.find(query => query.id === props.query))\n\n        cypher = output.cypher\n        params = output.params\n    }\n\n    return { params, ...useReadCypher(cypher, params, props.database) }\n}\n\n\nexport function recordToNative(input: any): any {\n    if ( !input && input !== false ) {\n        return null\n    }\n    else if ( typeof input.keys === 'object' && typeof input.get === 'function' ) {\n        return Object.fromEntries(input.keys.map(key => [ key, recordToNative(input.get(key)) ]))\n    }\n    else if ( typeof input.toNumber === 'function' ) {\n        return input.toNumber()\n    }\n    else if ( Array.isArray(input) ) {\n        return (input as Array<any>).map(item => recordToNative(item))\n    }\n    else if ( typeof input === 'object' ) {\n        const converted = Object.entries(input).map(([ key, value ]) => [ key, recordToNative(value) ])\n\n        return Object.fromEntries(converted)\n    }\n\n    return input\n}\n\nexport function resultToNative(result: QueryResult): Record<string, any> {\n    if (!result) return {}\n\n    return result.records.map(row => recordToNative(row))\n}\nexport function checkResultKeys(first: Neo4jRecord, keys: string[]) {\n    const missing = keys.filter(key => !first.keys.includes(key))\n\n    if ( missing.length > 0 ) {\n        return new Error(`The query is missing the following key${missing.length > 1 ? 's' : ''}: ${missing.join(', ')}.  The expected keys are: ${keys.join(', ')}`)\n    }\n\n    return false\n}","import React from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { selectNode, selectRelationship } from '../store/actions';\n\nimport { RootState } from '../store';\nimport { queryToCypher } from '../utils';\n\nfunction TreeRelationship({ relationship }) {\n    const dispatch = useDispatch()\n    const handleClick = () => dispatch( selectRelationship(relationship.id) )\n    const handleNodeClick = () => dispatch( selectNode(relationship.to) )\n\n    return <li>\n        <button className=\"bg-gray-200 text-gray-700 rounded-md px-4 py-2 mb-2 font-bold mr-2 focus:outline-none\"  onClick={handleClick}>\n            {relationship.direction === 'in' ? '<': ''}-\n            <span className=\"bg-gray-100 text-gray-500 px-2 py-1 inline-block ml-1\">{relationship.id}:{relationship.type}</span>\n            -{relationship.direction === 'out' ? '>': ''}\n        </button>\n        <button className=\"bg-gray-300 text-gray-700 rounded-full px-4 py-2 mb-2 font-bold focus:outline-none\" onClick={handleNodeClick}>\n            {relationship.to}\n        </button>\n    </li>\n}\n\nfunction TreeNode({ node }) {\n    const dispatch = useDispatch()\n    const handleNodeClick = id => dispatch( selectNode(id) )\n\n    const relationships = useSelector((state: RootState) => state.currentQuery.relationships)\n    const predicates = useSelector((state: RootState) => state.currentQuery.predicates)\n    const output = useSelector((state: RootState) => state.currentQuery.output)\n\n    const theseRels = relationships.filter(rel => rel.from === node.id)\n\n    const relationshipList = theseRels.length ? <ul className=\"ml-6 mb-2\">\n        { theseRels.map(rel => <TreeRelationship key={rel.id} relationship={rel} />) }\n    </ul> : null\n\n    const thesePredicates = predicates.filter(p => p.alias === node.id).map(p => p.name)\n    const theseOutputs = output.filter(p => p.alias === node.id).map(p => p.aggregate ? `${p.aggregate}(${p.name})` : p.name)\n\n\n    return (\n        <li key={node.id} className=\"mb-4\">\n            <button onClick={() => handleNodeClick(node.id)} className=\"bg-gray-300 text-gray-700 rounded-full px-4 py-2 mb-2 font-bold focus:outline-none\">\n                {node.id}:\n                <span className=\"bg-gray-100 text-gray-500 px-2 py-1 inline-block ml-1\">{node.label}</span>\n\n\n            {thesePredicates.length ? <span className=\"inline-block ml-2\">\n                {'{'}\n                {thesePredicates.join(', ')}\n                {'}'}\n            </span> : ''}\n\n            {theseOutputs.length ? <span className=\"inline-block ml-2 text-gray-500\">\n                :: {'{'}\n                {theseOutputs.join(', ')}\n                {'}'}\n            </span> : ''}\n\n            </button>\n\n            {relationshipList}\n\n        </li>\n    )\n}\n\n\nfunction Query() {\n    const query = useSelector((state: RootState) => state.currentQuery)\n    const { cypher, params } = queryToCypher(query)\n\n    const paramStatements = Object.entries(params).map(([ key, value ]) => <pre key={key}>:param {key}: {value}</pre>)\n\n    return <div className=\"flex-grow p-2 mt-4 leading-8 bg-blue-100 text-blue-800 w-full\">\n        {paramStatements}\n\n        <pre className=\"pt-2 mt-4 border-t border-gray-300\">\n        {cypher}\n        </pre>\n    </div>\n}\n\n\nexport default function Graph() {\n    const nodes = useSelector((state: RootState) => state.currentQuery.nodes)\n\n    // TODO: make force graph again...\n    return (\n        <div className=\"flex flex-col w-full h-full\">\n            <div className=\"w-full flex-grow overflow-auto\">\n                <ul className=\"p-2\">\n                    {nodes?.map(node => <TreeNode key={node.id} node={node} />)}\n                </ul>\n            </div>\n            <Query />\n        </div>\n    )\n}","import React from 'react'\nimport { useDispatch } from 'react-redux'\nimport { addNode } from '../../store/actions'\n\nexport default function InitialNodeSelector(props) {\n    const { labels } = props\n\n    const dispatch = useDispatch()\n\n    const handleButtonClick = label => dispatch(addNode(label))\n\n    return <div className=\"flex flex-col h-full flex-grow justify-between\">\n        <div className=\"flex flex-col h-full justify-center align-center\">\n            <div className=\"bg-gray-200 p-4 rounded-md w-auto justify-center mx-auto\" style={{maxWidth: '320px'}}>\n                <p className=\"font-bold mb-8\">Which label would you like to start the query from?</p>\n\n                {labels.map(label => <button key={label.label} onClick={() => handleButtonClick(label.label)} className=\"bg-gray-100 text-gray-700 rounded-full px-4 py-2 mb-2 font-bold mr-2\">\n                    {label.label}\n                    <span className=\"bg-gray-200 text-gray-500 px-2 py-1 inline-block ml-2 text-sm rounded-full\">({label.count})</span>\n                </button>)}\n            </div>\n        </div>\n    </div>\n\n}","import React from 'react'\n\nexport default function Tab(props) {\n    let classes = 'card-tab border-b-2 pb-2 text-sm focus:outline-none '\n\n    if ( props.active ) {\n        classes += 'text-blue-800 border-blue-600'\n    }\n    else {\n        classes += 'text-gray-600 border-transparent'\n    }\n\n    return (\n        <div className=\"flex flex-row justify-baseline ml-2\">\n            {props.text && <button className={classes} onClick={props.onClick}>{props.text}</button>}\n            {props.children}\n        </div>\n    )\n}","import { AggregationFunction } from '@neode/querybuilder'\nimport React, { useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { aggregateFunctions, Condition, conditions } from '../../constants'\nimport { RootState } from '../../store'\nimport { addPredicate, addRelationship, addReturn, removeNode, removePredicate, removeRelationship, removeReturn } from '../../store/actions'\nimport Tab from '../tab'\n\n\nfunction ToolbarHeader({ text }) {\n    return <div className=\"toolbar-header bg-white p-4 font-bold text-gray-700 text-lg border-b border-gray-400\">{text}</div>\n}\n\n// function ToolbarSubheader({ text }) {\n//     return <div className=\"toolbar-subheader bg-white p-4 font-bold text-gray-600 border-b border-gray-200 mb-4\">{text}</div>\n// }\n\nfunction ToolbarRelationship(props) {\n    const dispatch = useDispatch()\n    const handleRelationshipClick = () => dispatch(addRelationship(props))\n\n    const text = `(${props.from})${props.direction === 'in' ? '<' : ''}-[:${props.type}]-${props.direction === 'out' ? '>' : ''}(:${props.label})`\n\n    return <button onClick={handleRelationshipClick} className=\"text-left w-full bg-gray-100 text-gray-700 rounded-md px-2 py-2 mb-2 font-bold\">\n        <span className=\"inline-block px-2 text-xs rounded-md bg-green-300 text-green-800 mr-2\">+</span>\n        {text}\n    </button>\n}\n\n\nfunction ExistingPredicate(props) {\n    const dispatch = useDispatch()\n    const { id, name, condition, negative, value } = props\n\n    const handleRemoveClick = () => {\n        dispatch( removePredicate(id) )\n    }\n\n    return <div className=\"flex flex-row justify-between p-2 mb-2 border-b border-gray-300\">\n        <div className=\"flex flex-grow-1\">{name}</div>\n        <div className=\"flex flex-grow-1\">{negative ? 'NOT' : 'IS'} {condition}</div>\n        <pre className=\"flex flex-grow-1\">{value}</pre>\n        <button className=\"p-2 rounded-sm border border-red-600 text-red-600 font-bold leading-none\" onClick={handleRemoveClick}>x</button>\n    </div>\n}\n\nfunction Predicates({ id }) {\n    const predicates = useSelector((state: RootState) => state.currentQuery.predicates)\n\n    const thesePredicates = predicates.filter(p => p.alias === id)\n        .map(row => <ExistingPredicate key={[row.id, row.name, row.negative ? 'NOT': 'IS', row.condition, row.value].join('||')}\n            {...row}\n        />)\n\n    if ( !thesePredicates.length ) return null;\n\n    return <div className=\"p-4 flex flex-col\">\n        {thesePredicates}\n    </div>\n}\n\nfunction AddPredicateForm({ id, properties }) {\n    const dispatch = useDispatch()\n\n    const [ name, setName ] = useState<string>()\n    const [ value, setValue ] = useState<string>('')\n    const [ negative, setNegative ] = useState<boolean>(false)\n    const [ condition, setCondition ] = useState<Condition>(conditions[0])\n\n    const handleAddPredicate = () => {\n        if ( name && value !== '' ) {\n            const thisProperty = properties[ name ]\n\n            dispatch( addPredicate({ alias: id, name, condition, negative, type: thisProperty.type, value }) )\n\n            setValue('')\n            setCondition(conditions[0])\n        }\n    }\n\n    return <div className=\"p-4 flex flex-col\">\n        <select className=\"p-2 rounded-md border border-gray-400 mb-2\" value={name} onChange={e => setName(e.target.value)}>\n            <option></option>\n            {Object.keys(properties).map((key) => <option key={key} value={key}>{key} ({ properties[key].type })</option>)}\n        </select>\n        <div>\n            <input id=\"negative\" type=\"checkbox\" checked={negative} onChange={e => setNegative(e.target.checked)} />\n            <label className=\"ml-2 inline-block font-bold text-xs mb-2 leading-none\" htmlFor=\"negative\">NOT</label>\n        </div>\n        <select className=\"p-2 rounded-md border border-gray-400 mb-2\" value={condition} onChange={e => setCondition(e.target.value as Condition)}>\n            <option></option>\n            {conditions.map((key) => <option key={key} value={key}>{key}</option>)}\n        </select>\n        <input className=\"p-2 rounded-md border border-gray-400 mb-2\" value={value} onChange={e => setValue(e.target.value)} />\n        <button className=\"px-4 py-2 rounded-md border font-bold border-blue-600 text-blue-600\" onClick={handleAddPredicate}>Add Predicate</button>\n    </div>\n}\n\n\nfunction ReturnFields({ id }) {\n    const dispatch = useDispatch()\n\n    const output = useSelector((state: RootState) => state.currentQuery.output)\n    const handleRemoveClick = (id: string) => dispatch( removeReturn(id) )\n\n    const theseFields = output.filter(p => p.alias === id)\n        .map(row => <div className=\"flex justify-between\" key={row.id}>\n            <div>\n                {row.aggregate && <span className=\"text-blue-700\">{row.aggregate}(</span>}\n                <span className=\"font-bold\">\n                {row.name}\n                </span>\n                {row.aggregate && <span className=\"text-blue-600\">)</span>}\n                {row.as && <span className=\"text-green-600\"> AS {row.as}</span>}\n\n            </div>\n            <button className=\"p-2 rounded-sm border border-red-600 text-red-600 font-bold leading-none\" onClick={() => handleRemoveClick(row.id)}>x</button>\n        </div>)\n\n    if ( !theseFields.length ) return null;\n\n    return <div className=\"p-4 flex flex-col\">\n        {theseFields}\n    </div>\n}\n\n\nfunction AddReturnForm({ id, properties }) {\n    const dispatch = useDispatch()\n\n    const [ name, setName ] = useState<string>(Object.keys(properties)[0])\n    const [ aggregate, setAggregate ] = useState<AggregationFunction | ''>('')\n    const [ as, setAs ] = useState<string>('')\n\n    const handleAddReturn = () => {\n        if ( name ) {\n            dispatch( addReturn({ alias: id, name, as, aggregate: aggregate !== '' ? aggregate : undefined }) )\n\n            setAs('')\n            setAggregate('')\n        }\n    }\n\n    return <div className=\"p-4 flex flex-col\">\n        <select className=\"p-2 rounded-md border border-gray-400 mb-2\" value={name} onChange={e => setName(e.target.value)}>\n            {Object.keys(properties).map((key) => <option key={key} value={key}>{key}</option>)}\n        </select>\n        <input className=\"p-2 rounded-md border border-gray-400 mb-2\" value={as} onChange={e => setAs(e.target.value)} placeholder=\"Alias Field?\" />\n        <select className=\"p-2 rounded-md border border-gray-400 mb-2\" value={aggregate} onChange={e => setAggregate(e.target.value as AggregationFunction)}>\n            <option value=\"\">Aggregate?</option>\n            {aggregateFunctions.map(({ key, value, text }) => <option key={key} value={value}>{text}</option>)}\n        </select>\n        <button className=\"px-4 py-2 rounded-md border font-bold border-blue-600 text-blue-600\" onClick={handleAddReturn}>Add Return</button>\n    </div>\n}\n\nfunction ToolbarTabs({ tabs }) {\n    return (\n        <div className=\"flex flex-row px-2 pt-4 mb-2 border-b border-gray-300\">\n            {tabs.map((tab, index) => <Tab key={index} text={tab.text} active={tab.active} onClick={tab.onClick} />)}\n        </div>\n    )\n}\n\nfunction NodeToolbar(props) {\n    const dispatch = useDispatch()\n    const selected = useSelector((state: RootState) => state.currentQuery.selected)\n    const nodes = useSelector((state: RootState) => state.currentQuery.nodes)\n    const thisNode = nodes.find(node => node.id === selected)\n    const [ tab, setTab ] = useState<string>('relationships')\n\n    const thisLabel = thisNode && props.labels.find(label => label.label === thisNode!.label)\n\n    if ( !selected || !thisNode || !thisLabel ) return <div></div>\n\n    const handleRemoveClick = () => dispatch(removeNode(thisNode!.id))\n\n    const tabs = [\n        { text: 'Relationships', active: tab === 'relationships', onClick: () => setTab('relationships') },\n        { text: 'Where', active: tab === 'predicates', onClick: () => setTab('predicates') },\n        { text: 'Return', active: tab === 'return', onClick: () => setTab('return') },\n    ]\n\n    let activeTab = <div></div>\n\n    if ( tab === 'predicates' )  {\n        activeTab = <div className=\"toolbar-predicates\">\n            {/* <ToolbarSubheader text=\"Predicates\" /> */}\n            <Predicates id={thisNode.id} />\n            <AddPredicateForm id={thisNode.id} properties={thisLabel.properties} />\n        </div>\n    }\n    else if ( tab === 'return' )  {\n        activeTab = <div className=\"toolbar-predicates\">\n            {/* <ToolbarSubheader text=\"Return Fields\" /> */}\n            <ReturnFields id={thisNode.id} />\n            <AddReturnForm id={thisNode.id} properties={thisLabel.properties} />\n        </div>\n    }\n    else if ( tab === 'relationships') {\n        const addRelationshipOptions = thisLabel.relationships.map(rel => rel.labels.map(label => ({\n            key: `${rel.type}||${rel.direction}||${label}`,\n            label,\n            ...rel,\n        })))\n            .reduce((acc, next) => acc.concat(next), [])\n            .map(rel => <ToolbarRelationship key={rel.key} from={selected} {...rel} />)\n\n        activeTab = (<div className=\"pt-2\">\n            {/* <ToolbarSubheader text=\"Add Relationship\" /> */}\n            <div className=\"px-2\">\n                {addRelationshipOptions}\n            </div>\n        </div>)\n    }\n\n\n    return <div className=\"toolbar flex-grow flex-shrink-0 node-toolbar h-full flex flex-col bg-white border-l border-gray-300\" style={{width: '420px'}}>\n        <ToolbarHeader text={`(${thisNode?.id}:${thisNode?.label})`} />\n\n        <ToolbarTabs tabs={tabs} />\n\n        <div className=\"toolbar-scrollable flex flex-col flex-shrink flex-grow overflow-auto\">\n            {activeTab}\n        </div>\n        <ToolbarFooter handleRemoveClick={handleRemoveClick} removeText=\"Remove Node\" />\n    </div>\n}\n\nfunction RelationshipToolbar(props) {\n    const dispatch = useDispatch()\n\n    const selected = useSelector((state: RootState) => state.currentQuery.selected)\n    const nodes = useSelector((state: RootState) => state.currentQuery.nodes)\n    const relationships = useSelector((state: RootState) => state.currentQuery.relationships)\n    const thisRelationship = relationships.find(r => r.id === selected)\n    const thisType = props.types.find(type => type.type === thisRelationship?.type)\n    const [ tab, setTab ] = useState<string>('predicates')\n\n    const tabs = [\n        { text: 'Predicates', active: tab === 'predicates', onClick: () => setTab('predicates') },\n        { text: 'Return', active: tab === 'return', onClick: () => setTab('return') },\n    ]\n\n    if ( !thisType ) {\n        return <div></div>\n    }\n\n    const handleRemoveClick = () => dispatch(removeRelationship(thisRelationship!.id))\n\n    const startNode = nodes.find(node => node.id === thisRelationship?.from)\n    const endNode = nodes.find(node => node.id === thisRelationship?.to)\n\n    const text = `(${startNode?.id}:${startNode?.label})${thisRelationship?.direction === 'in' ? '<': ''}-[${thisRelationship?.id}:${thisRelationship?.type}]-${thisRelationship?.direction === 'out' ? '>': ''}(${endNode?.id}:${endNode?.label})`\n\n\n    let activeTab = <div></div>\n\n    if ( tab === 'predicates' ) {\n        activeTab = Object.keys(thisType.properties).length ? (\n            <div>\n                {/* <ToolbarSubheader text=\"Predicates\" /> */}\n                <Predicates id={thisRelationship!.id} />\n                <AddPredicateForm id={thisRelationship!.id} properties={thisType.properties} />\n            </div>\n        ) : <div className=\"p-4\">There are no properties on this relationship</div>\n    }\n    else if ( tab === 'return' ) {\n        activeTab = Object.keys(thisType.properties).length ? (\n        <div>\n            {/* <ToolbarSubheader text=\"Return Fields\" /> */}\n            <ReturnFields id={thisRelationship!.id} />\n            <AddReturnForm id={thisRelationship!.id} properties={thisType.properties} />\n        </div>\n        ) : <div className=\"p-4\">There are no properties to return this relationship</div>\n    }\n\n    return (\n        <div className=\"toolbar flex-grow flex-shrink-0 node-toolbar h-full flex flex-col bg-white border-l border-gray-300\" style={{width: '420px'}}>\n            <ToolbarHeader text={text} />\n            <ToolbarTabs tabs={tabs} />\n            <div className=\"toolbar-scrollable flex flex-col flex-shrink flex-grow overflow-auto\">\n                {activeTab}\n            </div>\n            <ToolbarFooter handleRemoveClick={handleRemoveClick} removeText=\"Remove Relationship\" />\n        </div>\n    )\n}\n\nfunction ToolbarFooter({ handleRemoveClick, removeText }) {\n    return <div className=\"toolbar-footer p-4 border-t border-gray-400\">\n        <button className=\"block w-full p-4 rounded-md border border-red-600 text-red-600 font-bold leading-none active:bg-red-100 focus:outline-none\" onClick={handleRemoveClick}>{ removeText }</button>\n    </div>\n}\n\n\nexport default function Toolbar(props) {\n    const selected = useSelector((state: RootState) => state.currentQuery.selected)\n\n    if ( selected && selected.startsWith('n') ) {\n        return <NodeToolbar {...props} />\n    }\n    else if ( selected && selected.startsWith('r') ) {\n        return <RelationshipToolbar {...props} />\n    }\n\n    return <div></div>\n\n}","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { RootState } from '../../store';\nimport { deleteQuery, setName, updateQuery } from '../../store/actions';\nimport Loading from '../Loading';\n\nexport default function QueryHeader() {\n    const dispatch = useDispatch();\n    const currentQuery = useSelector((state: RootState) => state.currentQuery);\n\n    if (!currentQuery) {\n        return <Loading />;\n    }\n\n    const setUpdatedName = name => dispatch(setName(name));\n    const handleUpdateQueryClick = () => {\n        dispatch(updateQuery(currentQuery));\n    };\n    const handleDeleteClick = () => {\n        // eslint-disable-next-line\n        if ( confirm('Are you sure you want to delete this query?') ) {\n            dispatch(deleteQuery(currentQuery.id as string));\n        }\n    }\n\n    return (\n        <div className=\"query-header flex flex-row flex-grow-0 bg-white border-b border-gray-300 p-4\">\n            <div className=\"flex justify-top flex-grow-0 mr-2 py-2\">\n                <Link className=\"block bg-transparent font-bold focus:outline-none\" to=\"/queries\">\n                    <span className=\"text-blue-600 mr-2\">Queries</span>\n                    <span className=\"text-gray-400\"> / </span>\n                </Link>\n            </div>\n            <div className=\"flex flex-grow justify-top\">\n                <input className=\"bg-transparent font-bold focus:outline-none border-b border-transparent focus:border-blue-400 w-full\" type=\"text\" value={currentQuery.name} onChange={e => setUpdatedName(e.target.value)} />\n            </div>\n\n            <div className=\"flex flex-row\">\n                {currentQuery.savedAt && <div className=\"p-2 text-gray-500 text-italic text-sm\">Last saved {currentQuery.savedAt.toString()}</div>}\n                <button className=\"px-4 py-1 rounded-md border border-red-600 text-red-600 text-sm ml-2\" onClick={handleDeleteClick}>Delete Query</button>\n                <button className=\"px-4 py-1 rounded-md border border-blue-600 bg-blue-600 text-white font-bold text-sm ml-2\" onClick={handleUpdateQueryClick}>Save Changes</button>\n            </div>\n        </div>\n    );\n}\n","import React from 'react';\nimport Graph from '../Graph';\nimport InitialNodeSelector from './InitialNodeSelector';\nimport Toolbar from './Toolbar';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../store';\nimport QueryHeader from './Header';\n\nexport default function QueryEditorForm({ labels, types }) {\n    const nodes = useSelector((state: RootState) => state.currentQuery.nodes);\n    const selected = useSelector((state: RootState) => state.currentQuery.selected);\n\n    let graph = <InitialNodeSelector labels={labels} />;\n\n    if (nodes.length) {\n        graph = <Graph />;\n    }\n\n    return (\n        <div className=\"query-stage flex flex-col w-full h-full\">\n            <QueryHeader />\n\n            <div className=\"query-stage flex flex-grow-1 h-full flex-row bg-gray-100\">\n                {graph}\n\n                {selected && <Toolbar labels={labels} types={types} />}\n            </div>\n        </div>\n    );\n}\n","/* eslint-disable */\nimport React, { useEffect } from 'react'\nimport { Redirect } from 'react-router-dom'\n\nimport { useDispatch, useSelector } from 'react-redux'\nimport { RootState } from '../store'\nimport { loadQuery } from '../store/actions';\nimport QueryEditorForm from '../components/querybuilder';\nimport { useSchema } from 'use-neo4j';\n\nexport default function QueryEditor({ match }) {\n    const { loading, labels, types } = useSchema()\n\n    const dispatch = useDispatch()\n\n    const query = useSelector((state: RootState) => state.queries.find(query => query.id === match.params.id))\n\n    useEffect(() => {\n        if (query) dispatch(loadQuery(query))\n    }, [query])\n\n    if ( !query ) {\n        return <Redirect to=\"/\" />\n    }\n\n    if ( loading || !query ) {\n        return (\n            <div className=\"flex flex-col h-screen\">\n                <div className=\"flex flex-col h-full justify-center align-center\">\n                    <div className=\"bg-gray-200 p-4 rounded-md w-auto justify-center mx-auto text-center\" style={{width: '200px'}}>\n                        <p className=\"font-bold mb-4\">Loading Schema...</p>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n\n    return <QueryEditorForm labels={labels} types={types} />\n}\n","import React from 'react'\n\ninterface ButtonProps {\n    size?: 'xs' | 'sm' | 'md' | 'lg' | 'xl',\n    colour?: 'red' | 'green' | 'blue';\n    bg?: 'white';\n    text: string;\n    px?: number;\n    py?: number;\n    onClick: Function;\n    disabled?: boolean;\n}\n\nexport default function Button(props: ButtonProps) {\n    const handleClick = e => {\n        e.preventDefault()\n\n        props.onClick()\n    }\n\n    const classes = `px-${props.px || 4} py-${props.py || 2} rounded-md bg-${props.bg || 'white'} border border-${props.colour || 'blue'}-600 text-${props.colour || 'blue'}-600 text-${props.size}`\n\n    return (\n        <button className={classes} onClick={handleClick} disabled={props.disabled}>\n            {props.text}\n        </button>\n    )\n}","import React from 'react'\n\ninterface ModalProps {\n    title?: string;\n    onClose: () => void;\n\n    children: any;\n}\n\nexport default function Modal(props: ModalProps) {\n    return (\n        <div className=\"fixed inset-0 bg-gray-400 bg-opacity-75 flex flex-col justify-center z-20\">\n            <div className=\"modal-underlay fixed inset-0 bg-gray-400 bg-opacity-75\" onClick={props.onClose} />\n\n            <div className=\"flex flex-row justify-center z-20\">\n                <div className=\"bg-white rounded-lg shadow-lg overflow-y-auto\" style={{minWidth: '480px', maxHeight: '90vh'}}>\n                    <div className=\"flex flex-row justify-between m-4 mb-0 pb-2 text-gray-600 font-bold border-b border-gray-400\">\n                        {props.title && <h2>{props.title}</h2>}\n\n                        <button className=\"text-lg text-gray-400 focus:outline-none\" onClick={props.onClose}>x</button>\n                    </div>\n\n                    <div className=\"p-4 rounded-lg shadow-lg\">\n                        {props.children}\n                    </div>\n                </div>\n            </div>\n\n        </div>\n    )\n}","import React from 'react'\n\nexport default function Column({ columns, children }) {\n    let classes = 'p-2 w-full'\n\n    if ( columns === 1 ) {\n        classes += ' sm:w-1/2 md:w-1/4'\n    }\n    else if ( columns === 2 ) {\n        classes += ' md:w-2/4'\n    }\n    else if ( columns === 3 ) {\n        classes += ' lg:w-3/4'\n    }\n\n    return (\n        <div className={classes}>\n            {children}\n        </div>\n\n    )\n}","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport Tab from './tab'\n\nexport interface CardTab {\n    children?: any;\n    active?: boolean;\n    text?: string;\n    onClick?: () => void;\n}\n\ninterface Action {\n    to: string | Record<string, any>;\n    text: string;\n}\n\ninterface CardProps {\n    title?: string;\n    titleActive?: boolean;\n    onTitleClick?: () => void;\n    tabs?: CardTab[];\n    children?: any;\n    actions?: Action[]\n    expanded?: boolean;\n    rows?: number;\n}\n\nexport default function Card(props: CardProps) {\n    const handleTitleClick = () => {\n        props.onTitleClick && props.onTitleClick()\n    }\n\n    let titleClasses = `card-title text-xl text-gray-700 font-bold pb-4 cursor-pointer border-b-2 ${props.titleActive ? 'border-blue-600' : 'border-transparent'}`\n\n    let cardClasses = `card bg-white  p-4`\n    let containerClasses = `container flex flex-col overflow-auto text-gray-600`\n\n    if ( props.expanded ) {\n        cardClasses += ` absolute inset-0 z-20`\n        containerClasses += ` h-full`\n    }\n    else {\n        cardClasses += ` shadow-sm rounded-md`\n        containerClasses += ` h-64`\n    }\n\n    return (\n        <div className={cardClasses}>\n            <div className={`card-header border-b border-gray-200 pt-2 flex flex-row align-baseline mb-2`}>\n                <h1 className={titleClasses} onClick={handleTitleClick}>{ props.title }</h1>\n                <div className=\"card-spacer flex-grow\"></div>\n\n                {props.tabs?.map((tab, index) => <Tab key={index} {...tab} />)}\n            </div>\n            <div className={containerClasses}>\n                {props.children}\n            </div>\n\n            {props.actions?.length && <div className=\"flex flex-grow-0 justify-end border-t border-gray-200 pt-3\">\n                {props.actions.map(action => <Link key={action.text} to={action.to} className=\"px-4 py-2 bg-white border border-blue-600 text-blue-600 rounded-md hover:bg-blue-100\">\n                    {action.text}\n                </Link>)}\n            </div>}\n        </div>\n    )\n}\n","import React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { RootState } from '../../store';\nimport { reportSources, reportTypes, getHint } from '../../constants';\nimport Button from '../forms/button';\n\n\nexport default function ReportForm({ dashboard, report, submitText, onSubmit }) {\n    const queries = useSelector((state: RootState) => state.queries);\n\n    const [name, setName] = useState<string>(report.name || '');\n    const [columns, setColumns] = useState<number | string>(report.columns || 1);\n    const [rows, setRows] = useState<number | string>(report.rows || 1);\n    const [type, setType] = useState<string>(report.type || reportTypes[0].value);\n    const [source, setSource] = useState<string>(report.source || reportSources[0].value);\n    const [query, setQuery] = useState<string>(report.query || '');\n    const [database, setDatabase] = useState<string>(report.database || '');\n\n    const handleSubmit = () => {\n        // Validate Query Type\n        if (name === '' || query === '' || (source === 'query' && !queries.find(q => q.id === query)) || !parseInt(rows.toString()) || !parseInt(columns.toString())) {\n            console.log('invalid payload');\n            return;\n        }\n\n        onSubmit(dashboard, name, database, type, source, query, columns, rows);\n    };\n\n    return (\n        <form className=\"pr-2\">\n            <div>\n                <label htmlFor=\"name\" className=\"block font-bold m-2\">Name</label>\n                <input className=\"w-full rounded-md p-2 border border-gray-400 bg-white text-gray-600\" id=\"name\" type=\"text\" value={name} onChange={e => setName(e.target.value)} />\n            </div>\n            <div>\n                <label htmlFor=\"type\" className=\"block font-bold m-2\">Type</label>\n                <select className=\"w-full rounded-md p-2 border border-gray-400 bg-white text-gray-600\" id=\"type\" value={type} onChange={e => setType(e.target.value)}>\n                    {reportTypes.map(type => <option key={type.key} value={type.value}>{type.text}</option>)}\n                </select>\n\n                <div className=\"p-2 mb-2 text-gray-600 text-sm\">{getHint(type)}</div>\n            </div>\n            <div>\n                <label htmlFor=\"database\" className=\"block font-bold m-2\">Database</label>\n                <input className=\"w-full rounded-md p-2 border border-gray-400 bg-white text-gray-600\" id=\"database\" type=\"text\" placeholder=\"(Default database)\" value={database} onChange={e => setDatabase(e.target.value)} />\n                <div className=\"p-2 mb-2 text-gray-600 text-sm\">Leave blank to use the default database.</div>\n            </div>\n            <div>\n                <label htmlFor=\"columns\" className=\"block font-bold m-2\">Columns</label>\n                <input className=\"w-full rounded-md p-2 border border-gray-400 bg-white text-gray-600\" id=\"columns\" type=\"number\" min={1} max={4} value={columns} onChange={e => setColumns(parseInt(e.target.value) || '')} />\n            </div>\n            {/* <div>\n                <label htmlFor=\"columns\" className=\"block font-bold m-2\">Rows</label>\n                <input className=\"w-full rounded-md p-2 border border-gray-400 bg-white text-gray-600\" id=\"rows\" type=\"number\" min={1} max={2} value={rows} onChange={e => setRows(parseInt(e.target.value) || '')} />\n            </div> */}\n            <div>\n                <label htmlFor=\"source\" className=\"block font-bold m-2\">Source</label>\n                <select className=\"w-full rounded-md p-2 border border-gray-400 bg-white text-gray-600\" id=\"source\" value={source} onChange={e => setSource(e.target.value)}>\n                    {reportSources.map(source => <option key={source.key} value={source.value}>{source.text}</option>)}\n                </select>\n            </div>\n            <div>\n                <label htmlFor=\"query\" className=\"block font-bold m-2\">Query</label>\n                {source === 'cypher' && <textarea className=\"w-full rounded-sm p-2 border border-gray-400 bg-white text-gray-600 font-mono focus:outline-none focus:border-blue-600\" id=\"query\" rows={8} value={query} onChange={e => setQuery(e.target.value)} />}\n                {source === 'query' && <select className=\"w-full rounded-sm p-2 border border-gray-400 bg-white text-gray-600\" value={query} onChange={e => setQuery(e.target.value)}>\n                    <option></option>\n                    {queries.map(query => <option key={query.id} value={query.id}>{query.name}</option>)}\n                </select>}\n                {source === 'query' && queries.find(q => query === q.id) && <Link className=\"mt-2 px-2 text-xs text-blue-600\" to={`/queries/${query}`}>Edit Query</Link>}\n            </div>\n\n            <div className=\"mt-4\">\n                <Button onClick={handleSubmit} text={submitText} />\n            </div>\n        </form>\n    );\n}\n","import React, { useEffect, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { updateReport, deleteReport } from '../../store/actions';\nimport { TYPE_BAR, TYPE_LINE, TYPE_METRIC, TYPE_TABLE, TYPE_STACKED_BAR, TYPE_HORIZONTAL_BAR, TYPE_HORIZONTAL_STACKED_BAR, TYPE_RADAR, TYPE_FUNNEL, TYPE_HORIZONTAL_FUNNEL, TYPE_BUMP, TYPE_AREA_BUMP, TYPE_CHORD, TYPE_BUBBLE, TYPE_CALENDAR, TYPE_HEAT_MAP, TYPE_NETWORK, TYPE_SANKEY, reportTypes, TYPE_VERTICAL_SANKEY } from '../../constants';\nimport Card, { CardTab } from '../card';\nimport MetricReport from './metric';\nimport TableReport from './table';\nimport LineReport from './line';\nimport BarReport from './bar';\nimport ReportForm from \"./ReportForm\";\nimport RadarReport from './radar';\nimport FunnelReport from './funnel';\nimport BumpReport from './bump';\nimport ChordReport from './chord';\nimport AreaBumpReport from './areaBump';\nimport BubbleReport from './bubble';\nimport CalendarReport from './calendar';\nimport HeatMap from './heatMap';\nimport NetworkReport from './network';\nimport SankeyReport from './sankey';\nimport { ReportProps, useReportResults } from '../../utils';\nimport Loading from '../Loading';\nimport ReportError from './error';\n\n\nfunction ExpandIcon({ onClick }) {\n    return (\n        <svg width=\"24px\" height=\"24px\" viewBox=\"0 0 24 24\" onClick={onClick} className=\"expand w-4 h-4 mt-2 ml-2\">\n            <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                <g stroke=\"#718096\" strokeWidth=\"1.5\">\n                    <line x1=\"9.75\" y1=\"14.248\" x2=\"0.75\" y2=\"23.248\" id=\"Shape\"></line>\n                    <polyline id=\"Shape\" points=\"23.25 7.498 23.25 0.748 16.5 0.748\"></polyline>\n                    <polyline id=\"Shape\" points=\"0.75 16.498 0.75 23.248 7.5 23.248\"></polyline>\n                    <line x1=\"23.25\" y1=\"0.748\" x2=\"14.25\" y2=\"9.748\" id=\"Shape\"></line>\n                </g>\n            </g>\n        </svg>\n    )\n}\n\nfunction ContractIcon({ onClick }) {\n    return (\n        <svg width=\"24px\" height=\"24px\" viewBox=\"0 0 24 24\" onClick={onClick} className=\"contract w-4 h-4 mt-2 ml-2\">\n            <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                <g stroke=\"#718096\" strokeWidth=\"1.5\">\n                    <line x1=\"23.25\" y1=\"0.748\" x2=\"14.25\" y2=\"9.748\" id=\"Shape\"></line>\n                    <polyline id=\"Shape\" points=\"9.75 20.998 9.75 14.248 3 14.248\"></polyline>\n                    <polyline id=\"Shape\" points=\"14.25 2.998 14.25 9.748 21 9.748\"></polyline>\n                    <line x1=\"9.75\" y1=\"14.248\" x2=\"0.75\" y2=\"23.248\" id=\"Shape\"></line>\n                </g>\n            </g>\n        </svg>\n    )\n}\n\n\nexport default function Report(props: ReportProps) {\n    const dispatch = useDispatch();\n\n    // Tab State\n    const [ expanded, setExpanded ] = useState<boolean>(false)\n    const [ tab, setTab ] = useState<string>('report');\n\n    const handleDelete = () => {\n        // eslint-disable-next-line\n        if ( confirm('Are you sure you want to delete this report?') ) {\n            dispatch(deleteReport(props.id));\n        }\n    };\n\n    const handleUpdateReport = (dashboard, name, database, type, source, query, columns, rows) => {\n        dispatch(updateReport(props.id, dashboard, name, database, type, source, query, columns, rows, props.order));\n\n        setTab('report');\n    };\n\n    const expandContract: CardTab = expanded\n        ? { children: <ContractIcon onClick={() => setExpanded(false)} /> }\n        : { children: <ExpandIcon onClick={() => setExpanded(true)} /> }\n\n    const tabs = [\n        { text: 'Edit', active: tab === 'edit', onClick: () => setTab('edit') },\n        { text: 'Delete', onClick: () => handleDelete() },\n        expandContract\n    ];\n\n    // Data\n    const { loading, error, first, records, run, params } = useReportResults(props)\n\n    // Re-run query if it changes\n    useEffect(() => {\n        run(params, props.database)\n        // eslint-disable-next-line\n    }, [  props.query, props.database ])\n\n    let content = <pre>{JSON.stringify(props, null, 2)}</pre>;\n\n\n    try {\n        if (tab === 'edit') {\n            content = <ReportForm dashboard={props.dashboard} report={props} submitText=\"Update Report\" onSubmit={handleUpdateReport} />;\n        }\n        else if ( loading ) {\n            content = <Loading />\n        }\n        else if ( error ) {\n            content = ReportError({ error })\n        }\n        else if ( !records?.length ) {\n            content = <div className=\"font-bold rounded-md text-green-600\">\n                No results were returned for this query\n            </div>\n        }\n        else if (props.type === TYPE_METRIC) {\n            content = <MetricReport records={records} first={first} />;\n        }\n        else if (props.type === TYPE_TABLE) {\n            content = <TableReport records={records} first={first} />;\n        }\n        else if (props.type === TYPE_LINE) {\n            content = <LineReport records={records} first={first} />;\n        }\n        else if (props.type === TYPE_BAR) {\n            content = <BarReport records={records} first={first} />;\n        }\n        else if (props.type === TYPE_STACKED_BAR) {\n            content = <BarReport records={records} first={first} stacked={true} />;\n        }\n        else if (props.type === TYPE_HORIZONTAL_BAR) {\n            content = <BarReport records={records} first={first} layout=\"horizontal\" />;\n        }\n        else if (props.type === TYPE_HORIZONTAL_STACKED_BAR) {\n            content = <BarReport records={records} first={first} stacked={true} layout=\"horizontal\" />;\n        }\n        else if (props.type === TYPE_HORIZONTAL_STACKED_BAR) {\n            content = <BarReport records={records} first={first} stacked={true} layout=\"horizontal\" />;\n        }\n        else if (props.type === TYPE_RADAR) {\n            content = <RadarReport records={records} first={first} />;\n        }\n        else if (props.type === TYPE_FUNNEL) {\n            content = <FunnelReport records={records} first={first} />;\n        }\n        else if (props.type === TYPE_HORIZONTAL_FUNNEL) {\n            content = <FunnelReport records={records} first={first} layout=\"horizontal\" />;\n        }\n        else if (props.type === TYPE_BUMP) {\n            content = <BumpReport records={records} first={first} />;\n        }\n        else if (props.type === TYPE_AREA_BUMP) {\n            content = <AreaBumpReport records={records} first={first} />;\n        }\n        else if (props.type === TYPE_CHORD) {\n            content = <ChordReport records={records} first={first} />;\n        }\n        else if (props.type === TYPE_BUBBLE) {\n            content = <BubbleReport records={records} first={first} />;\n        }\n        else if (props.type === TYPE_CALENDAR) {\n            content = <CalendarReport records={records} first={first} />;\n        }\n        else if (props.type === TYPE_HEAT_MAP) {\n            content = <HeatMap records={records} first={first} />;\n        }\n        else if (props.type === TYPE_NETWORK) {\n            content = <NetworkReport records={records} first={first} />;\n        }\n        else if (props.type === TYPE_SANKEY) {\n            content = <SankeyReport records={records} first={first} />;\n        }\n        else if (props.type === TYPE_VERTICAL_SANKEY) {\n            content = <SankeyReport records={records} first={first} layout=\"vertical\" />;\n        }\n        else {\n            const report = reportTypes.find(report => report.value === props.type)\n\n            if ( report ) {\n                const componentProps = report?.props || {}\n                content = report.component({ records, first, ...componentProps,  })\n            }\n        }\n    }\n    catch (error) {\n        content = ReportError({ error })\n    }\n\n    return (\n        <Card title={props.name} titleActive={tab === 'report'} tabs={tabs} onTitleClick={() => setTab('report')} expanded={expanded} rows={props.rows}>\n            {content}\n        </Card>\n    );\n}\n","import React from 'react'\nimport Button from './forms/button'\n\nexport default function ColdStart({ title, buttonText, children, onButtonClick  }) {\n    return (\n        <div className=\"flex flex-col w-full\">\n            <div className=\"p-12 bg-white w-auto m-auto\">\n                <h2 className=\"font-bold text-xl text-center text-blue-600\">{title}</h2>\n                {children}\n                <div className=\"text-center\">\n                    <Button size=\"md\" colour=\"blue\" text={buttonText} onClick={onButtonClick} />\n                </div>\n            </div>\n        </div>\n    )\n}","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport Button from './forms/button'\n\nexport default function Header(props) {\n\n    const { sectionText, sectionLink, pageTitle, buttons, savedAt, children } = props\n\n    return (\n        <div className=\"query-header flex flex-row flex-grow-0 bg-white border-b border-gray-300 p-4 mb-4\">\n                <div className=\"flex justify-top flex-grow-0 mr-2 py-2\">\n                    <Link className=\"block bg-transparent font-bold focus:outline-none\" to={sectionLink}>\n                        <span className=\"text-blue-600 mr-2\">\n                        {sectionText}\n                        </span>\n                        {pageTitle && <span className=\"text-gray-400\"> / </span>}\n                    </Link>\n                </div>\n                <div className=\"flex justify-top font-bold py-2\">\n                    {pageTitle}\n                </div>\n                {children}\n\n                <div className=\"flex flex-grow\"></div>\n\n                <div className=\"ml-2 flex flex-row\">\n                    {savedAt && <div className=\"p-2 text-gray-500 text-italic text-sm\">Last saved {savedAt.toString()}</div>}\n                    {buttons && buttons.map(button => <div className=\"ml-2\" key={button.text}><Button  size=\"sm\" colour={button.colour || 'blue'} text={button.text} onClick={button.onClick} /></div>)}\n\n                </div>\n            </div>\n    )\n}","import React, { useState, useEffect } from \"react\";\n\nexport const postFeedback = (body) => {\n    const formData = new URLSearchParams();\n    formData.append(\"project\", \"@graphapps/charts\")\n    formData.append(\"helpful\", body.helpful)\n    formData.append(\"url\", `@graphapps/charts${body.page}`)\n\n    if (body.reason) {\n        formData.append(\"reason\", body.reason)\n    }\n\n    if (body.moreInformation) {\n        formData.append(\"moreInformation\", body.moreInformation)\n    }\n\n    return fetch('https://uglfznxroe.execute-api.us-east-1.amazonaws.com/dev/Feedback', {\n        method: 'post',\n        body: formData,\n        mode: \"no-cors\"\n    }).then(function (response) {\n        return response;\n    }).then(function (data) {\n        console.log(data)\n    }).catch(error => {\n        console.log(error)\n    });\n}\n\nconst reasons = {\n    missing: 'It has missing information',\n    'hard-to-follow': 'It’s hard to use or confusing',\n    inaccurate: 'It’s inaccurate, out of date, or doesn’t work',\n    other: 'Something else'\n}\n\nexport const FeedbackForm = (props) => {\n    const [ helpful, setHelpful ] = useState<boolean | undefined>(false)\n    const [ reason, setReason ] = useState('missing')\n    const [ moreInformation, setMoreInformation ] = useState('')\n\n    const [page, setPage] = useState(props.page)\n    useEffect(() => {\n        setPage(props.page);\n        setHelpful(undefined)\n    }, [props.page])\n\n\n    let colour = 'blue'\n    let view\n\n    const handleSendFeedback = () => {\n        postFeedback({ page, helpful, reason, moreInformation });\n\n        setReason('missing')\n        setMoreInformation('')\n\n        setHelpful(true)\n    }\n\n    if ( helpful === undefined ) {\n        view = (\n            <div className=\"flex p-2 font-bold\">\n                <h1 className=\"flex-grow font-bold mb-2\">Is this Graph App Useful?</h1>\n\n                <svg width=\"22px\" height=\"22px\" viewBox=\"0 0 22 22\" role=\"button\" className=\"no stroke-current ml-2\" aria-label=\"No, this page isn't helpful\" onClick={() => setHelpful(false)}>\n                    <g fill=\"transparent\">\n                    <path d=\"M6.25,15.8333333 C6.25,13.7622655 7.92893219,12.0833333 10,12.0833333 C12.0710678,12.0833333 13.75,13.7622655 13.75,15.8333333\"></path>\n                    <circle cx=\"10\" cy=\"10\" r=\"9.58333333\"></circle>\n                    <path d=\"M12.5,4.58333333 C12.8934466,4.05873783 13.5109223,3.75 14.1666667,3.75 C14.822411,3.75 15.4398867,4.05873783 15.8333333,4.58333333\"></path>\n                    <line x1=\"4.58333333\" y1=\"7.91666667\" x2=\"7.08333333\" y2=\"7.91666667\"></line>\n                    <path d=\"M7.08333333,8.54166667 C6.96827401,8.54166667 6.875,8.44839266 6.875,8.33333333 C6.875,8.21827401 6.96827401,8.125 7.08333333,8.125 C7.19839266,8.125 7.29166667,8.21827401 7.29166667,8.33333333 C7.29166667,8.44839266 7.19839266,8.54166667 7.08333333,8.54166667\"></path>\n                    <line x1=\"12.9166667\" y1=\"7.91666667\" x2=\"15.4166667\" y2=\"7.91666667\"></line>\n                    <path d=\"M15.4166667,8.54166667 C15.3016073,8.54166667 15.2083333,8.44839266 15.2083333,8.33333333 C15.2083333,8.21827401 15.3016073,8.125 15.4166667,8.125 C15.531726,8.125 15.625,8.21827401 15.625,8.33333333 C15.625,8.44839266 15.531726,8.54166667 15.4166667,8.54166667\"></path>\n                    <path d=\"M4.16666667,4.58333333 C4.5601133,4.05873783 5.17758895,3.75 5.83333333,3.75 C6.48907772,3.75 7.10655337,4.05873783 7.5,4.58333333\"></path>\n                    </g>\n                </svg>\n                <svg width=\"22px\" height=\"22px\" viewBox=\"0 0 22 22\" role=\"button\" className=\"yes stroke-current ml-2\" aria-label=\"Yes, this page is helpful\" onClick={() => { setHelpful(true); postFeedback({ page, helpful: true }) }}>\n                    <g fill=\"transparent\">\n                        <circle cx=\"10\" cy=\"10\" r=\"9.58333333\"></circle>\n                        <path d=\"M5.41666667,8.125 C5.53172599,8.125 5.625,8.21827401 5.625,8.33333333 C5.625,8.44839266 5.53172599,8.54166667 5.41666667,8.54166667 C5.30160734,8.54166667 5.20833333,8.44839266 5.20833333,8.33333333 C5.20833333,8.21827401 5.30160734,8.125 5.41666667,8.125\"></path>\n                        <path d=\"M14.5833333,8.125 C14.468274,8.125 14.375,8.21827401 14.375,8.33333333 C14.375,8.44839266 14.468274,8.54166667 14.5833333,8.54166667 C14.6983927,8.54166667 14.7916667,8.44839266 14.7916667,8.33333333 C14.7916667,8.21827401 14.6983927,8.125 14.5833333,8.125\"></path>\n                        <path d=\"M13.2275,12.9166657 C13.4853075,12.9162808 13.7287776,13.035241 13.8869095,13.2388563 C14.0450415,13.4424715 14.1000278,13.7078123 14.0358333,13.9575 C13.562901,15.7999679 11.9021969,17.0882321 10,17.0882321 C8.09780311,17.0882321 6.43709903,15.7999679 5.96416667,13.9575 C5.89997223,13.7078123 5.95495852,13.4424715 6.11309045,13.2388563 C6.27122239,13.035241 6.51469246,12.9162808 6.7725,12.9166657 L13.2275,12.9166657 Z\"></path>\n                    </g>\n                </svg>\n            </div>\n        )\n    }\n    else if ( helpful === false ) {\n        colour = 'red'\n\n        view = (\n            <div className=\"p-2\">\n                <div className=\"flex\">\n                    <h1 className=\"flex-grow font-bold mb-2\">We're sorry to hear that...</h1>\n\n                    <svg width=\"14px\" height=\"22px\" viewBox=\"0 0 22 22\" role=\"button\" className=\"cancel stroke-current\" aria-label=\"Cancel Feedback\" onClick={() => setHelpful(undefined)}><line x1=\"19.5833333\" y1=\"0.416666667\" x2=\"0.416666667\" y2=\"19.5833333\"></line><line x1=\"19.5833333\" y1=\"19.5833333\" x2=\"0.416666667\" y2=\"0.416666667\"></line></svg>\n                </div>\n\n                <div className=\"bg-white p-2 -mx-2 rounded-md\">\n                    <p className=\"mb-4 font-bold text-sm\">How could we improve this Graph App?</p>\n\n                    {Object.entries(reasons).map(([ key, value ]) => <div className=\"mb-2 text-sm\" key={key}>\n                        <input className=\"mr-2 h-4 w-4\" id={`reason-${key}`} name=\"reason\" type=\"radio\" value={key} checked={reason === key} onChange={e => setReason(e.currentTarget.value)} />\n                        <label htmlFor={`reason-${key}`}>{value}</label>\n                    </div>)}\n\n                    <div className=\"my-2 text-sm\">\n                        <label htmlFor=\"more\" className=\"font-bold mb-2\">More information</label>\n\n                        <textarea id=\"more\" rows={3} className=\"border border-red-300 text-red-800 text-sm w-full p-2 rounded-sm outline-none focus:border-red-400\" value={moreInformation} onChange={e => setMoreInformation(e.target.value)}>{moreInformation}</textarea>\n                    </div>\n\n                    <div className=\"flex justify-between\">\n                        <button className=\"px-4 py-1 border border-red-600 bg-red-600 text-white rounded-sm text-sm\" onClick={() => handleSendFeedback()}>Submit Feedback</button>\n                        <button className=\"px-4 py-1 border border-red-600 text-red-600 rounded-sm text-sm\" onClick={() => setHelpful(undefined)}>Skip</button>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n    else if ( helpful === true ) {\n        colour = 'green'\n\n        view = (\n            <div className=\"flex p-2 pb-4 font-bold\">\n                Great! Thank you for your feedback!\n            </div>\n        )\n    }\n\n\n\n    return (\n        <div className={`fixed bottom-0 mx-4 -mb-2 p-2 rounded-md shadow-md bg-${colour}-200 text-${colour}-800`} style={{width: '320px', right: '60px'}}>\n            {view}\n        </div>\n    )\n}\n","/* eslint-disable */\nimport React, { useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { Link, Redirect } from 'react-router-dom'\nimport { RootState } from '../store'\nimport { addReport, deleteDashboard, reorderReports, updateDashboard } from '../store/actions'\nimport Button from '../components/forms/button'\nimport Modal from '../components/modal'\nimport Column from '../components/grid/Column'\nimport Report from '../components/reports/Report'\nimport ReportForm from '../components/reports/ReportForm'\nimport ColdStart from '../components/ColdStart'\nimport Header from '../components/header'\nimport { FeedbackForm } from '../components/feedback/FeedbackForm'\nimport { Report as ReportInterface } from '../store/reducers/dashboards'\n\nfunction OrderEditFormItem({ report, index, length, handleUpClick, handleDownClick }) {\n    return (\n        <li className=\"flex justify-between p-2 mb-2 border-b border-gray-200\" key={report.id}>\n            <span className=\"text-xs text-gray-500 inline-block mr-2\">\n                {report.order}\n            </span>\n            <span className=\"flex-grow\">\n                {report.name}\n            </span>\n\n            <button onClick={() => handleUpClick(report)} className={`cursor-pointer outline-none ml-4 ${index > 0 ? 'text-blue-600' : 'text-gray-300'}`}>&uarr;</button>\n            <button onClick={() => handleDownClick(report)} className={`cursor-pointer outline-none ml-4 ${index < length -1 ? 'text-blue-600' : 'text-gray-300'}`}>&darr;</button>\n        </li>\n    )\n}\n\ninterface OrderEditFormProps {\n    reports: ReportInterface[],\n    onClose: () => void\n}\n\nfunction OrderEditForm(props: OrderEditFormProps) {\n    const dispatch = useDispatch()\n    const length = props.reports.length\n    const [ reports, setReports ] = useState<ReportInterface[]>(props.reports)\n\n    const handleUpClick = (report) => {\n        const index = reports.findIndex(row => row.id === report.id)\n\n        const newOrder = report.order - 1\n\n        // Don't move top item\n        if (newOrder == -1 ) return;\n\n        // Extract the current item\n        const extracted = reports.splice(index, 1)[0]\n        extracted.order = newOrder\n\n        // Take a copy of reports and fix the orders\n        const newReports = reports.slice(0)\n            .map(row => ({\n                ...row,\n                order: row.order <= newOrder ? row.order + 1 : row.order\n            }))\n            // ... and add the extracted item back in\n            .concat(extracted)\n\n        // Sort them items by their order\n        newReports.sort((a, b) => a.order < b.order ? -1 : 1)\n\n        // Reset the state\n        setReports(newReports)\n    }\n\n    const handleDownClick = (report) => {\n        const index = reports.findIndex(row => row.id === report.id)\n\n        // zero-indexed - don't add anything to the order\n        const newOrder = report.order\n\n        // Don't move bottom item\n        if (newOrder === length  ) return;\n\n        // Extract the current item\n        const extracted = reports.splice(index, 1)[0]\n        extracted.order = newOrder\n\n        // Take a copy of reports and fix the orders\n        const newReports = reports.slice(0)\n            .map(row => ({\n                ...row,\n                order: row.order > newOrder ? row.order - 1 : row.order\n            }))\n            // ... and add the extracted item back in\n            .concat(extracted)\n\n        // Sort them items by their order\n        newReports.sort((a, b) => a.order < b.order ? -1 : 1)\n\n        // Reset the state\n        setReports(newReports)\n    }\n\n    const handleSaveClick = () => {\n        dispatch(reorderReports(reports))\n        props.onClose()\n    }\n\n    return (\n        <Modal title='Edit Order' onClose={props.onClose}>\n            <ul>\n                <li className=\"flex\">\n                    <strong></strong>\n                </li>\n                {reports.map((report, index) => <OrderEditFormItem index={index} length={length} key={report.id} report={report} handleUpClick={handleUpClick} handleDownClick={handleDownClick} /> )}\n            </ul>\n\n            <div className=\"mt-4\">\n                <Button colour=\"blue\" onClick={handleSaveClick} text=\"Save Order\" />\n                {' '}\n                <Button colour=\"red\" onClick={props.onClose} text=\"Cancel\" />\n            </div>\n        </Modal>\n    )\n}\n\nexport default function Dashboard({ match }) {\n    const dispatch = useDispatch()\n    const dashboard = useSelector((state: RootState) => state.dashboards.dashboards.find(row => row.id === match.params.id))\n    const reports = useSelector((state: RootState) => state.dashboards.reports.filter(row => row.dashboard === match.params.id))\n\n    const [ showEditOrder, setShowEditOrder ] = useState<boolean>(false)\n\n    // Sort reports by `order`\n    reports.sort((a, b) => a.order < b.order ? -1 : 1)\n\n    if (!dashboard) {\n        return <Redirect to=\"/\" />\n    }\n\n    const [name, setName] = useState(dashboard.name)\n    const [description, setDescription] = useState(dashboard.description)\n\n    const [ showAddReport, setShowAddReport ] = useState<boolean>(false)\n\n    const handleDeleteClick = () => {\n        if (confirm('Are you sure you want to delete this dashboard?')) {\n            dispatch(deleteDashboard(match.params.id))\n        }\n    }\n\n    const handleUpdateClick = () => {\n        dispatch(updateDashboard(match.params.id, name, description))\n    }\n\n    const handleAddReport = (dashboard, name, database, type, source, query, columns) => {\n        dispatch( addReport(dashboard, name, database, type, source, query, columns) )\n\n        setShowAddReport(false)\n    }\n\n    const handleShowAddReportClick = () => setShowAddReport(true)\n    const handleShowEditOrderClick = () => setShowEditOrder(true)\n\n    return (\n        <div className=\"flex flex-col w-full\">\n            <Header\n                sectionLink=\"/dashboards\"\n                sectionText=\"Dashboards\"\n                pageTitle={dashboard.name}\n                savedAt={dashboard.savedAt}\n                buttons={[\n                    { colour: 'blue', text: 'Add Report', onClick: handleShowAddReportClick, },\n                    { colour: 'blue', text: 'Edit Order', onClick: handleShowEditOrderClick, },\n                    { colour: 'red', text: 'Delete Dashboard', onClick: handleDeleteClick, },\n                ]}\n            />\n\n            {showEditOrder && <OrderEditForm reports={reports} onClose={() => setShowEditOrder(false)} />}\n\n            <div className=\"container mx-auto pb-16\">\n                <div className=\"px-8 py-8\">\n                {showAddReport && <Modal title=\"Add Report\" onClose={() => setShowAddReport(false)}><ReportForm dashboard={dashboard.id} submitText=\"Add Report\" onSubmit={handleAddReport} report={{}} /></Modal>}\n                    <input type=\"text\" className=\"font-bold text-gray-800 py-2 mb-2 bg-transparent border-b border-transparent focus:border-blue-400 focus:outline-none w-full text-xl\" value={name} onChange={e => setName(e.target.value)} />\n\n                    <div className=\"flex\">\n\n                        <input className=\"text-gray-600 bg-transparent border-b border-transparent focus:border-blue-400 pb-1 focus:outline-none flex-grow\" type=\"text\" value={description} onChange={e => setDescription(e.target.value)} />\n\n                        {(dashboard.name !== name || dashboard.description !== description) && <button className=\"px-2 py-1 text-xs rounded-md border border-green-600 text-green-600 flex-grow-0 ml-2\" onClick={handleUpdateClick}>Save Changes</button>}\n                    </div>\n                </div>\n\n                <div className=\"flex flex-row flex-wrap\">\n                    {reports.map(report => <Column columns={report.columns} key={report.id}>\n                        <Report {...report} />\n                    </Column>)}\n\n                    {!reports.length && <ColdStart\n                        title=\"Let's get exploring!\"\n                        buttonText=\"Add Report\"\n                        onButtonClick={handleShowAddReportClick}\n                    >\n                        <p className=\"mx-auto my-8 text-center\">You can add a report by clicking the <strong>Add Report</strong> button below</p>\n                    </ColdStart>}\n                </div>\n            </div>\n\n            <FeedbackForm page={match.path} />\n        </div>\n    )\n}\n","/* eslint-disable */\nimport React, { useEffect, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport { RootState } from '../store'\nimport { addDashboard, deleteDashboard } from '../store/actions'\nimport Button from '../components/forms/button'\nimport Modal from '../components/modal'\nimport Card from '../components/card'\nimport Column from '../components/grid/Column'\nimport ColdStart from '../components/ColdStart'\nimport Header from '../components/header'\nimport { FeedbackForm } from '../components/feedback/FeedbackForm'\n\n\nexport default function Dashboards({ history, match }) {\n    const dispatch = useDispatch()\n    // @ts-ignore\n    const dashboards = useSelector((n: RootState) => n.dashboards.dashboards)\n\n    const [ showAddForm, setShowAddForm ] = useState<boolean>(false)\n    const [ name, setName ] = useState<string>('')\n    const [ description, setDescription ] = useState<string>('')\n\n    const handleShowAddClick = () => {\n        setShowAddForm(true)\n    }\n    const handleAddDashboardClick = () => {\n        if ( name !== '' ) {\n            dispatch(addDashboard(name, description))\n            setName('')\n            setDescription('')\n            setShowAddForm(false)\n        }\n    }\n\n    const handleDeleteDashboardClick = id => {\n        if ( confirm('Are you sure you want to delete this dashboard?') ) {\n            dispatch(deleteDashboard(id))\n        }\n    }\n\n    const goToDashboard = id => history.push(`/dashboards/${id}`)\n\n    return (\n        <div className=\"flex flex-col w-full\">\n            <Header\n                sectionLink=\"/dashboards\"\n                sectionText=\"Dashboards\"\n                buttons={[\n                    { colour: 'blue', text: 'Add Dashboard', onClick: handleShowAddClick, },\n                ]}\n            />\n\n            <div className=\"w-full\">\n                <div className=\"container m-auto\">\n                    <div className=\"flex flex-row flex-wrap pt-8\">\n                        {dashboards && dashboards.map(dashboard => <Column columns={1} key={dashboard.id}>\n                            <Card\n                                title={dashboard.name}\n                                onTitleClick={() => goToDashboard(dashboard.id)}\n                                tabs={ [ { text: 'Delete', onClick: () => handleDeleteDashboardClick(dashboard.id) } ] }\n                                actions={ [ {text: 'View Dashboard', to: `/dashboards/${dashboard.id}`} ] }\n                            >\n                                    {dashboard.description}\n                            </Card>\n                        </Column>)}\n\n                        {!dashboards || !dashboards.length && <ColdStart\n                            title=\"Let's get exploring!\"\n                            buttonText=\"Add Dashboard\"\n                            onButtonClick={handleShowAddClick}\n                        >\n                            <p className=\"mx-auto my-8 text-center\">You can add a new dashboard by clicking the <strong>Add Dashboard</strong> button below</p>\n                        </ColdStart>}\n                    </div>\n                </div>\n            </div>\n\n            {showAddForm && <Modal title=\"Add Dashboard\" onClose={() => setShowAddForm(false)}>\n                <form>\n                    <div>\n                        <label htmlFor=\"name\" className=\"block font-bold m-2\">Name</label>\n                        <input className=\"w-full rounded-md p-2 border border-gray-400 bg-white text-gray-600\" type=\"text\" onChange={e => setName(e.target.value)} placeholder=\"name\" />\n                    </div>\n                    <div>\n                        <label htmlFor=\"description\" className=\"block font-bold m-2\">Description</label>\n                        <input className=\"w-full rounded-md p-2 border border-gray-400 bg-white text-gray-600\" type=\"text\" onChange={e => setDescription(e.target.value)} placeholder=\"description\" />\n                    </div>\n\n                    <div className=\"mt-4\">\n                        <Button text=\"Add Dashboard\" onClick={handleAddDashboardClick} />\n                    </div>\n                </form>\n            </Modal>\n            }\n\n            <FeedbackForm page={match.path} />\n        </div>\n    )\n}\n","/* eslint-disable */\nimport React, { useState } from 'react'\nimport { Link } from 'react-router-dom'\n\nimport { useDispatch, useSelector } from 'react-redux'\nimport { RootState } from '../store'\nimport { addQuery, deleteQuery } from '../store/actions';\nimport Button from '../components/forms/button'\nimport Modal from '../components/modal';\nimport Card from '../components/card';\nimport Column from '../components/grid/Column';\nimport ColdStart from '../components/ColdStart';\n\nexport default function Queries({ history }) {\n    const dispatch = useDispatch()\n    const queries = useSelector((state: RootState) => state.queries)\n\n    const [showAddForm, setShowAddForm] = useState<boolean>(false)\n    const [name, setName] = useState<string>('')\n\n    const handleNameChange = e => setName(e.target.value)\n\n    const handleAddQuery = () => {\n        if (name !== '') {\n            dispatch(addQuery(name))\n            setName('')\n            setShowAddForm(false)\n        }\n    }\n    const handleShowAddFormClick = () => setShowAddForm(true)\n    const handleHideAddFormClick = () => setShowAddForm(false)\n\n    const handleDeleteQueryClick = id => {\n        if (confirm('Are you sure you want to delete this query and all subsequent reports?')) {\n            dispatch(deleteQuery(id))\n        }\n    }\n\n    const goToQuery = id => history.push(`/queries/${id}`)\n\n    return (\n        <div className=\"flex flex-col w-full\">\n            <div className=\"query-header flex flex-row flex-grow-0 bg-white border-b border-gray-300 p-4 mb-4\">\n                <div className=\"flex justify-top flex-grow-0 mr-2 py-2\">\n                    <Link className=\"block bg-transparent text-lg font-bold focus:outline-none\" to=\"/queries\">\n                        <span className=\"text-blue-600 mr-2\">\n                            Queries\n                        </span>\n                    </Link>\n                </div>\n\n                <div className=\"flex flex-grow\"></div>\n\n                <div className=\"ml-2\">\n                    <Button size=\"sm\" colour=\"blue\" text=\"Add Query\" onClick={handleShowAddFormClick} />\n                </div>\n            </div>\n            <div className=\"w-full\">\n                <div className=\"container m-auto\">\n                    <div className=\"flex flex-row flex-wrap pt-8\">\n\n                        {queries.map(query => (\n                            <Column columns={1} key={query.id}>\n                                <Card\n                                    title={query.name}\n                                    onTitleClick={() => goToQuery(query.id)}\n                                    tabs={[{ text: 'Delete', onClick: () => handleDeleteQueryClick(query.id) }]}\n                                    actions={ [ {text: 'View Query', to: `/queries/${query.id}`} ] }\n                                />\n                            </Column>\n                        ))}\n\n                        {!queries.length && <ColdStart\n                            title=\"Let's get exploring!\"\n                            buttonText=\"Add Query\"\n                            onButtonClick={handleShowAddFormClick}\n                        >\n                            <p className=\"mx-auto my-8 text-center\">You can add a new query by clicking the <strong>Add Query</strong> button below</p>\n                        </ColdStart>}\n                    </div>\n                </div>\n            </div>\n\n            {showAddForm && <Modal title=\"Add Query\" onClose={handleHideAddFormClick}>\n                <form>\n                    <div>\n                        <label htmlFor=\"description\" className=\"block font-bold m-2\">Query Name</label>\n                        <input className=\"w-full rounded-md p-2 border border-gray-400 bg-white text-gray-600\" type=\"text\" value={name} onChange={handleNameChange} />\n                    </div>\n                    <div className=\"mt-4\">\n                        <Button text=\"Add Query\" onClick={handleAddQuery} />\n                    </div>\n                </form>\n            </Modal>}\n        </div>\n    )\n}\n","import { ApolloClient, InMemoryCache } from '@apollo/client'\nimport { createUploadLink } from 'apollo-upload-client'\n\nconst url = window.location.href\n\nconst searchParams = new URL(url).searchParams\n\nexport const isDesktop = searchParams.has('relateApiToken')\nexport const relateUrl = searchParams.get('relateUrl')\nexport const relateApiToken = searchParams.get('relateApiToken')\nexport const relateProjectId = searchParams.get('relateProjectId')\nexport const neo4jDesktopGraphAppId = searchParams.get('neo4jDesktopGraphAppId')\n\n// typePolicies allow apollo cache to use these fields as 'id'\n// for automated cache updates when updating a single existing entity\n// https://www.apollographql.com/docs/react/caching/cache-configuration/#customizing-identifier-generation-by-type\nconst apolloCache = new InMemoryCache({\n    typePolicies: {\n        RelateFile: {\n            keyFields: ['name', 'directory']\n        },\n        Project: {\n            fields: {\n                files: {\n                    merge: false // prefer incoming over existing data.\n                }\n            }\n        }\n    }\n})\n\n// https://www.apollographql.com/blog/file-uploads-with-apollo-server-2-0-5db2f3f60675/\nconst uploadLink = createUploadLink({\n    uri: `${relateUrl || ''}/graphql`,\n    credentials: 'same-origin',\n    headers: {\n        'keep-alive': 'true',\n        'X-API-Token': relateApiToken,\n        'X-Client-Id': neo4jDesktopGraphAppId\n    }\n})\n\n\nexport const client = new ApolloClient({\n    cache: apolloCache,\n    link: uploadLink\n})\n","import { gql } from \"@apollo/client\";\nimport { client, neo4jDesktopGraphAppId, relateProjectId, relateApiToken, relateUrl } from './client';\n\nconst GET_PROJECT_FILES = gql`\n    query GetProject($projectId: String!) {\n        getProject(name: $projectId) {\n            id\n            files {\n                name\n                directory\n                extension\n                downloadToken\n            }\n        }\n    }\n`\n\nconst ADD_PROJECT_FILE = gql`\n    mutation AddFile(\n        $projectId: String!\n        $fileUpload: Upload!\n        $destination: String\n        $overwrite: Boolean\n    ) {\n        addProjectFile(\n            name: $projectId\n            fileUpload: $fileUpload\n            destination: $destination\n            overwrite: $overwrite\n        ) {\n            name\n            directory\n            extension\n            downloadToken\n        }\n    }\n`\n\nconst DELETE_PROJECT_FILE = gql`\n    mutation RemoveFile($projectId: String!, $filePath: String!) {\n        removeProjectFile(name: $projectId, filePath: $filePath) {\n            name\n            directory\n        }\n    }\n`\n\n\nexport function saveFile(filePath: string, contents: string) {\n    return client.mutate({\n        mutation: DELETE_PROJECT_FILE,\n        variables: {\n            projectId: relateProjectId,\n            filePath: filePath,\n        }\n    })\n        .catch(e => console.log(e))\n        .then(() => {\n            console.log({\n                mutation: ADD_PROJECT_FILE,\n                variables: {\n                    projectId: relateProjectId,\n                    fileUpload: new File([contents], filePath),\n                }\n            });\n\n            return client.mutate({\n                mutation: ADD_PROJECT_FILE,\n                variables: {\n                    projectId: relateProjectId,\n                    fileUpload: new File([contents], filePath),\n                }\n            })\n                .then(res => console.log(res))\n                .catch(e => console.error(e));\n        })\n}\n\ninterface ProjectFile {\n    name: string;\n    extension: string;\n    downloadToken: string;\n}\n\nexport function getProjectFiles(): Promise<ProjectFile[]> {\n    if ( !relateApiToken ) {\n        console.log('no api token')\n        return Promise.resolve([])\n    }\n\n    return client.query({\n        query: GET_PROJECT_FILES,\n        variables: {\n            projectId: relateProjectId,\n            filterValue: 'json',\n        }\n    })\n        .then(res => res.data.getProject.files)\n        .catch(e => {\n            console.log('Error while getting project files', e)\n\n            return []\n        })\n}\n\nexport function getFileContents(file: string, token: string): Promise<string | void> {\n    console.log(`${relateUrl}/files/${token}/${file}`)\n    return fetch(`${relateUrl}/files/${token}/${file}`, {\n        headers: {\n            'X-API-Token': relateApiToken,\n            'X-Client-Id': neo4jDesktopGraphAppId,\n        } as Record<string, string>\n    })\n        .then(r => r.text())\n        .catch(r => console.log('Error getting file contents', r))\n}\n\nexport function getFileContentsAsJson(file: string, token: string) {\n    return getFileContents(file, token)\n        .then(r => JSON.parse(r as string))\n}","import { ADD_NODE, ADD_PREDICATE, ADD_RELATIONSHIP, ADD_RETURN, LOAD_QUERY, Query, REMOVE_NODE, REMOVE_PREDICATE, REMOVE_RELATIONSHIP, REMOVE_RETURN, SELECT_NODE, SELECT_RELATIONSHIP, SET_NAME } from \"../actions\"\n\n\nconst initialState: Query = {\n    updated: false,\n    loaded: false,\n    nodes: [],\n    relationships: [],\n    predicates: [],\n    output: [],\n}\n\nfunction removeRelationshipFromTree(id: string, state: Query): Query {\n    const toRemove = state.relationships.find(rel => rel.id === id)\n\n    // Remove the end node of this relationship\n    if ( toRemove ) {\n        state = removeNodeFromTree(toRemove!.to, state)\n    }\n\n    // Remove the relationship from the state\n    state.relationships = state.relationships.filter(rel => rel.id !== id)\n\n    // Remove predicates\n    state.predicates = state.predicates.filter(p => p.alias !== id)\n\n    // Remove Return\n    state.output = state.output.filter(p => p.alias !== id)\n\n    // Reset selected\n    state.selected = undefined\n\n    return state\n}\n\n\nfunction removeNodeFromTree(id: string, state: Query): Query {\n    const atStart = state.relationships.filter(row => row.from === id)\n\n    // If node is at the start, remove all relationships further down the chain\n    // eslint-disable-next-line\n    atStart.map(rel => {\n        state = removeNodeFromTree(rel.to, state)\n    })\n\n    // Remove relationships where the node is at the end\n    state.relationships = state.relationships.filter(row => row.to !== id)\n\n    // Remove the node from the node tree\n    state.nodes = state.nodes.filter(node => node.id !== id)\n\n    // Remove predicates\n    state.predicates = state.predicates.filter(p => p.alias !== id)\n\n    // Remove Return\n    state.output = state.output.filter(p => p.alias !== id)\n\n    // Reset selected\n    state.selected = undefined\n\n    return state\n}\n\nexport default function queryReducer(state: Query = initialState, action: Record<string, any>): Query {\n    state.updated = false\n\n    switch (action.type) {\n        case LOAD_QUERY:\n            return action.payload as Query\n\n\n        case SET_NAME:\n            return {\n                ...state,\n                name: action.payload.name\n            }\n\n        case ADD_NODE:\n            return {\n                ...state,\n                nodes: state.nodes.slice(0).concat({ ...action.payload, id: `n${state.nodes.length + 1}` })\n            }\n\n        case REMOVE_NODE:\n            return removeNodeFromTree(action.payload.id, state)\n\n        case ADD_RELATIONSHIP:\n            const to = `n${state.nodes.length + 1}`\n\n            return {\n                ...state,\n                nodes: state.nodes.slice(0).concat({ label: action.payload.label, id: to }),\n                relationships: state.relationships.slice(0).concat({ ...action.payload, to, id: `r${state.relationships.length + 1}` })\n            }\n\n        case REMOVE_RELATIONSHIP:\n            return removeRelationshipFromTree(action.payload.id, state)\n\n        case SELECT_NODE:\n        case SELECT_RELATIONSHIP:\n            return {\n                ...state,\n                selected: action.payload\n            }\n\n        case ADD_PREDICATE:\n            return {\n                ...state,\n                predicates: state.predicates.slice(0).concat({ ...action.payload, id: `p${state.predicates.length+1}` })\n            }\n\n        case REMOVE_PREDICATE:\n            return {\n                ...state,\n                predicates: state.predicates.slice(0).filter(p => p.id !== action.payload.id)\n            }\n\n        case ADD_RETURN:\n            return {\n                ...state,\n                output: state.output.slice(0).concat({ ...action.payload, id: `o${state.output.length+1}` })\n            }\n\n        case REMOVE_RETURN:\n            return {\n                ...state,\n                output: state.output.slice(0).filter(p => p.id !== action.payload.id)\n            }\n      }\n\n      return state\n}\n","import { v4 } from 'uuid'\nimport { neo4jDesktopGraphAppId } from '../../desktop/client';\nimport { saveDashboards } from '../../persistence';\nimport { ADD_DASHBOARD, ADD_REPORT, APP_INIT, DELETE_DASHBOARD, DELETE_REPORT, REORDER_REPORTS, UPDATE_DASHBOARD, UPDATE_REPORT } from '../actions';\n\nexport type Source = 'cypher' | 'query'\n\nexport interface Dashboard {\n    id: string;\n    name: string;\n    description: string;\n    savedAt: Date;\n}\n\nexport interface Report {\n    id: string;\n    dashboard: string;\n    database?: string;\n    name: string;\n    order: number;\n    savedAt: Date;\n\n    columns: number;\n    rows: number;\n\n    type: string; // TODO: type\n    source: Source; // TODO: type\n    query: string; // Cypher or ID\n}\n\nexport interface DashboardsState {\n    ready: boolean;\n    dashboards: Dashboard[];\n    reports: Report[];\n}\n\nexport function deleteReport(id: string) {\n    return {\n        type: DELETE_REPORT,\n        payload: { id },\n    }\n}\n\nconst initialState: DashboardsState = { dashboards: [], reports: [], ready: false }\n\nfunction saveState(state: DashboardsState) {\n    saveDashboards(state)\n\n    return state\n}\n\nexport default function dashboardsReducer(state: DashboardsState = initialState, action: Record<string, any>) {\n    switch (action.type) {\n        case APP_INIT:\n            state = {\n                ...state,\n                dashboards: action.payload.dashboards,\n                reports: action.payload.reports,\n                ready: true,\n            }\n            return state;\n\n        case ADD_DASHBOARD:\n            state = {\n                ...state,\n                dashboards: state.dashboards.concat({ id: v4(), savedAt: new Date(), ...action.payload }),\n            }\n            return saveState(state);\n\n        case UPDATE_DASHBOARD:\n            state = {\n                ...state,\n                dashboards: state.dashboards.filter(d => d.id !== action.payload.id).concat({\n                    ...action.payload,\n                    savedAt: new Date()\n                })\n            }\n            return saveState(state);\n\n        case DELETE_DASHBOARD:\n            state = {\n                ...state,\n                dashboards: state.dashboards.filter(d => d.id !== action.payload.id),\n                reports: state.reports.filter(d => d.dashboard !== action.payload.id),\n            }\n            return saveState(state);\n\n        case ADD_REPORT:\n            const order = state.reports.filter(report => report.dashboard === action.payload.dashboard).length\n\n            state = {\n                ...state,\n                reports: state.reports.concat({\n                    id: v4(),\n                    savedAt: new Date(),\n                    order,\n                    ...action.payload,\n                })\n            }\n            return saveState(state);\n\n        case UPDATE_REPORT:\n            // TODO: Re-order reports around the updated report\n            state = {\n                ...state,\n                reports: state.reports.filter(d => d.id !== action.payload.id).concat({\n                    ...action.payload,\n                    savedAt: new Date()\n                })\n            }\n            return saveState(state);\n\n        case DELETE_REPORT:\n            // TODO: Re-order reports around the deleted report\n            state = {\n                ...state,\n                reports: state.reports.filter(d => d.id !== action.payload.id),\n            }\n            return saveState(state);\n\n        case REORDER_REPORTS:\n            console.log('reorder reports', action.payload);\n\n\n            state = {\n                ...state,\n                reports: state.reports.map(report => {\n                    const found = action.payload.reports.find(item => item.id === report.id)\n\n                    if (found) {\n                        return {\n                            ...report,\n                            order: found.order,\n                        }\n                    }\n\n                    return report\n                })\n            }\n            return saveState(state);\n\n    }\n\n    return state;\n}","import { getProjectFiles, relateApiToken, getFileContentsAsJson, saveFile } from \"./desktop\";\nimport store from \"./store\";\nimport { init, QueriesState, Query } from \"./store/actions\";\nimport { Dashboard, Report, DashboardsState } from \"./store/reducers/dashboards\";\n\nexport const DASHBOARD_LOCAL_STORAGE_KEY = 'dashboards'\nexport const QUERIES_LOCAL_STORAGE_KEY = 'queries'\n\nconst DASHBOARD_FILE = 'charts-dashboards.json'\nconst QUERIES_FILE = 'charts-queries.json'\n\ninterface DashboardState {\n    dashboards: Dashboard[];\n    reports: Report[];\n}\n\ninterface InitialState extends DashboardState {\n    queries: Query[];\n}\n\nexport function saveDashboards(state: DashboardsState): DashboardsState {\n    if (relateApiToken) {\n        saveFile(DASHBOARD_FILE, JSON.stringify(state))\n    }\n\n    window.localStorage.setItem(DASHBOARD_LOCAL_STORAGE_KEY, JSON.stringify(state))\n\n    return state\n}\n\nexport function saveQueries(state: QueriesState): QueriesState {\n    if (relateApiToken) {\n        saveFile(QUERIES_FILE, JSON.stringify(state))\n    }\n\n    window.localStorage.setItem(QUERIES_LOCAL_STORAGE_KEY, JSON.stringify(state))\n\n    return state;\n}\n\n\nfunction getDashboardDataFromLocalStorage(): Promise<DashboardState> {\n    const raw = window.localStorage.getItem(DASHBOARD_LOCAL_STORAGE_KEY)\n\n    if (raw === null) {\n        return Promise.resolve({\n            dashboards: [],\n            reports: [],\n        })\n    }\n\n    return Promise.resolve(JSON.parse(raw))\n}\n\nfunction getDashboardDataFromDesktop(files): Promise<DashboardState> {\n    const dashboardsFile = files.find(file => file.name === DASHBOARD_FILE)\n\n    if (!dashboardsFile) {\n        return getDashboardDataFromLocalStorage()\n    }\n\n    return getFileContentsAsJson(dashboardsFile.name, dashboardsFile.downloadToken)\n        .catch(e => {\n            console.log(`Error loading ${DASHBOARD_FILE}, using default state`);\n            console.log(e);\n\n            return {\n                dashboards: [],\n                reports: [],\n            }\n        })\n}\n\nfunction getQueryDataFromDesktop(files): Promise<Query[]> {\n    const queriesFile = files.find(file => file.name === QUERIES_FILE)\n\n    if (!queriesFile) {\n        return Promise.resolve([])\n    }\n\n    return getFileContentsAsJson(queriesFile.name, queriesFile.downloadToken)\n        .catch(e => {\n            console.log(`Error loading ${QUERIES_FILE}, using default`);\n            console.log(e);\n\n            return {\n                dashboards: [],\n                reports: [],\n            }\n        })\n}\n\nfunction getStateFromDesktop(): Promise<InitialState> {\n    return getProjectFiles()\n        .then(files => {\n            return Promise.all([\n                getDashboardDataFromDesktop(files),\n                getQueryDataFromDesktop(files),\n            ])\n        })\n        .then(([dashboardData, queries]) => ({\n            dashboards: dashboardData ? (dashboardData as Record<string, any>).dashboards : [],\n            reports: dashboardData ? (dashboardData as Record<string, any>).reports : [],\n            queries: queries || []\n        }) as InitialState)\n        .catch(e => {\n            console.log('Error loading state from Neo4j Desktop', e)\n\n            return getStateFromLocalStorage()\n        })\n}\n\nfunction getStateFromLocalStorage(): Promise<InitialState> {\n    const { dashboards, reports } = JSON.parse(window.localStorage.getItem(DASHBOARD_LOCAL_STORAGE_KEY) || '{\"dashboards\":[],\"reports\":[]}')\n    const queries = JSON.parse(window.localStorage.getItem(QUERIES_LOCAL_STORAGE_KEY) || '[]')\n\n    return Promise.resolve({ dashboards, reports, queries })\n}\n\n\nexport function getInitialState() {\n    if (relateApiToken) {\n        getStateFromDesktop()\n            .then((state: InitialState) => {\n                console.log('state from', state);\n\n                store.dispatch(init(state.dashboards, state.reports, state.queries))\n            })\n    }\n    else {\n        getStateFromLocalStorage()\n            .then((state: InitialState) => store.dispatch(init(state.dashboards, state.reports, state.queries)))\n    }\n}","import { combineReducers, createStore } from 'redux'\nimport currentQuery from './reducers/currentQuery'\nimport queries from './reducers/queries'\nimport dashboards from './reducers/dashboards'\n\nconst rootReducer = combineReducers({\n    queries,\n    currentQuery,\n    dashboards,\n})\n\nexport default createStore(rootReducer)\n\nexport type RootState = ReturnType<typeof rootReducer>\n","import { v4 } from 'uuid'\nimport { saveQueries } from '../../persistence'\nimport { ADD_QUERY, APP_INIT, DELETE_QUERY, Query, QueriesState, UPDATE_QUERY } from '../actions';\n\nexport default function queriesReducer(state: QueriesState = [], action) {\n    switch (action.type) {\n        case APP_INIT:\n            return action.payload.queries;\n\n        case ADD_QUERY:\n            state = state.concat({\n                id: v4(),\n                name: 'Untitled Query',\n                nodes: [],\n                relationships: [],\n                predicates: [],\n                output: [],\n                ...action.payload,\n            } as Query)\n            return saveQueries(state);\n\n        case UPDATE_QUERY:\n            state = state.filter(query => query.id !== action.payload.id)\n            .concat({\n                ...action.payload,\n                updated: false,\n                savedAt: new Date()\n            } as Query)\n            return saveQueries(state);\n\n        case DELETE_QUERY:\n            state = state.filter(query => query.id !== action.payload.id)\n            return saveQueries(state);\n    }\n\n    return state\n}\n","import React from 'react'\nimport Card from '../components/card'\nimport Header from '../components/header'\nimport Report from '../components/reports/Report'\nimport { reportTypes, } from '../constants'\n\nfunction ExampleReport(report) {\n    let example: any = undefined\n\n    if ( ! report.previewQuery ) {\n        example = <Card title={report.text}>Preview coming soon...</Card>\n    }\n    else {\n        example = <Report type={report.value} source='cypher' query={report.previewQuery} />\n    }\n\n    return (\n        <div className=\"flex mb-12\">\n            <div className=\"w-full lg:w-1/2 flex flex-col justify-between px-2\">\n                <h3 className=\"text-lg font-bold pb-4 flex-grow-0\">{report.text}</h3>\n                <div className=\"flex flex-grow-0\">\n                    {report.hint}\n                 </div>\n\n                 {report.exampleQuery && <div className=\"mt-8\">\n                    <div className=\"font-xs text-gray-500 font-bold mb-2\">Example Query:</div>\n                    <pre className=\"flex-grow-0 border-t border-gray-400 pt-2 text-sm rounded-md bg-gray-100 text-gray-6600\">{report.exampleQuery}</pre>\n                 </div>}\n                 <div className=\"flex-grow\"></div>\n            </div>\n\n            <div className=\"w-full lg:w-1/2 p-2 pb-0\">\n                {example}\n            </div>\n        </div>\n    )\n}\n\nexport default function Help() {\n\n    return (\n        <div className=\"flex flex-col w-full\">\n            <Header\n                sectionLink=\"/help\"\n                sectionText=\"Help\"\n            />\n\n            <div className=\"container mx-auto text-gray-800\">\n                <div className=\"p-8 pb-0\">\n                    <h2 className=\"font-bold text-gray-800 mb-4 px-2\" style={{fontSize: '2rem'}}>Getting Started</h2>\n                </div>\n\n                <div className=\"p-8\">\n                    <p className=\"px-2\">\n                        <strong>Charts</strong> is a Graph App that allows you to quickly create and share dashboards backed by Neo4j data.\n                        Charts allows you to create multiple dashboards and reports using a single connection supplied by Neo4j Desktop.\n                    </p>\n                </div>\n\n                <div className=\"p-8\">\n                    <h2 className=\"font-bold text-gray-800 mb-12 border-b border-gray-400 pb-4 px-2\" style={{fontSize: '1.4rem'}}>Report Types</h2>\n\n                    {reportTypes.map(report => <ExampleReport {...report} />)}\n\n\n                </div>\n            </div>\n        </div>\n    )\n}","import React from 'react'\nimport { useEffect } from 'react';\nimport { useState } from 'react';\nimport { useStore } from 'react-redux';\nimport { useLazyWriteCypher } from 'use-neo4j';\nimport Button from '../forms/button';\nimport Modal from \"../modal\";\n\ninterface ExportToNeo4jProps {\n    onClose: () => void;\n}\n\nexport default function ExportToNeo4j(props: ExportToNeo4jProps) {\n    const [ confirmation, setConfirmation ] = useState<string>()\n    const [ started, setStarted ] = useState<boolean>(false)\n    const [ save, { loading, error } ] = useLazyWriteCypher(`MERGE (c:_Charts) SET c.config = $json`)\n    const [ isSaving, setIsSaving ] = useState<boolean>(false)\n\n    const { getState } = useStore()\n\n    const onButtonClick = () => {\n        const { dashboards, queries } = getState()\n\n        const json = JSON.stringify({ ...dashboards, queries })\n\n        setStarted(true)\n\n        save({ json })\n    }\n\n    useEffect(() => {\n        setIsSaving(loading)\n\n        if ( started && !loading && !error ) {\n            setConfirmation('Dashboard saved!')\n        }\n        else {\n            setConfirmation(undefined)\n        }\n    }, [ loading ])\n\n    return (\n        <Modal title=\"Save to Neo4j\" onClose={props.onClose}>\n            <div className=\"mb-12\">\n            <p className=\"mb-4\">\n                Are you sure you want to save the current layout to Neo4j?\n            </p>\n            <p className=\"mb-4\">\n                This will create or overwrite a node in the current graph with a label <code>_Charts</code>.\n            </p>\n            </div>\n\n            <div className=\"pt-4 mt-4 border-t border-gray-400\">\n                <Button size=\"md\" colour=\"blue\" text='Save to Neo4j' onClick={onButtonClick} disabled={isSaving} />\n                {' '}\n                <Button size=\"md\" colour=\"red\" text='Close' onClick={props.onClose} disabled={isSaving} />\n\n                {isSaving && <span className=\"inline-block ml-2 italic\">Saving...</span>}\n                {error && <span className=\"inline-block ml-2 italic text-red-700\">{error.message}</span>}\n                {confirmation && <span className=\"inline-block ml-2 italic text-green-700\">{confirmation}</span>}\n            </div>\n        </Modal>\n    )\n}\n","import { dispatch } from 'd3';\nimport React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useReadCypher } from 'use-neo4j';\nimport { init } from '../../store/actions';\nimport Button from '../forms/button';\nimport Modal from '../modal';\n\ninterface ImportFromNeo4jProps {\n    onClose: () => void;\n}\n\nexport default function ImportFromNeo4j(props: ImportFromNeo4jProps) {\n    const { loading, first, error } = useReadCypher(`MATCH (c:_Charts) RETURN c`)\n    const dispatch = useDispatch()\n\n    if (loading) {\n        return (\n            <div className=\"fixed inset-0 bg-gray-400 bg-opacity-75 flex flex-col justify-center z-20\">\n                Loading configuration...\n            </div>\n        )\n    }\n\n    if (!loading && !first) {\n        return (\n            <Modal title=\"Import from Neo4j\" onClose={props.onClose}>\n                <div className=\"mb-12\">\n                    <p className=\"mb-4\">\n                        We couldn't find a dashboard layout in the current database.\n                    </p>\n                    <p className=\"mb-4\">\n                        A configration would be stored in a <code>(:_Charts)</code> node.\n                    </p>\n                </div>\n                <div className=\"pt-4 mt-4 border-t border-gray-400\">\n                    <Button size=\"md\" colour=\"red\" text='Close' onClick={props.onClose} />\n                </div>\n            </Modal>\n        )\n    }\n\n    const onButtonClick = () => {\n        const object = JSON.parse(first!.get('c').properties.config)\n\n        const {\n            dashboards = [],\n            reports =  [],\n            queries = [],\n        } = object\n\n        dispatch(init(dashboards, reports, queries))\n\n        props.onClose()\n    }\n\n    return (\n        <Modal title=\"Import from Neo4j\" onClose={props.onClose}>\n            <div className=\"mb-12\">\n                <p className=\"mb-4\">\n                    Are you sure you want to load a new layout from the<br />\n                    <code>(:_Charts)</code> node\n                    in the current database?\n                </p>\n                <p className=\"mb-4\">\n                    This will override the current layout and any queries.\n                </p>\n            </div>\n\n            <div className=\"pt-4 mt-4 border-t border-gray-400\">\n                <Button size=\"md\" colour=\"blue\" text='Load from current connection' onClick={onButtonClick} />\n                {' '}\n                <Button size=\"md\" colour=\"red\" text='Close' onClick={props.onClose} />\n            </div>\n        </Modal>\n    )\n}","import React from 'react'\nimport { useState } from 'react'\nimport ExportToNeo4j from './ExportToNeo4j'\nimport ImportFromNeo4j from './ImportFromNeo4j'\n\nexport default function ExportForm() {\n    const colour = 'blue'\n\n    const [ showMenu, setShowMenu ] = useState<boolean>(false)\n    const [ showLoadFromNeo4jForm, setShowLoadFromNeo4jForm ] = useState<boolean>(false)\n    const [ showExportToNeo4jForm, setShowExportToNeo4jForm ] = useState<boolean>(false)\n\n    const hideMenu = () => setShowMenu(false)\n    const showLoadFromNeo4j = () => {\n        setShowLoadFromNeo4jForm(true)\n        hideMenu()\n    }\n    const hideLoadFromNeo4j = () => {\n        setShowLoadFromNeo4jForm(false)\n        hideMenu()\n    }\n\n    const showSaveToNeo4j = () => {\n        setShowExportToNeo4jForm(true)\n        hideMenu()\n    }\n    const hideSaveToNeo4j = () => {\n        setShowExportToNeo4jForm(false)\n        hideMenu()\n    }\n\n    return (\n        <div>\n            {showExportToNeo4jForm && <ExportToNeo4j onClose={hideSaveToNeo4j} />}\n            {showLoadFromNeo4jForm && <ImportFromNeo4j onClose={hideLoadFromNeo4j} />}\n\n            {showMenu && <div className={`fixed text-sm border border-${colour}-200 bottom-0 right-0 mr-4 p-1 bg-white text-${colour}-800 rounded-md`} style={{marginBottom: '64px'}}>\n                <a className=\"cursor-pointer block p-2 text-blue-600 text-right\" onClick={() => showLoadFromNeo4j()}>Load From Neo4j</a>\n                <a className=\"cursor-pointer block p-2 text-blue-600 text-right\" onClick={() => showSaveToNeo4j()}>Save to Neo4j</a>\n                {/* <a className=\"cursor-pointer block p-2 text-blue-600 text-right\" onClick={() => showSaveJson()}>Export Dashboard as JSON</a> */}\n\n                <div style={{position: 'absolute', bottom: -8, right: '18px', width: 0, height: 0, borderLeft: '8px solid transparent', borderRight: '8px solid transparent', borderTop: '8px solid #e2e8f0'}}></div>\n            </div>}\n\n            <div className={`fixed bottom-0 right-0 mx-4 -mb-2 p-2 pt-4 rounded-md shadow-md bg-${colour}-200 text-${colour}-800 stroke-${colour}-600`} style={{ width: '46px', height: '65px' }}>\n                <svg width=\"24px\" height=\"24px\" viewBox=\"0 0 24 24\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" className=\"m-auto cursor-pointer\" onClick={() => setShowMenu(!showMenu)}>\n                    <g id=\"Page-1\" stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                        <g id=\"cog-1\" stroke=\"#000000\">\n                            <path d=\"M19.922,7.213 C19.6941046,7.69202131 19.6799007,8.24518632 19.8829118,8.73527226 C20.0859229,9.22535819 20.4871277,9.60644606 20.987,9.784 L22.252,10.234 C23.0000302,10.4994999 23.4998349,11.2072498 23.4998349,12.001 C23.4998349,12.7947502 23.0000302,13.5025001 22.252,13.768 L20.987,14.218 C20.4871277,14.3955539 20.0859229,14.7766418 19.8829118,15.2667277 C19.6799007,15.7568137 19.6941046,16.3099787 19.922,16.789 L20.5,18 C20.8424413,18.7170161 20.6957457,19.5720213 20.1338835,20.1338835 C19.5720213,20.6957457 18.7170161,20.8424413 18,20.5 L16.787,19.924 C16.3079787,19.6961046 15.7548137,19.6819007 15.2647277,19.8849118 C14.7746418,20.0879229 14.3935539,20.4891277 14.216,20.989 L13.766,22.254 C13.5000881,23.0013024 12.7927024,23.500428 11.9995,23.500428 C11.2062976,23.500428 10.4989119,23.0013024 10.233,22.254 L9.783,20.989 C9.60521975,20.4890625 9.22394163,20.0878576 8.73370104,19.8848614 C8.24346045,19.6818652 7.69016476,19.6960868 7.211,19.924 L6,20.5 C5.28294662,20.8437921 4.42699596,20.6976004 3.86469776,20.1353022 C3.30239957,19.573004 3.15620795,18.7170534 3.5,18 L4.076,16.787 C4.3038954,16.3079787 4.31809933,15.7548137 4.11508823,15.2647277 C3.91207714,14.7746418 3.51087231,14.3935539 3.011,14.216 L1.746,13.766 C0.997969789,13.5005001 0.49816505,12.7927502 0.49816505,11.999 C0.49816505,11.2052498 0.997969789,10.4974999 1.746,10.232 L3.011,9.782 C3.51033807,9.60437688 3.91111575,9.22362414 4.11407782,8.73403771 C4.31703989,8.24445128 4.3032052,7.69181758 4.076,7.213 L3.5,6 C3.15620795,5.28294662 3.30239957,4.42699596 3.86469776,3.86469776 C4.42699596,3.30239957 5.28294662,3.15620795 6,3.5 L7.213,4.076 C7.69169965,4.30331054 8.2442335,4.31744047 8.73392585,4.11489457 C9.22361819,3.91234867 9.60473407,3.51204378 9.783,3.013 L10.233,1.748 C10.4989119,1.00069761 11.2062976,0.501571993 11.9995,0.501571993 C12.7927024,0.501571993 13.5000881,1.00069761 13.766,1.748 L14.216,3.013 C14.3935539,3.51287231 14.7746418,3.91407714 15.2647277,4.11708823 C15.7548137,4.32009933 16.3079787,4.3058954 16.787,4.078 L18,3.5 C18.7170161,3.15755865 19.5720213,3.30425435 20.1338835,3.86611652 C20.6957457,4.4279787 20.8424413,5.28298387 20.5,6 L19.922,7.213 Z\" id=\"Shape\"></path>\n                            <circle id=\"Oval\" cx=\"11.999\" cy=\"12.001\" r=\"4.5\"></circle>\n                        </g>\n                    </g>\n                </svg>\n            </div>\n\n        </div>\n    )\n}","import React, { useContext } from \"react\";\nimport { Neo4jContext } from \"use-neo4j\";\nimport { version } from '../../package.json'\n\nexport default function Footer() {\n    const context = useContext(Neo4jContext)\n    let host = <span></span>\n\n    if ( context.driver ) {\n        const address = context.driver['_meta'].address\n        const auth = context.driver['_connectionProvider']['_authToken']\n\n        host = <span> |  Connected to\n            {' '}\n            <strong>{address._host}:{address._port}</strong> as\n            {' '}\n            <strong>{auth.principal}</strong>\n        </span>\n    }\n\n    return (\n        <div className=\"container m-auto\">\n            <div className=\"text-xs border-t border-gray-400 p-4 bg-gray-100\">\n                Charts v{version}\n                {host}\n            </div>\n        </div>\n    )\n\n}","/* eslint-disable */\nimport React, { useEffect } from 'react';\nimport QueryEditor from './views/QueryEditor'\nimport { BrowserRouter as Router, Switch, Route, Link } from 'react-router-dom'\nimport './App.css';\nimport DashboardView from './views/DashboardView';\nimport DashboardList from './views/DashboardList';\nimport QueryList from './views/QueryList'\nimport { useSelector } from 'react-redux';\nimport { getInitialState } from './persistence';\nimport { RootState } from './store';\nimport Help from './views/Help';\nimport ExportForm from './components/export/ExportForm';\nimport Footer from './components/Footer';\n\nfunction App() {\n  const ready = useSelector((state: RootState) => state.dashboards.ready)\n\n  useEffect(() => {\n    getInitialState()\n  }, [])\n\n  if ( !ready ) {\n    return <div>...</div>\n  }\n\n  return (\n    <div className=\"App flex flex-col text-gray-600\">\n      <Router>\n        <div className=\"flex flex-row w-full bg-gray-800 flex-grow-0 flex-shrink-0\">\n          <Link to=\"/\" className=\"px-4 py-6 bg-gray-700 text-white text-sm hover:text-gray-200 font-bold\">\n            <span>Charts</span>\n          </Link>\n          <div className=\"flex flex-grow\"></div>\n          <Link className=\"text-sm text-white px-4 py-6 hover:text-gray-200 hover:bg-gray-700\" to=\"/dashboards\">Dashboards</Link>\n          <Link className=\"text-sm text-white px-4 py-6 hover:text-gray-200 hover:bg-gray-700\" to=\"/queries\">Queries</Link>\n          <Link className=\"text-sm text-white px-4 py-6 hover:text-gray-200 hover:bg-gray-700\" to=\"/help\">\n            Help\n          </Link>\n        </div>\n        <div className=\"flex flex-col flex-grow w-full bg-gray-100 overflow-auto pb-12\">\n          <Switch>\n            <Route exact={true} path=\"/dashboards\" component={DashboardList} />\n            <Route exact={true} path=\"/queries\" component={QueryList} />\n            <Route path=\"/dashboards/:id\" component={DashboardView} />\n            <Route path=\"/queries/:id\" component={QueryEditor} />\n            <Route path=\"/help\" component={Help} />\n            <Route path=\"*\" component={DashboardList} />\n          </Switch>\n        <Footer />\n        </div>\n      </Router>\n      <ExportForm />\n    </div>\n  )\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","export default __webpack_public_path__ + \"static/media/logo.48da9fd1.svg\";","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { createDriver, Neo4jProvider } from 'use-neo4j';\nimport { Driver } from 'neo4j-driver'\nimport { version } from 'use-neo4j/package.json'\nimport appLogo from './logo.svg'\n// import 'semantic-ui-css/semantic.min.css'\nimport 'tailwindcss/dist/tailwind.css'\nimport './index.css';\nimport store from './store';\n\nimport { Provider as ReduxProvider } from 'react-redux'\nimport { Neo4jScheme } from 'use-neo4j/dist/neo4j-config.interface';\n\nconst logo = () => {\n  return (<div className=\"logo\"><img src={appLogo} alt=\"logo\" /></div>)\n}\n\nconst footer = () => {\n  return (<div className=\"footer\">\n    <a href=\"https://github.com/adam-cowley/graphapp-starter-react\" rel=\"noopener noreferrer\" target=\"_blank\">\n      Built with GraphApp Starter Kit using<br />\n      <code>use-neo4j</code> version {version}\n    </a>\n  </div>)\n}\n\nlet driver: Driver | undefined = undefined\n\nif ( process.env.REACT_APP_NEO4J_SCHEME ) {\n  driver = createDriver(\n    process.env.REACT_APP_NEO4J_SCHEME as Neo4jScheme,\n    process.env.REACT_APP_NEO4J_HOST as string,\n    process.env.REACT_APP_NEO4J_PORT as string,\n    process.env.REACT_APP_NEO4J_USERNAME as string,\n    process.env.REACT_APP_NEO4J_PASSWORD as string\n  )\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    <ReduxProvider store={store}>\n      <Neo4jProvider driver={driver} logo={logo()} footer={footer()}>\n        <App />\n      </Neo4jProvider>\n    </ReduxProvider>\n  </React.StrictMode>\n  ,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}